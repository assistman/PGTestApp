webpackJsonp([45],{1918:function(e,t,i){var n;void 0!==(n=function(e,t,n){function s(e){return r.mobile()?new o(e):new a(e)}var a=i(2747),o=i(2752),r=i(15);n.exports={initNewsSentimentView:s}}.call(t,i,t,e))&&(e.exports=n)},2655:function(e,t,i){var n;void 0!==(n=function(e,t,n){var s=(i(0),i(13)),a=s.extend({defaults:function(){return{stockTicker:"",symbol:"",description:"",stockPrice:0,stockDailyChangeAmount:0,stockDailyChangePercent:0,bearishPercentage:0,bullishPercentage:0,numberOfArticles:0,newsScore:"",articles:[],keywords:[],chartData:[],numberArticlesAvg:0,numberArticlesWeek:0,positiveStockSentiment:0,neutralStockSentiment:0,negativeStockSentiment:0,positiveSectorSentiment:0,neutralSectorSentiment:0,negativeSectorSentiment:0}},getStockTicker:function(){return this.get("stockTicker")},getSymbol:function(){return this.get("symbol")},getDescription:function(){return this.get("description")},getStockPrice:function(){return this.get("stockPrice")},getStockDailyChangeAmount:function(){return this.get("stockDailyChangeAmount")},getStockDailyChangePercent:function(){return this.get("stockDailyChangePercent")},getBearishPercentage:function(){return this.get("bearishPercentage")},getBullishPercentage:function(){return this.get("bullishPercentage")},isExistsSentimentData:function(){return this.get("bearishPercentage")&&this.get("bullishPercentage")&&this.get("bearishPercentage")+this.get("bullishPercentage")==100},getNumberOfArticles:function(){return this.get("numberOfArticles")},getNewsScore:function(){return this.get("newsScore")},getNewsScoreDir:function(){var e=this.get("newsScore").toLowerCase();return e.indexOf("positive")>-1?"positive":e.indexOf("negative")>-1?"negative":"neutral"},getArticles:function(){return this.get("articles")},getKeywords:function(){return this.get("keywords").join(", ").slice(0,-1)},getNumberArticlesAvg:function(){return this.get("numberArticlesAvg")},getNumberArticlesWeek:function(){return this.get("numberArticlesWeek")},getChartData:function(){return this.get("chartData")},getPositiveStockSentiment:function(){return this.get("positiveStockSentiment")},getNegativeStockSentiment:function(){return this.get("negativeStockSentiment")},getPositiveSectorSentiment:function(){return this.get("positiveSectorSentiment")},getNegativeSectorSentiment:function(){return this.get("negativeSectorSentiment")}});n.exports=a}.call(t,i,t,e))&&(e.exports=n)},2656:function(e,t,i){(function(n){var s;void 0!==(s=function(e,t,n){var s=i(0),a=i(278),o=i(23),r=i(3);n.exports=function(e,t,i){var n=s.map(t.getChartData(),function(e){var t=e.date.split("-"),i=o.splitByComma(__("calendar_monthNames"));return e.date_formatted=t[2]+" "+i[t[1]-1].substring(0,3),e.negativeCol=e.neutral+e.negative,e.positiveCol=e.neutral+e.negative+e.positive,e}).sort(function(e,t){return r(e.date,"YYYY-M-D").format("X")-r(t.date,"YYYY-M-D").format("X")}),c=s.map(n,function(e){return e.date_formatted}),l=s.map(n,function(e){return e.price}),d=s.map(n,function(e){return e.positiveCol}),v=s.map(n,function(e){return e.negativeCol}),m=s.map(n,function(e){return e.neutral});a.chart(e,{credits:{enabled:!1},chart:{zoomType:!1,width:i,height:205,spacingTop:20,spacingBottom:10,backgroundColor:"#fff",style:{fontFamily:"Lato, 'Helvetica Neue', Helvetica, Arial, sans-serif;"}},title:{text:""},xAxis:{categories:c,style:{color:"#818692"},tickWidth:0,lineColor:"#979797",lineWidth:1,gridLineWidth:0},yAxis:[{title:{text:__("news.sentiment.articles"),style:{color:"#818692"}},labels:{format:"{value}",style:{color:"#818692"}},lineColor:"#979797",lineWidth:1,gridLineWidth:0},{title:{text:__("insiders.graph.stock.price"),style:{color:"#818692"}},labels:{format:"{value}",style:{color:"#818692"}},lineWidth:1,gridLineWidth:0,lineColor:"#979797",opposite:!0}],plotOptions:{spline:{lineWidth:1,marker:{enabled:!1}},column:{groupPadding:.5,pointWidth:i/25,borderWidth:0}},legend:{enabled:!1},tooltip:{style:{color:"#818692"},formatter:function(){var e=this,t=s.find(n,function(t){return t.date_formatted===e.x});return"<div><strong>"+t.date_formatted+", "+r(t.date).format("YYYY")+"</strong><br/><span>"+__("news.sentiment.bullish.news")+" "+__("news.sentiment.articles")+": <strong>"+t.positive+"</strong></span><br /><span>"+__("news.sentiment.bearish.news")+" "+__("news.sentiment.articles")+": <strong>"+t.negative+"</strong></span><br /><span>"+__("news.sentiment.neutral.news")+" "+__("news.sentiment.articles")+": <strong>"+t.neutral+"</strong></span></div>"}},series:[{name:"",type:"column",data:d,color:"#1ecd93"},{name:"",type:"column",data:v,color:"#ff433d"},{name:"",type:"column",data:m,color:"#c3c3c3"},{name:"",type:"spline",data:l,color:"#2e86ab",yAxis:1,enableMouseTracking:!1}]})}}.call(t,i,t,e))&&(e.exports=s)}).call(t,i(0))},2747:function(e,t,i){(function(n,s){function a(e){if(Array.isArray(e)){for(var t=0,i=Array(e.length);t<e.length;t++)i[t]=e[t];return i}return Array.from(e)}var o;void 0!==(o=function(e,t,n){var o=i(0),r=i(2),c=i(12),l=i(45),d=i(6),v=i(7),m=i(14),u=i(54),h=i(2655),p=i(1),g=i(16),f=i(120),k=i(2656),b=i(185),w=i(79),_=i(2748),S=i(30),y=i(161).default,C=i(68),x=c.extend({subscribedInstruments:[],mainTemplate:o.template(i(2749)),contentTemplate:o.template(i(2750)),detailsTemplate:o.template(i(2751)),events:{"click .news-sentiment-top .icon-close-blue":"close","click .view-report":"viewDetails","click .btn-back":"closeDetails","click .choosen-header-wrapper":"toggleFilter","click .chosen-stocks li span":"filterStocks","click .chosen-stocks li input":"filterItems","click .chosen-stocks .chosen-reset":"filterReset","click .take-tour":"openTour"},tagName:"div",className:"news-sentiment-wrapper popup-item",initialize:function(e){var t=this;c.prototype.initialize.apply(this,arguments),this.listenTo(r,"ui:header-itemclick",this.close),this.listenTo(r,"ui:instrument:change",this.close),this.listenTo(r,"ribbon:update",this.updateContentHeight),s(window).on("resize.sentiment",function(){return t.updateContentHeight()}),this.parent=e.parent,this.parent.find(".main-box-content").addClass("hidden"),this.createLoadingView(),this.getNewsSentiment()},getNewsSentiment:function(){var e=this;return d.loadNewsSentiment().then(function(t){if(t.data.error)return Promise.reject();e.newsSentiment=e.createCollection(t.data),e.render()})},createCollection:function(e){var t=new l,i=[];return o.each(e,function(e){var n=new h(e);o.isUndefined(m.getInstrumentBySymbol(n.getSymbol()))||(n.set("instrument",m.getInstrumentBySymbol(n.getSymbol())),i.push(n.getSymbol()),t.add(n))}),this.subscribedInstruments=u.update(i,this.subscribedInstruments).addedSymbols,t},viewDetails:function(e){var t=this,i=e.currentTarget.rel;if(i){var n=s(e.currentTarget.closest(".stock-data")).find(".news-sentiment-data");return n.find(".score").length>0?(this.$el.find(".stock-data").addClass("hidden"),this.$el.find(".btn-back").removeClass("hidden"),this.$el.find(".chosen-stocks").addClass("hidden"),s(e.currentTarget.closest(".stock-data")).removeClass("hidden").find(".stock-detailed-report").addClass("hidden"),void n.removeClass("hidden")):(this.createLoadingView(),d.loadNewsSentimentByTicker(i).then(function(n){if(n.data.error)return Promise.reject();s(e.currentTarget).parent().addClass("hidden"),t.openInstrumentRow(n.data,i,s(e.currentTarget))}))}},openInstrumentRow:function(e,t,i){var n=new h(e),s=i.parent().parent().parent().parent(),a=o.find(this.newsSentiment.models,function(e){return e.getStockTicker()===t});s.find(".news-sentiment-data").html(this.detailsTemplate({item:n,itemMainData:a,ticker:t,articleDate:C.newsSentimentArticleDate.bind(C)})).removeClass("hidden");var r={all:"news.sentiment.all.news",positive:"tipranks.bullish",negative:"tipranks.bearish"};this.filterNewsDropdown=this.addChildView(".articles."+t.toLowerCase()+" .filter",b,{template:w.selectBox,disable:!1,translationKey:"",options:["all","positive","negative"],transformOptionsValue:function(e){return e},transformOptionText:function(e){return __(r[e])},title:"",name:"news-filter"}),this.filterNewsDropdown.value("all"),this.listenTo(this.filterNewsDropdown,"change",this.filterNews.bind(this)),k(s.find(".analysis-graph")[0],n,600),this.$el.find(".articles").css("height",document.documentElement.clientHeight-230-122+"px"),this.$el.find(".stock-data").addClass("hidden"),s.removeClass("hidden"),this.$el.find(".btn-back").removeClass("hidden"),this.$el.find(".chosen-stocks").addClass("hidden"),this.destroyLoadingView(),__eventos("tradingTools:newsSentiment:impression",{page:"details",instrumentName:a.getSymbol()})},closeDetails:function(){var e=o.find(this.$el.find(".stock-data"),function(e){return!s(e).hasClass("hidden")});this.$el.find(".btn-back").addClass("hidden"),this.$el.find(".news-sentiment-data").addClass("hidden"),this.$el.find(".news-sentiment-header").removeClass("hidden"),this.$el.find(".stock-data").removeClass("hidden").find(".stock-detailed-report").removeClass("hidden"),this.$el.find(".chosen-stocks").removeClass("hidden"),this.$el.find(".content-block")[0].scrollTop=e.offsetTop-90},close:function(e){u.remove(this.subscribedInstruments),r.trigger("ui:chart:update-size"),s(window).off("resize.sentiment"),this.parent.find(".main-box-content").removeClass("hidden"),this.unMountBuySell(),e&&r.navigate("/"),this.destroy()},toggleFilter:function(e){var t=s(e.currentTarget).parent();t.hasClass("collapsed")?(t.removeClass("collapsed").addClass("expanded"),s(document).on("click.content",function(e){s(e.target).closest(".chosen-stocks")||(t.removeClass("expanded").addClass("collapsed"),s(document).off("click.content"))})):(t.removeClass("expanded").addClass("collapsed"),s(document).off("click.content"))},filterStocks:function(e){var t=e.currentTarget.previousElementSibling;t.checked=!t.checked,this.filterItems()},filterReset:function(){this.$el.find(".chosen-stocks").removeClass("expanded").addClass("collapsed"),o.each(this.$el.find("input[name=stocks]"),function(e){return e.checked=!1}),this.filterItems()},filterItems:function(){var e=this.$el.find("input[name=stocks]:checked");this.$el.find(".chosen-total span").html(e.length||""),1===e.length?this.$el.find(".chosen-text").html(this.$el.find("input[name=stocks]:checked")[0].value):e.length>1?this.$el.find(".chosen-text").html(__("tipranks.filter.shares.selected",e.length)):this.$el.find(".chosen-text").html(__("tipranks.filter.all.shares"));var t=[],i=[];e.length>0&&(t=o.map(e,function(e){return s(e).val()})),i=o.filter(this.newsSentiment.models,function(e){return o.find(t,function(t){return t===e.getSymbol()})}),this.renderFilteredData(i)},filterNews:function(e){var t=s(e.el).closest(".articles"),i=s(e.el).find("select").val();s(t).find(".article").removeClass("hidden no-border"),"all"!==i&&s(t).find(".article:not(."+i+")").addClass("hidden");var n=document.querySelectorAll(".article:not(.hidden)");n.length>=1&&n[n.length-1].classList.add("no-border")},render:function(){var e=this;c.prototype.render.call(this);var t=v.getApplicationSettings().get("newsSentiment:stockTicker");this.$el.append(this.mainTemplate({stocks:this.newsSentiment.models})),this.$el.find(".content-block").html(this.contentTemplate({stocks:this.newsSentiment.models})),this.getBuySell(this.newsSentiment.models),this.destroyLoadingView();var i=this.newsSentiment.models.map(function(e){return e});return g.render(p.createElement(y,{options:[].concat(a(i)),placeholder:__("search.all.instruments"),onChange:function(t){return e.renderFilteredData(t)},transformOptionText:function(e){return e.get("description")},transformOptionValue:function(e){return e.get("symbol")}}),document.getElementById("searchableDropdown")),t&&(this.createLoadingView(),d.loadNewsSentimentByTicker(t).then(function(i){if(i.data.error)return Promise.reject();var n=e.$el.find("[rel="+t);n.parent().addClass("hidden"),e.openInstrumentRow(i.data,t,n)})),__eventos("tradingTools:newsSentiment:impression",{page:"main"}),this.updateContentHeight(),this},renderFilteredData:function(e){var t=o.isArray(e)&&e.length>0?e:this.newsSentiment.models;this.unMountBuySell(),this.$el.find(".content-block").html(this.contentTemplate({stocks:t})),this.getBuySell(t)},openTour:function(){_(this.$el)},updateContentHeight:function(){var e=230;s(".ribbon-notification").length>0&&s(".ribbon-notification")[0].clientHeight&&(e+=s(".ribbon-notification")[0].clientHeight);var t=document.documentElement.clientHeight-e,i=document.documentElement.clientHeight-e-122;this.$el.find(".content-block").css("height",t+"px"),this.$el.find(".articles").css("height",i+"px")},getBuySell:function(e){var t=this.$el.find(".instrument-sell-change tr"),i=this.$el.find(".instrument-buy-change tr");o.each(e,function(e,n){var s=p.createElement(f,{type:"Sell",column:{name:"Sell",key:"bid",direction:"bidDirection"},model:e.get("instrument"),isSelected:!0,onClick:o.noop}),a=p.createElement(f,{type:"Buy",column:{name:"Buy",key:"ask",direction:"askDirection"},model:e.get("instrument"),isSelected:!1,onClick:o.noop});g.render(s,t[n]),g.render(a,i[n])})},unMountBuySell:function(){var e=this;o.each(["buy","sell"],function(t){return o.each(e.$el.find(".instrument-"+t+"-change tr"),function(e){return g.unmountComponentAtNode(e)})})},createLoadingView:function(){this.loadingView=new S({parent:s(".main-box"),position:"absolute"})},destroyLoadingView:function(){this.loadingView&&(this.loadingView.destroy(),this.loadingView=null)}});n.exports=x}.call(t,i,t,e))&&(e.exports=o)}).call(t,i(0),i(5))},2748:function(e,t,i){(function(n,s){var a;void 0!==(a=function(e,t,n){var a=i(0),o=i(187);n.exports=function(e){e.find(".content-block")[0].scrollTop=0,e.addClass("tour-opened");var t=e.find(".stock-data:not(.hidden)"),i=1==t.length?a.indexOf(t[0].parentNode.children,t[0])-1:-1;-1==i&&(s(e.find(".stock-data")[0]).find(".view-report")[0].click(),i=0);var n=s(e.find(".stock-data")[i]),r=function(){e.removeClass("tour-opened")},c=setInterval(function(){if(n.find(".news-score").length>0){var e=[{element:n.find(".news-score")[0],intro:__("news.sentiment.text.slide_2_text"),position:"right"},{element:n.find(".keywords")[0],intro:__("news.sentiment.text.slide_3_text"),position:"right"},{element:n.find(".media-buzz")[0],intro:__("news.sentiment.text.slide_4_text"),position:"right"},{element:n.find(".media-analysis")[0],intro:__("news.sentiment.text.slide_5_text"),position:"right"}];n.find(".last-seven-days").length>0&&e.unshift({element:n.find(".last-seven-days")[0],intro:__("news.sentiment.text.slide_1_text"),position:"right"}),o.introJs().setOptions({nextLabel:__("tipranks.text.slide_next"),prevLabel:__("tipranks.text.slide_prev"),doneLabel:__("actions.done"),skipLabel:" ",steps:e,scrollToElement:!0}).oncomplete(r).onexit(r).start(),clearInterval(c)}},500)}}.call(t,i,t,e))&&(e.exports=a)}).call(t,i(0),i(5))},2749:function(e,t){e.exports='<div class="popup-item-wrapper"><div class="hidden-xs news-sentiment-top"><div class="header-actions fn-close-popup btn"><i class="icon-close-blue"></i></div></div><div class="news-sentiment"><div class="header-block overflow-unset"><a class="btn btn-back hidden"><%=__(\'actions.back\')%></a><div class="news-sentiment-header"><h3><%=__(\'news.sentiment.header\')%></h3><span><%=__(\'news.sentiment.description\')%></span></div><div class="filters"><div class="take-tour"><%=__(\'tipranks.text.take_tour\')%></div><div id="searchableDropdown"></div></div></div><div class="content-block"></div><div class="risk-warning"><%=__(\'tipranks.text.disclaimer\')%></div></div></div>'},2750:function(e,t){e.exports='<%if(!_.isEmpty(stocks)) {%> <div class="news-sentiment-head"><div class="column-stock-name"><%=__(\'tipranks.text.share\')%></div><div class="column-price"><%=__(\'price\')%></div><div class="column-change"><%=__(\'tipranks.text.change\')%></div><div class="column-sentiment"><%=__(\'news.sentiment.last.seven.days\')%></div><div class="column-media-buzz"><%=__(\'news.sentiment.media.buzz\')%></div><div class="column-score"><%=__(\'news.sentiment.news.score\')%></div><div class="column-actions"><%=__(\'tipranks.text.trade\')%></div></div> <%}%> <%\n_.each(stocks, function(stock){\n%> <div class="stock-data" data-ticker="<%=stock.getStockTicker()%>"><div class="first-row"><div class="stock-name"><div class="stock-image instrument-img-<%= stock.getSymbol().toLowerCase()%>"></div><div class="stock-description"><%= stock.getDescription()%> <span>(<%= stock.getStockTicker()%>)</span></div></div><div class="stock-price"><span><%=stock.getStockPrice()%></span></div><div class="stock-change <%if(stock.getStockDailyChangeAmount() >= 0){%>up<% } else {%>down<%}%>"><span><%=stock.getStockDailyChangeAmount()%> (<%=stock.getStockDailyChangePercent()%>%)</span></div><div class="stock-sentiment"> <% if(stock.isExistsSentimentData()) {%> <span class="bullish"><%=stock.getBullishPercentage()%>% <%=__(\'tipranks.bullish\')%></span><span class="bearish"><%=stock.getBearishPercentage()%>% <%=__(\'tipranks.bearish\')%></span> <%}%> </div><div class="stock-media-buzz"><span><%=stock.getNumberOfArticles()%> <%=__(\'news.sentiment.articles\')%></span></div><div class="stock-score <%=stock.getNewsScoreDir()%>"><span><%=__(\'tipranks.\' + stock.getNewsScore().toLowerCase())%></span></div><div class="stock-actions"><div class="stock-detailed-report"><a class="view-report" rel="<%=stock.getStockTicker()%>"><span class="icon-report"></span> <span><%=__(\'tipranks.full.report\')%></span></a></div><div class="stock-buy-sell"><div class="instrument-sell-change"><table><tr></tr></table></div><div class="instrument-buy-change"><table><tr></tr></table></div></div></div></div><div class="news-sentiment-data hidden"></div></div> <% });%>'},2751:function(e,t){e.exports='<div> <% if(itemMainData.isExistsSentimentData()) {%> <div class="block last-seven-days"><div class="block-title"><%=__(\'news.sentiment.last.seven.days\')%></div><div class="block-content"><div class="sentiment-chart"><div class="icon icon-bearish"></div><div class="icon-sentiment-bar"><div class="icon icon-sentiment-arrow" style="left: <%=(item.getPositiveStockSentiment() - 2)%>%"><span><%=ticker%></span></div><div class="icon icon-sentiment-sector-avg" style="left: <%=(item.getPositiveSectorSentiment() - 1)%>%"><span><%=__(\'news.sentiment.sector.average\')%></span></div></div><div class="icon icon-bullish"></div></div><div class="sentiment-data"><div><div><%=ticker%></div><span class="bullish"><%=item.getPositiveStockSentiment()%>% <%=__(\'tipranks.bullish\')%></span><span class="bearish"><%=item.getNegativeStockSentiment()%>% <%=__(\'tipranks.bearish\')%></span></div><div><div><%=__(\'news.sentiment.sector.average\')%></div><span class="bullish"><%=item.getPositiveSectorSentiment()%>% <%=__(\'tipranks.bullish\')%></span><span class="bearish"><%=item.getNegativeSectorSentiment()%>% <%=__(\'tipranks.bearish\')%></span></div></div></div></div> <%}%> <div class="middle"><div class="block news-score"><div class="block-title"><%=__(\'news.sentiment.news.score\')%></div><div class="block-content"><div class="score <%=item.getNewsScoreDir()%>"> <%=__(\'tipranks.\' + item.getNewsScore().toLowerCase())%> </div><div class="icon-sentiment icon-<%=item.getNewsScoreDir()%>-sentiment"><div class="icon icon-bearish"></div><div class="icon icon-bullish"></div></div></div></div><div class="block keywords"><div class="block-title"><%=__(\'news.sentiment.keywords\')%></div><div class="block-content"><%=item.getKeywords()%></div></div><div class="block media-buzz"><div class="block-title"><%=__(\'news.sentiment.media.buzz\')%></div><div class="block-content"><div><div class="buzz-title"><%=ticker%> <%=__(\'news.sentiment.this.week\')%></div><div><i class="icon icon-articles"></i><span><%=item.getNumberArticlesWeek()%> <%=__(\'news.sentiment.articles\')%></span></div></div><div><div class="buzz-title"><%=ticker%> <%=__(\'news.sentiment.weekly.average\')%></div><div><i class="icon icon-articles"></i><span><%=item.getNumberArticlesAvg()%> <%=__(\'news.sentiment.articles\')%></span></div></div></div></div></div><div class="block media-analysis"><div class="block-title"><%=__(\'news.sentiment.media.analysis\')%></div><div class="block-content"><div class="legend"><span class="price"><%=__(\'price\')%></span><span class="neutral"><%=__(\'tipranks.neutral\')%></span><span class="bullish"><%=__(\'news.sentiment.bullish.news\')%></span><span class="bearish"><%=__(\'news.sentiment.bearish.news\')%></span></div><div class="analysis-graph"></div></div></div></div><div><div class="block articles <%=ticker.toLowerCase()%>"><div class="block-title"><%=__(\'news.sentiment.bullish.vs.bearish\')%></div><div class="block-content"><div class="filter"></div> <%_.each(item.getArticles(), function(article) {%> <div class="article <%=article.direction%>"><div class="article-data"><span><%=articleDate(article.releaseTime)%></span><span><%=article.source%></span><span><i class="icon icon-<%=article.direction%>"></i></span></div><div class="article-title"><a href="<%=article.linkToArticle%>" target="_blank"><%= article.title%></a></div></div> <%})%> </div></div></div>'},2752:function(e,t,i){(function(n,s){var a;void 0!==(a=function(e,t,n){var a=i(2),o=i(0),r=i(45),c=i(6),l=i(14),d=i(54),v=i(2655),m=i(1),u=i(16),h=i(120),p=i(30),g=i(2656),f=i(185),k=i(79),b=i(24),w=i(68),_=o.template(i(2753)),S=o.template(i(2754)),y=o.template(i(2755)),C=b.extend({subscribedInstruments:[],initialize:function(e){b.prototype.initialize.apply(this,arguments),this.addChildView(".news-sentiment-mobile-wrapper",p,{parent:s(".main-box"),position:"absolute"}),this.getNewsSentiment(),this.listenTo(a,"ui:instrument:change",this.close)},events:function(){return o.extend({},o.result(b.prototype,"events"),{"click .stock-main":"viewDetails","change [name=stocks]":"filterStocks","click .btn-back":"closeDetails","click .show-more":"showMore"})},getOptions:function(e){return o.extend({},o.result(b.prototype,"getOptions"),{isHeaderShowed:!0,caption:__("tab.news.sentiment"),previousCaption:__("actions.back"),headerStyle:"wizard",bodyStyle:"trading-tools",headerCaptionStyle:"news-sentiment-mobile-header"},e)},getNewsSentiment:function(){var e=this;return c.loadNewsSentiment().then(function(t){return t.data.error?(e.newsSentiment=[],e.render(),Promise.reject()):(e.newsSentiment=e.createCollection(t.data),e.render(),e.removeChildView(".news-sentiment-mobile-wrapper"),Promise.resolve())})},createCollection:function(e){var t=new r,i=[];return o.each(e,function(e){var n=new v(e);o.isUndefined(l.getInstrumentBySymbol(n.getSymbol()))||(n.set("instrument",l.getInstrumentBySymbol(n.getSymbol())),i.push(n.getSymbol()),t.add(n))}),this.subscribedInstruments=d.update(i,this.subscribedInstruments).addedSymbols,t},viewDetails:function(e){var t=this,i=s(e.currentTarget),n=i.find(".stock-expand span"),a=s(i.closest(".stock-data")).find(".news-sentiment-data");if("+"===n.html()){if(n.html("-"),a.find(".score").length>0)return void a.removeClass("hidden");var o=s(e.currentTarget).attr("data-ticker");if(!o)return;return this.createLoadingView(),c.loadNewsSentimentByTicker(o).then(function(e){if(e.data.error)return Promise.reject();t.openInstrumentRow(e.data,o,a),a.removeClass("hidden")})}a.addClass("hidden"),n.html("+")},openInstrumentRow:function(e,t,i){var n=new v(e),s=o.find(this.newsSentiment.models,function(e){return e.getStockTicker()===t});i.html(y({item:n,itemMainData:s,ticker:t,articleDate:w.newsSentimentArticleDate.bind(w)})).removeClass("hidden");var a={all:"news.sentiment.all.news",positive:"tipranks.bullish",negative:"tipranks.bearish"};this.filterNewsDropdown=this.addChildView(".articles."+t.toLowerCase()+" .filter",f,{template:k.selectBox,disable:!1,translationKey:"",options:["all","positive","negative"],transformOptionsValue:function(e){return e},transformOptionText:function(e){return __(a[e])},title:"",name:"news-filter"}),this.filterNewsDropdown.value("all"),this.listenTo(this.filterNewsDropdown,"change",this.filterNews);var r=window.innerWidth||document.body.clientWidth;g(i.find(".analysis-graph")[0],n,r-50),this.destroyLoadingView(),__eventos("tradingTools:newsSentiment:impression",{page:"details",instrumentName:s.getSymbol()})},close:function(){d.remove(this.subscribedInstruments),this.unMountBuySell(),b.prototype.close.call(this),this.destroy()},filterStocks:function(e){var t=this.$el.find("select[name=stocks] option:checked"),i=[],n=[];t.length>0&&(i=o.map(t,function(e){return s(e).val()})),n=o.filter(this.newsSentiment.models,function(e){return o.find(i,function(t){return t===e.getSymbol()})}),this.renderFilteredData(n)},filterNews:function(e){var t=s(e.el).closest(".articles"),i=s(e.el).find("select").val();s(t).find(".article").removeClass("hidden no-border"),"all"!==i&&s(t).find(".article:not(."+i+")").addClass("hidden");var n=s(t).find(".article:not(.hidden)"),a=n.length;a>5?(o.each(o.range(5,a),function(e){return s(n[e]).addClass("hidden")}),s(t).find(".show-more").removeClass("hidden")):s(t).find(".show-more").addClass("hidden"),n.length>=1&&n[n.length-1].classList.add("no-border")},render:function(){b.prototype.render.call(this);var e=o.isArray(this.newsSentiment.models)&&this.newsSentiment.models.length>0?this.newsSentiment.models:[];return this.setContent(_({stocks:e})),this.$el.find(".content-block").html(S({stocks:e})),this.getBuySell(e),__eventos("tradingTools:newsSentiment:impression",{page:"main"}),this},renderFilteredData:function(e){var t=o.isArray(e)&&e.length>0?e:this.newsSentiment.models;this.unMountBuySell(),this.$el.find(".content-block").html(S({stocks:t})),this.getBuySell(t)},getBuySell:function(e){var t=this.$el.find(".instrument-sell-change tr"),i=this.$el.find(".instrument-buy-change tr");o.each(e,function(e,n){var s=m.createElement(h,{type:"Sell",column:{name:"Sell",key:"bid",direction:"bidDirection"},model:e.get("instrument"),isSelected:!0,onClick:o.noop}),a=m.createElement(h,{type:"Buy",column:{name:"Buy",key:"ask",direction:"askDirection"},model:e.get("instrument"),isSelected:!1,onClick:o.noop});u.render(s,t[n]),u.render(a,i[n])})},unMountBuySell:function(){var e=this;o.each(["buy","sell"],function(t){return o.each(e.$el.find(".instrument-"+t+"-change tr"),function(e){return u.unmountComponentAtNode(e)})})},showMore:function(e){var t=s(e.currentTarget.closest(".articles")),i=t.find("select").val(),n=t.find(".article.hidden");o.includes(["positive","negative"],i)&&(n=t.find(".article."+i+".hidden"));var a=5>n.length?n.length:5;o.each(o.range(0,a),function(e){return s(n[e]).removeClass("hidden")}),n.length<5&&s(e.currentTarget).addClass("hidden")},createLoadingView:function(){this.loadingView=new p({parent:s(".main-box"),position:"absolute"})},destroyLoadingView:function(){this.loadingView&&(this.loadingView.destroy(),this.loadingView=null)}});n.exports=C}.call(t,i,t,e))&&(e.exports=a)}).call(t,i(0),i(5))},2753:function(e,t){e.exports='<div class="news-sentiment-mobile-wrapper"><div class="news-sentiment news-sentiment-mobile"> <%if(stocks.length > 0) {%> <div class="filters"><div class="styled-select"><select name="stocks" multiple="multiple" size="4"><option disabled="disabled" selected="selected" class="hidden"><%=__(\'wizard.form.label.DEFAULT_EMPTY\')%></option> <%_.each(stocks, function(stock){ %> <option value="<%=stock.getSymbol()%>"><%=stock.getDescription()%></option> <% }); %> </select></div></div> <%} else {%> <div class="news-sentiment-empty"><div class="icon-news-sentiment"></div><div><%= __(\'tipranks.na\')%></div></div> <%}%> <div class="content-block"></div></div></div>'},2754:function(e,t){e.exports='<%\n_.each(stocks, function(stock){\n%> <div class="stock-data"><div class="first-row"><div class="stock-main" data-ticker="<%=stock.getStockTicker()%>"><div class="stock-expand"><span>+</span></div><div class="stock-name"><div class="stock-image instrument-img-<%= stock.getSymbol().toLowerCase()%>"></div><div class="stock-data-mobile"><div class="stock-description"><%= stock.getDescription()%> (<%= stock.getStockTicker()%>)</div><div class="stock-price"><span><%=__(\'price\')%>: <%=stock.getStockPrice()%></span></div></div></div></div><div class="stock-change"><span class="<%if(stock.getStockDailyChangeAmount() >= 0){%>up<% } else {%>down<%}%>"> <%=stock.getStockDailyChangeAmount()%> (<%=stock.getStockDailyChangePercent()%>%)</span></div><div class="stock-buy-sell"><div class="instrument-sell-change"><table><tr></tr></table></div><div class="instrument-buy-change"><table><tr></tr></table></div></div></div><div class="second-row"><div> <% if(stock.isExistsSentimentData()) {%> <div class="stock-sentiment"><div class="prop-title"><%=__(\'news.sentiment.last.seven.days\')%></div><div><span class="bullish"><%=stock.getBullishPercentage()%>% <%=__(\'tipranks.bullish\')%></span><span class="bearish"><%=stock.getBearishPercentage()%>% <%=__(\'tipranks.bearish\')%></span></div></div> <%}%> <div class="stock-media-buzz"><div class="prop-title"><%=__(\'news.sentiment.media.buzz\')%></div><div><span><i class="icon icon-articles"></i><%=stock.getNumberOfArticles()%> <%=__(\'news.sentiment.articles\')%></span></div></div><div class="stock-score"><div class="prop-title"><%=__(\'news.sentiment.news.score\')%></div><div><span class="<%=stock.getNewsScoreDir()%>"><%=__(\'tipranks.\' + stock.getNewsScore().toLowerCase())%></span></div></div></div></div><div class="news-sentiment-data hidden"></div></div> <% });%>'},2755:function(e,t){e.exports='<div> <% if(itemMainData.isExistsSentimentData()) {%> <div class="block last-seven-days"><div class="block-title"><%=__(\'news.sentiment.last.seven.days\')%></div><div class="block-content"><div class="sentiment-chart"><div class="icon icon-bearish"></div><div class="icon-sentiment-bar"><div class="icon icon-sentiment-arrow" style="left: <%=(item.getPositiveStockSentiment() - 2)%>%"><span><%=ticker%></span></div><div class="icon icon-sentiment-sector-avg" style="left: <%=(item.getPositiveSectorSentiment() - 1)%>%"><span><%=__(\'news.sentiment.sector.average\')%></span></div></div><div class="icon icon-bullish"></div></div><div class="sentiment-data"><div><div><%=ticker%></div><span class="bullish"><%=item.getPositiveStockSentiment()%>% <%=__(\'tipranks.bullish\')%></span><span class="bearish"><%=item.getNegativeStockSentiment()%>% <%=__(\'tipranks.bearish\')%></span></div><div><div><%=__(\'news.sentiment.sector.average\')%></div><span class="bullish"><%=item.getPositiveSectorSentiment()%>% <%=__(\'tipranks.bullish\')%></span><span class="bearish"><%=item.getNegativeSectorSentiment()%>% <%=__(\'tipranks.bearish\')%></span></div></div></div></div> <%}%> <div class="middle"><div class="block news-score"><div class="block-title"><%=__(\'news.sentiment.news.score\')%></div><div class="block-content"><div class="score <%=item.getNewsScoreDir()%>"> <%=__(\'tipranks.\' + item.getNewsScore().toLowerCase())%> </div><div class="icon-sentiment icon-<%=item.getNewsScoreDir()%>-sentiment"><div class="icon icon-bearish"></div><div class="icon icon-bullish"></div></div></div></div><div class="block media-buzz"><div class="block-title"><%=__(\'news.sentiment.media.buzz\')%></div><div class="block-content"><div><div class="buzz-title"><%=ticker%> <%=__(\'news.sentiment.this.week\')%></div><div><i class="icon icon-articles"></i><span><%=item.getNumberArticlesWeek()%> <%=__(\'news.sentiment.articles\')%></span></div></div><div><div class="buzz-title"><%=ticker%> <%=__(\'news.sentiment.weekly.average\')%></div><div><i class="icon icon-articles"></i><span><%=item.getNumberArticlesAvg()%> <%=__(\'news.sentiment.articles\')%></span></div></div></div></div></div><div class="block keywords"><div class="block-title"><%=__(\'news.sentiment.keywords\')%></div><div class="block-content"><%=item.getKeywords()%></div></div><div class="block media-analysis"><div class="block-title"><%=__(\'news.sentiment.media.analysis\')%></div><div class="block-content"><div class="legend"><span class="price"><%=__(\'price\')%></span><span class="neutral"><%=__(\'tipranks.neutral\')%></span><span class="bullish"><%=__(\'news.sentiment.bullish.news\')%></span><span class="bearish"><%=__(\'news.sentiment.bearish.news\')%></span></div><div class="analysis-graph"></div></div></div><div class="block articles <%=ticker.toLowerCase()%>"><div class="block-title"><%=__(\'news.sentiment.bullish.vs.bearish\')%></div><div class="block-content"><div class="filter"></div> <%_.each(item.getArticles(), function(article, index) {%> <div class="article <%=article.direction%> <%if (index >= 5){%>hidden<%}%>"><div class="article-data"><span><%=articleDate(article.releaseTime)%></span><span><%=article.source%></span><span><i class="icon icon-<%=article.direction%>"></i></span></div><div class="article-title"><a href="<%=article.linkToArticle%>" target="_blank"><%= article.title%></a></div></div> <%})%> <div class="show-more"><span><%=__(\'actions.showmore\')%></span></div></div></div></div>'}});