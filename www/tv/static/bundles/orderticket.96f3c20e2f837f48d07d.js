webpackJsonp([8],{1357:function(t,e){},1358:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 508.52 508.52" enable-background="new 0 0 508.52 508.52"><path d="M254.26 0c-140.415 0-254.26 113.845-254.26 254.26s113.845 254.26 254.26 254.26 254.26-113.845 254.26-254.26-113.845-254.26-254.26-254.26zm0 412.664c-17.544 0-31.782-14.239-31.782-31.782 0-17.576 14.239-31.782 31.782-31.782s31.782 14.207 31.782 31.782c0 17.543-14.238 31.782-31.782 31.782zm31.782-126.622c0 17.544-14.239 31.782-31.782 31.782s-31.782-14.239-31.782-31.782v-158.912c0-17.544 14.239-31.782 31.782-31.782s31.782 14.239 31.782 31.782v158.912z"/></svg>'},1359:function(t,e,n){(function(t,r,o){var i;(function(s){function u(t){return t&&t.Object===Object?t:null}function c(t){var e,n=t.length,r=Array(n);for(e=0;e<n;e++)r[e]=t[e];return r}function a(t){return function(){try{return t.apply(this,arguments)}catch(t){return Co.e=t,Co}}}function l(t){throw t}function h(t,e){var n,r,o;if(at&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ft)){for(n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack),o=n.join("\n"+ft+"\n"),t.stack=p(o)}}function p(t){var e,n,r,o=t.split("\n"),i=[];for(e=0,n=o.length;e<n;e++)r=o[e],f(r)||d(r)||!r||i.push(r);return i.join("\n")}function f(t){var e,n,r=v(t);return!!r&&(e=r[0],n=r[1],e===pt&&n>=ht&&n<=ro)}function d(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function b(){var t,e,n;if(at)try{throw Error()}catch(r){if(t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],!(n=v(e)))return;return pt=n[0],n[1]}}function v(t){var e,n,r=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);return r?[r[1],+r[2]]:(e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t))?[e[1],+e[2]]:(n=/.*@(.+):(\d+)$/.exec(t),n?[n[1],+n[2]]:s)}function m(t,e,n,r,o,i){var u,c,a,l,h,p,f,d,b=te(t),v=b.length;if(v!==te(e).length&&!r)return!1;for(u=v;u--;)if(c=b[u],!(r?c in e:Jt.call(e,c)))return!1;for(a=r;++u<v;){if(c=b[u],l=t[c],h=e[c],!(p===s?n(l,h,r,o,i):p))return!1;a||(a="constructor"===c)}return!(!a&&(f=t.constructor,d=e.constructor,f!==d&&"constructor"in t&&"constructor"in e&&!("function"==typeof f&&f instanceof f&&"function"==typeof d&&d instanceof d)))}function y(t,e,n){switch(n){case $t:case Dt:return+t==+e;case Tt:return t.name===e.name&&t.message===e.message;case At:return t!==+t?e!==+e:t===+e;case Rt:case It:return t===e+""}return!1}function _(t){return!!t&&"object"==typeof t}function g(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Xt}function w(t){return _(t)&&g(t.length)&&!!Qt[Zt.call(t)]}function E(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function C(t,e,n,r,o,i){var u,c,a,l=-1,h=t.length,p=e.length;if(h!==p&&!(r&&p>h))return!1;for(;++l<h;){if(u=t[l],c=e[l],a!==s){if(a)continue;return!1}if(r){if(!E(e,function(t){return u===t||n(u,t,r,o,i)}))return!1}else if(u!==c&&!n(u,c,r,o,i))return!1}return!0}function k(t,e,n,r,o,i){var s,u,c,a,l,h,p,f=re(t),d=re(e),b=St,v=St;if(f||(b=Zt.call(t),b===Ot?b=Lt:b!==Lt&&(f=w(t))),d||(v=Zt.call(e))===Ot&&(v=Lt),s=b===Lt&&!ne(t),
u=v===Lt&&!ne(e),c=b===v,c&&!f&&!s)return y(t,e,b);if(!r&&(a=s&&Jt.call(t,"__wrapped__"),l=u&&Jt.call(e,"__wrapped__"),a||l))return n(a?t.value():t,l?e.value():e,r,o,i);if(!c)return!1;for(o||(o=[]),i||(i=[]),h=o.length;h--;)if(o[h]===t)return i[h]===e;return o.push(t),i.push(e),p=(f?C:m)(t,e,n,r,o,i),o.pop(),i.pop(),p}function x(t,e,n,r,o){return t===e||(null==t||null==e||!ee(t)&&!_(e)?t!==t&&e!==e:k(t,e,x,n,r,o))}function O(t,e){var n,r=Array(t);for(n=0;n<t;n++)r[n]=e();return r}function S(t,e){this.id=t,this.value=e}function $(t){this._s=t,this.isDisposed=!1}function D(t){this._s=t}function T(t){this._s=t,this._l=t.length,this._i=0}function P(t){this._a=t}function j(t){this._a=t,this._l=N(t),this._i=0}function A(t){return"number"==typeof t&&po.isFinite(t)}function L(t){var e,n=t[gt];if(!n&&"string"==typeof t)return e=new D(t),e[gt]();if(!n&&t.length!==s)return e=new P(t),e[gt]();if(!n)throw new TypeError("Object is not iterable");return t[gt]()}function R(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}function N(t){var e=+t.length;return isNaN(e)?0:0!==e&&A(e)?(e=R(e)*Math.floor(Math.abs(e)),e<=0?0:e>fn?fn:e):e}function I(t,e){return Ee(t)||(t=Oe),new bn(e,t)}function q(t,e){this.observer=t,this.parent=e}function M(){return!1}function F(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function M(){return!1}function F(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function M(){return!1}function V(){return[]}function M(){return!1}function V(){return[]}function F(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function U(t){return function(e){return t.subscribe(e)}}function Y(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function Y(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function B(t,e){return function(n){var r,o,i=n;for(r=0;r<e;r++){if(o=i[t[r]],s===o)return s;i=o}return i}}function W(t,e,n,r){var o=new Xr;return r.push(z(o,e,n)),t.apply(e,r),o.asObservable()}function z(t,e,n){return function(){var r,o=arguments.length,i=Array(o);for(r=0;r<o;r++)i[r]=arguments[r];if(Eo(n)){if((i=ko(n).apply(e,i))===Co)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function H(t,e,n,r){var o=new Xr;return r.push(K(o,e,n)),t.apply(e,r),o.asObservable()}function K(t,e,n){return function(){var r,o,i,s=arguments[0];if(s)return t.onError(s);for(r=arguments.length,o=[],i=1;i<r;i++)o[i-1]=arguments[i];if(Eo(n)){if((o=ko(n).apply(e,o))===Co)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function Q(t){return po.StaticNodeList?t instanceof po.StaticNodeList||t instanceof po.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function G(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function J(t,e,n){var r,o,i=new ue,s=Object.prototype.toString.call(t);if(Q(t)||"[object HTMLCollection]"===s)for(r=0,
o=t.length;r<o;r++)i.add(J(t.item(r),e,n));else t&&i.add(new G(t,e,n));return i}function Z(t,e){return new Lr(t,e)}function X(t,e,n){return new Qr(function(r){var o=t,i=we(e);return n.scheduleRecursiveFuture(0,o,function(t,e){if(i>0){var s=n.now();o=new Date(o.getTime()+i),o.getTime()<=s&&(o=new Date(s+i))}r.onNext(t),e(t+1,new Date(o))})})}function tt(t,e,n){return t===e?new Qr(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):cn(function(){return X(new Date(n.now()+t),e,n)})}function et(t,e,n){return new Qr(function(r){var o,i=!1,s=new ve,u=null,c=[],a=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,l;"E"===t.value.kind?(c=[],c.push(t),u=t.value.error,l=!a):(c.push({value:t.value,timestamp:t.timestamp+e}),l=!i,i=!0),l&&(null!==u?r.onError(u):(o=new be,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var o,s,l,h;if(null===u){a=!0;do{l=null,c.length>0&&c[0].timestamp-n.now()<=0&&(l=c.shift().value),null!==l&&l.accept(r)}while(null!==l);h=!1,s=0,c.length>0?(h=!0,s=Math.max(0,c[0].timestamp-n.now())):i=!1,o=u,a=!1,null!==o?r.onError(o):h&&e(null,s)}}))))}),new me(o,s)},t)}function nt(t,e,n){return cn(function(){return et(t,e-n.now(),n)})}function rt(t,e,n){var r,o;return Eo(e)?o=e:(r=e,o=n),new Qr(function(e){function n(){c.setDisposable(t.subscribe(function(t){var n,r=ko(o)(t);if(r===Co)return e.onError(r.e);n=new be,s.add(n),n.setDisposable(r.subscribe(function(){e.onNext(t),s.remove(n),i()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(n),i()}))},function(t){e.onError(t)},function(){u=!0,c.dispose(),i()}))}function i(){u&&0===s.length&&e.onCompleted()}var s=new ue,u=!1,c=new ve;return r?c.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new me(c,s)},t)}function ot(t,e){return new Qr(function(n){var r,o=!1,i=new ve,s=0,u=t.subscribe(function(t){var u,c,a=ko(e)(t);if(a===Co)return n.onError(a.e);wo(a)&&(a=Tr(a)),o=!0,r=t,s++,u=s,c=new be,i.setDisposable(c),c.setDisposable(a.subscribe(function(){o&&s===u&&n.onNext(r),o=!1,c.dispose()},function(t){n.onError(t)},function(){o&&s===u&&n.onNext(r),o=!1,c.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new me(u,i)},t)}function it(t,e,n,r){return Eo(e)&&(r=n,n=e,e=_n()),Ke.isObservable(r)||(r=xn(new Yr)),new Qr(function(o){function i(t){function e(){return c=n===u}var n=u,i=new be;l.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&a.setDisposable(r.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&a.setDisposable(r.subscribe(o))}))}function s(){var t=!c;return t&&u++,t}var u,c,a=new ve,l=new ve,h=new be;return a.setDisposable(h),u=0,c=!1,i(e),h.setDisposable(t.subscribe(function(t){if(s()){o.onNext(t);var e=ko(n)(t);if(e===Co)return o.onError(e.e);i(wo(e)?Tr(e):e)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new me(a,l)},t)}function st(t,e,n,r){return Ee(n)&&(r=n,n=xn(new Yr)),n instanceof Error&&(n=xn(n)),Ee(r)||(r=Ae),
Ke.isObservable(n)||(n=xn(new Yr)),new Qr(function(o){function i(){var t=s;l.setDisposable(r.scheduleFuture(null,e,function(){(a=s===t)&&(wo(n)&&(n=Tr(n)),c.setDisposable(n.subscribe(o)))}))}var s=0,u=new be,c=new ve,a=!1,l=new ve;return c.setDisposable(u),i(),u.setDisposable(t.subscribe(function(t){a||(s++,o.onNext(t),i())},function(t){a||(s++,o.onError(t))},function(){a||(s++,o.onCompleted())})),new me(c,l)},t)}function ut(t,e,n){return new Qr(function(r){function o(t,e){if(a[e]=t,s[e]=!0,u||(u=s.every(vo))){if(i)return r.onError(i);var o=ko(n).apply(null,a);if(o===Co)return r.onError(o.e);r.onNext(o)}c&&a[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,c=!1,a=Array(2);return new me(t.subscribe(function(t){o(t,0)},function(t){a[1]?r.onError(t):i=t},function(){c=!0,a[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){c=!0,o(!0,1)}))},t)}function ct(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}var at,lt,ht,pt,ft,dt,bt,vt,mt,yt,_t,gt,wt,Et,Ct,kt,xt,Ot,St,$t,Dt,Tt,Pt,jt,At,Lt,Rt,Nt,It,qt,Mt,Ft,Vt,Ut,Yt,Bt,Wt,zt,Ht,Kt,Qt,Gt,Jt,Zt,Xt,te,ee,ne,re,oe,ie,se,ue,ce,ae,le,he,pe,fe,de,be,ve,me,ye,_e,ge,we,Ee,Ce,ke,xe,Oe,Se,$e,De,Te,Pe,je,Ae,Le,Re,Ne,Ie,qe,Me,Fe,Ve,Ue,Ye,Be,We,ze,He,Ke,Qe,Ge,Je,Ze,Xe,tn,en,nn,rn,on,sn,un,cn,an,ln,hn,pn,fn,dn,bn,vn,mn,yn,_n,gn,wn,En,Cn,kn,xn,On,Sn,$n,Dn,Tn,Pn,jn,An,Ln,Rn,Nn,In,qn,Mn,Fn,Vn,Un,Yn,Bn,Wn,zn,Hn,Kn,Qn,Gn,Jn,Zn,Xn,tr,er,nr,rr,or,ir,sr,ur,cr,ar,lr,hr,pr,fr,dr,br,vr,mr,yr,_r,gr,wr,Er,Cr,kr,xr,Or,Sr,$r,Dr,Tr,Pr,jr,Ar,Lr,Rr,Nr,Ir,qr,Mr,Fr,Vr,Ur,Yr,Br,Wr,zr,Hr,Kr,Qr,Gr,Jr,Zr,Xr,to,eo,no,ro,oo={function:!0,object:!0},io=oo[typeof e]&&e&&!e.nodeType?e:null,so=oo[typeof t]&&t&&!t.nodeType?t:null,uo=u(io&&so&&"object"==typeof r&&r),co=u(oo[typeof self]&&self),ao=u(oo[typeof window]&&window),lo=so&&so.exports===io?io:null,ho=u(oo[typeof this]&&this),po=uo||ao!==(ho&&ho.window)&&ao||co||ho||Function("return this")(),fo={internals:{},config:{Promise:po.Promise},helpers:{}},bo=fo.helpers.noop=function(){},vo=fo.helpers.identity=function(t){return t},mo=fo.helpers.defaultNow=Date.now,yo=fo.helpers.defaultComparer=function(t,e){return oe(t,e)},_o=fo.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},go=(fo.helpers.defaultKeySerializer=function(t){return""+t},fo.helpers.defaultError=function(t){throw t}),wo=fo.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},Eo=fo.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),Co={e:{}},ko=fo.internals.tryCatch=function(t){if(!Eo(t))throw new TypeError("fn must be a function");return a(t)};fo.config.longStackSupport=!1,at=!1,lt=ko(function(){throw Error()})(),at=!!lt.e&&!!lt.e.stack,ht=b(),ft="From previous event:",dt=fo.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)},
dt.prototype=Object.create(Error.prototype),dt.prototype.name="EmptyError",bt=fo.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)},bt.prototype=Object.create(Error.prototype),bt.prototype.name="ObjectDisposedError",vt=fo.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)},vt.prototype=Object.create(Error.prototype),vt.prototype.name="ArgumentOutOfRangeError",mt=fo.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)},mt.prototype=Object.create(Error.prototype),mt.prototype.name="NotSupportedError",yt=fo.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)},yt.prototype=Object.create(Error.prototype),yt.prototype.name="NotImplementedError",_t=fo.helpers.notImplemented=function(){throw new yt},fo.helpers.notSupported=function(){throw new mt},gt="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_",po.Set&&"function"==typeof(new po.Set)["@@iterator"]&&(gt="@@iterator"),wt=fo.doneEnumerator={done:!0,value:s},Et=fo.helpers.isIterable=function(t){return t&&t[gt]!==s},Ct=fo.helpers.isArrayLike=function(t){return t&&t.length!==s},fo.helpers.iterator=gt,kt=fo.internals.bindCallback=function(t,e,n){if(s===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},xt=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],xt.length,Ot="[object Arguments]",St="[object Array]",$t="[object Boolean]",Dt="[object Date]",Tt="[object Error]",Pt="[object Function]",jt="[object Map]",At="[object Number]",Lt="[object Object]",Rt="[object RegExp]",Nt="[object Set]",It="[object String]",qt="[object WeakMap]",Mt="[object ArrayBuffer]",Ft="[object Float32Array]",Vt="[object Float64Array]",Ut="[object Int8Array]",Yt="[object Int16Array]",Bt="[object Int32Array]",Wt="[object Uint8Array]",zt="[object Uint8ClampedArray]",Ht="[object Uint16Array]",Kt="[object Uint32Array]",Qt={},Qt[Ft]=Qt[Vt]=Qt[Ut]=Qt[Yt]=Qt[Bt]=Qt[Wt]=Qt[zt]=Qt[Ht]=Qt[Kt]=!0,Qt[Ot]=Qt[St]=Qt[Mt]=Qt[$t]=Qt[Dt]=Qt[Tt]=Qt[Pt]=Qt[jt]=Qt[At]=Qt[Lt]=Qt[Rt]=Qt[Nt]=Qt[It]=Qt[qt]=!1,Gt=Object.prototype,Jt=Gt.hasOwnProperty,Zt=Gt.toString,Xt=Math.pow(2,53)-1,te=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,u=[];for(i in o)t.call(o,i)&&u.push(i);if(e)for(s=0;s<r;s++)t.call(o,n[s])&&u.push(n[s]);return u}}(),ee=fo.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},ne=function(){try{Object({toString:0
}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),re=Array.isArray||function(t){return _(t)&&g(t.length)&&Zt.call(t)===St},oe=fo.internals.isEqual=function(t,e){return x(t,e)},{}.hasOwnProperty,Array.prototype.slice,ie=fo.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n},se=fo.internals.addProperties=function(t){var e,n,r,o,i,s,u;for(e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(o=0,i=e.length;o<i;o++){s=e[o];for(u in s)t[u]=s[u]}},fo.internals.addRef=function(t,e){return new Qr(function(n){return new me(e.getDisposable(),t.subscribe(n))})},ue=fo.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},ce=ue.prototype,ce.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},ce.remove=function(t){var e,n=!1;return this.isDisposed||-1!==(e=this.disposables.indexOf(t))&&(n=!0,this.disposables.splice(e,1),this.length--,t.dispose()),n},ce.dispose=function(){var t,e,n;if(!this.isDisposed){for(this.isDisposed=!0,t=this.disposables.length,e=Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}},ae=fo.Disposable=function(t){this.isDisposed=!1,this.action=t||bo},ae.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},le=ae.create=function(t){return new ae(t)},he=ae.empty={dispose:bo},pe=ae.isDisposable=function(t){return t&&Eo(t.dispose)},fe=ae.checkDisposed=function(t){if(t.isDisposed)throw new bt},de=ae._fixup=function(t){return pe(t)?t:he},be=fo.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null},be.prototype.getDisposable=function(){return this.current},be.prototype.setDisposable=function(t){if(this.current)throw Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},be.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}},ve=fo.SerialDisposable=function(){this.isDisposed=!1,this.current=null},ve.prototype.getDisposable=function(){return this.current},ve.prototype.setDisposable=function(t){var e,n=this.isDisposed;n||(e=this.current,this.current=t),e&&e.dispose(),n&&t&&t.dispose()},ve.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()},me=fo.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1},me.prototype.dispose=function(){var t,e;this.isDisposed||(this.isDisposed=!0,t=this._first,this._first=null,t&&t.dispose(),e=this._second,this._second=null,e&&e.dispose())},ye=fo.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1},ye.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0
;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}},fo.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,0===--this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?he:new t(this)},e}(),_e=fo.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||_o,this.disposable=new be},_e.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},_e.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},_e.prototype.isCancelled=function(){return this.disposable.isDisposed},_e.prototype.invokeCore=function(){return de(this.action(this.scheduler,this.state))},ge=fo.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new yt},e.scheduleFuture=function(e,n,r){var o=n;return o instanceof Date&&(o-=this.now()),o=t.normalize(o),0===o?this.schedule(e,r):this._scheduleFuture(e,o,r)},e._scheduleFuture=function(t,e,n){throw new yt},t.now=mo,t.prototype.now=mo,t.normalize=function(t){return t<0&&(t=0),t},t}(),we=ge.normalize,Ee=ge.isScheduler,function(t){function e(t,e){function n(e){function r(t,e){return s?i.remove(c):u=!0,o(e,n),he}var s=!1,u=!1,c=t.schedule(e,r);u||(i.add(c),s=!0)}var r=e[0],o=e[1],i=new ue;return o(r,n),i}function n(t,e){function n(e,r){function s(t,e){return u?i.remove(a):c=!0,o(e,n),he}var u=!1,c=!1,a=t.scheduleFuture(e,r,s);c||(i.add(a),u=!0)}var r=e[0],o=e[1],i=new ue;return o(r,n),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(ge.prototype),function(t){t.schedulePeriodic=function(t,e,n){if(s===po.setInterval)throw new mt;e=we(e);var r=t,o=po.setInterval(function(){r=n(r)},e);return le(function(){po.clearInterval(o)})}}(ge.prototype),Ce=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.schedule=function(t,e){return de(e(this,t))},e}(ge),ke=ge.immediate=new Ce,xe=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return ie(n,t),n.prototype.schedule=function(t,n){var o,i=new _e(this,t,n,this.now());return r?r.enqueue(i):(r=new Le(4),r.enqueue(i),o=ko(e)(),r=null,o===Co&&l(o.e)),i.disposable},n.prototype.scheduleRequired=function(){return!r},n}(ge),Oe=ge.currentThread=new xe,
fo.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=ko(t._action)(t._state);r===Co&&(t._cancel.dispose(),l(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new be;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),De=function(){var t,e=bo;if(po.setTimeout)t=po.setTimeout,e=po.clearTimeout;else{if(!po.WScript)throw new mt;t=function(t,e){po.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),Te=De.setTimeout,Pe=De.clearTimeout,function(){function t(e){var n,r;p?Te(function(){t(e)},0):(n=h[e])&&(p=!0,r=ko(n)(),$e(e),p=!1,r===Co&&l(r.e))}function e(){if(!po.postMessage||po.importScripts)return!1;var t=!1,e=po.onmessage;return po.onmessage=function(){t=!0},po.postMessage("","*"),po.onmessage=e,t}var n,r,i,u,c,a=1,h={},p=!1;$e=function(t){delete h[t]},n=RegExp("^"+(toString+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),r="function"==typeof(r=uo&&lo&&uo.setImmediate)&&!n.test(r)&&r,Eo(r)?Se=function(e){var n=a++;return h[n]=e,r(function(){t(n)}),n}:s!==o&&"[object process]"==={}.toString.call(o)?Se=function(e){var n=a++;return h[n]=e,o.nextTick(function(){t(n)}),n}:e()?(i="ms.rx.schedule"+Math.random(),u=function(e){"string"==typeof e.data&&e.data.substring(0,i.length)===i&&t(e.data.substring(i.length))},po.addEventListener("message",u,!1),Se=function(t){var e=a++;return h[e]=t,po.postMessage(i+e,"*"),e}):po.MessageChannel?(c=new po.MessageChannel,c.port1.onmessage=function(e){t(e.data)},Se=function(t){var e=a++;return h[e]=t,c.port2.postMessage(e),e}):Se="document"in po&&"onreadystatechange"in po.document.createElement("script")?function(e){var n=po.document.createElement("script"),r=a++;return h[r]=e,n.onreadystatechange=function(){t(r),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},po.document.documentElement.appendChild(n),r}:function(e){var n=a++;return h[n]=e,Te(function(){t(n)},0),n}}(),je=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(ae._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function o(t){this._id=t,this.isDisposed=!1}return ie(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,$e(this._id))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Pe(this._id))},e.prototype.schedule=function(t,e){var o=new be,i=Se(n(o,e,this,t));return new me(o,new r(i))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var i=new be,s=Te(n(i,r,this,t),e);return new me(i,new o(s))},e}(ge),Ae=ge.default=ge.async=new je,S.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e},Le=fo.internals.PriorityQueue=function(t){this.items=Array(t),this.length=0},Re=Le.prototype,Re.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},Re.percolate=function(t){var e,n
;t>=this.length||t<0||(e=t-1>>1)<0||e===t||this.isHigherPriority(t,e)&&(n=this.items[t],this.items[t]=this.items[e],this.items[e]=n,this.percolate(e))},Re.heapify=function(t){var e,n,r,o;+t||(t=0),t>=this.length||t<0||(e=2*t+1,n=2*t+2,r=t,e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t&&(o=this.items[t],this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)))},Re.peek=function(){return this.items[0].value},Re.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=s,this.heapify()},Re.dequeue=function(){var t=this.peek();return this.removeAt(0),t},Re.enqueue=function(t){var e=this.length++;this.items[e]=new S(Le.count++,t),this.percolate(e)},Re.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Le.count=0,Ne=fo.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new yt},t.prototype._acceptObserver=function(t,e,n){throw new yt},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Ee(t)||(t=ke),new Qr(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),Ie=function(t){function e(t){this.value=t,this.kind="N"}return ie(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(Ne),qe=function(t){function e(t){this.error=t,this.kind="E"}return ie(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(Ne),Me=function(t){function e(){this.kind="C"}return ie(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(Ne),Fe=Ne.createOnNext=function(t){return new Ie(t)},Ve=Ne.createOnError=function(t){return new qe(t)},Ue=Ne.createOnCompleted=function(){return new Me},Ye=fo.Observer=function(){},Be=Ye.create=function(t,e,n){return t||(t=bo),e||(e=go),n||(n=bo),new ze(t,e,n)},We=fo.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return ie(e,t),e.prototype.next=_t,e.prototype.error=_t,e.prototype.completed=_t,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(Ye),ze=fo.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return ie(e,t),e.prototype.next=function(t){this._onNext(t)},
e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(We),Ke=fo.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){h(e,t),r.call(n,e)},e.call(t,n)}}function e(){var e,n;fo.config.longStackSupport&&at&&(e=this._subscribe,n=ko(l)(Error()).e,this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e))}return He=e.prototype,e.isObservable=function(t){return t&&Eo(t.subscribe)},He.subscribe=He.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Be(t,e,n))},He.subscribeOnNext=function(t,e){return this._subscribe(Be(s!==e?function(n){t.call(e,n)}:t))},He.subscribeOnError=function(t,e){return this._subscribe(Be(null,s!==e?function(n){t.call(e,n)}:t))},He.subscribeOnCompleted=function(t,e){return this._subscribe(Be(null,null,s!==e?function(){t.call(e)}:t))},e}(),Qe=fo.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new ve}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function i(t,e){var n,r;return t.queue.length>0?(n=t.queue.shift(),(r=ko(n)())===Co?(t.queue=[],t.hasFaulted=!0,l(r.e)):void e(t)):void(t.isAcquired=!1)}return ie(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,i))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(We),Ge=fo.ObservableBase=function(t){function e(t){return t&&Eo(t.dispose)?t:Eo(t)?le(t):he}function n(t,n){var r=n[0],o=n[1],i=ko(o.subscribeCore).call(o,r);i!==Co||r.fail(Co.e)||l(Co.e),r.setDisposable(e(i))}function r(){t.call(this)}return ie(r,t),r.prototype._subscribe=function(t){var e=new Gr(t),r=[e,this];return Oe.scheduleRequired()?Oe.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=_t,r}(Ke),Je=fo.FlatMapObservable=function(t){function e(e,n,r,o){this.resultSelector=Eo(r)?r:null,this.selector=kt(Eo(n)?n:function(){return n},o,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},ie(n,We),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=ko(this.selector)(t,e,this.source);if(n===Co)return this.o.onError(n.e);wo(n)&&(n=Tr(n)),(Ct(n)||Et(n))&&(n=Ke.from(n)),this.o.onNext(this._wrapResult(n,t,e))},
n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Ge),Ze=fo.internals.Enumerable=function(){},$.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)},Xe=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){var n,o,i;if(!t.isDisposed){if((n=ko(t.e.next).call(t.e))===Co)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();o=n.value,wo(o)&&(o=Tr(o)),i=new be,t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r={isDisposed:!1,o:t,subscription:e,e:this.sources[gt]()},o=Oe.scheduleRecursive(r,n);return new ye([e,o,new $(r)])},ie(r,We),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Ge),Ze.prototype.concat=function(){return new Xe(this)},tn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){var n,o,i;if(!t.isDisposed){if((n=ko(t.e.next).call(t.e))===Co)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();o=n.value,wo(o)&&(o=Tr(o)),i=new be,t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r={isDisposed:!1,e:this.sources[gt](),subscription:e,lastError:null,o:t},o=Oe.scheduleRecursive(r,n);return new ye([e,o,new $(r)])},ie(r,We),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Ge),Ze.prototype.catchError=function(){return new tn(this)},en=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return ie(e,t),e.prototype[gt]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?wt:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Ze),nn=Ze.repeat=function(t,e){return new en(t,e)},rn=function(t){function e(t,e,n){this.s=t,this.fn=e?kt(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return ie(e,t),e.prototype[gt]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:wt},e}(Ze),on=Ze.of=function(t,e,n){return new rn(t,e,n)},sn=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},ie(n,We),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Ge),He.toArray=function(){return new sn(this)},Ke.create=function(t,e){return new Qr(t,e)},
un=function(t){function e(e){this._f=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=ko(this._f)();return e===Co?xn(e.e).subscribe(t):(wo(e)&&(e=Tr(e)),e.subscribe(t))},e}(Ge),cn=Ke.defer=function(t){return new un(t)},an=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),he}return ie(e,t),e.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===ke?r(null,t):this.scheduler.schedule(t,r)},e}(Ge),ln=new an(ke),hn=Ke.empty=function(t){return Ee(t)||(t=ke),t===ke?ln:new an(t)},pn=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){var i,s=ko(e.next).call(e);return s===Co?t.onError(s.e):s.done?t.onCompleted():(i=s.value,Eo(n)&&(i=ko(n)(i,r))===Co?t.onError(i.e):(t.onNext(i),void o(r+1)))}}return ie(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=L(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Ge),fn=Math.pow(2,53)-1,D.prototype[gt]=function(){return new T(this._s)},T.prototype[gt]=function(){return this},T.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:wt},P.prototype[gt]=function(){return new j(this._a)},j.prototype[gt]=function(){return this},j.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:wt},dn=Ke.from=function(t,e,n,r){if(null==t)throw Error("iterable cannot be null.");if(e&&!Eo(e))throw Error("mapFn when provided must be a function");if(e)var o=kt(e,n,2);return Ee(r)||(r=Oe),new pn(t,o,r)},bn=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,o){r<n?(t.onNext(e[r]),o(r+1)):t.onCompleted()}}return ie(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Ge),vn=Ke.fromArray=function(t,e){return Ee(e)||(e=Oe),new bn(t,e)},mn=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return he},e}(Ge),yn=new mn,_n=Ke.never=function(){return yn},Ke.of=function(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return new bn(n,Oe)},Ke.ofWithScheduler=function(t){var e,n=arguments.length,r=Array(n-1);for(e=1;e<n;e++)r[e-1]=arguments[e];return new bn(r,t)},gn=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,o){if(r<n.length){var i=n[r];t.onNext([i,e[i]]),o(r+1)}else t.onCompleted()}}return ie(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Ge),Ke.pairs=function(t,e){return e||(e=Oe),new gn(t,e)},wn=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){r<e?(n.onNext(t+r),o(r+1)):n.onCompleted()}}return ie(e,t),
e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Ge),Ke.range=function(t,e,n){return Ee(n)||(n=Oe),new wn(t,e,n)},En=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return new q(t,this).run()},e}(Ge),q.prototype.run=function(){function t(t,r){if((-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t)return e.onCompleted();r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Ke.repeat=function(t,e,n){return Ee(n)||(n=Oe),new En(t,e,n)},Cn=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),he}return ie(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===ke?n(null,e):this._scheduler.schedule(e,n)},e}(Ge),Ke.return=Ke.just=function(t,e){return Ee(e)||(e=ke),new Cn(t,e)},kn=function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0];return e[1].onError(n),he}return ie(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===ke?n(null,e):this._scheduler.schedule(e,n)},e}(Ge),xn=Ke.throw=function(t,e){return Ee(e)||(e=ke),new kn(t,e)},On=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new be,n=new ve;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Sn(t,n,this._fn))),n},e}(Ge),Sn=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e,n=ko(this._fn)(t);if(n===Co)return this._o.onError(n.e);wo(n)&&(n=Tr(n)),e=new be,this._s.setDisposable(e),e.setDisposable(n.subscribe(this._o))},e}(We),He.catch=function(t){return Eo(t)?new On(this,t):$n([this,t])},$n=Ke.catch=function(){var t,e,n;if(Array.isArray(arguments[0]))t=arguments[0];else for(e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return on(t).catchError()},He.combineLatest=function(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return Array.isArray(n[0])?n[0].unshift(this):n.unshift(this),Pn.apply(this,n)},Dn=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o=this._params.length,i=Array(o),s={hasValue:O(o,M),hasValueAll:!1,isDone:O(o,M),values:Array(o)};for(e=0;e<o;e++)n=this._params[e],r=new be,i[e]=r,wo(n)&&(n=Tr(n)),r.setDisposable(n.subscribe(new Tn(t,e,this._cb,s)));return new ye(i)},e}(Ge),Tn=function(t){function e(e,n,r,o){this._o=e,this._i=n,this._cb=r,this._state=o,t.call(this)}function n(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,
this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(vo))){var e=ko(this._cb).apply(null,this._state.values);if(e===Co)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(vo)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(vo)&&this._o.onCompleted()},e}(We),Pn=Ke.combineLatest=function(){var t,e,n=arguments.length,r=Array(n);for(t=0;t<n;t++)r[t]=arguments[t];return e=Eo(r[n-1])?r.pop():F,Array.isArray(r[0])&&(r=r[0]),new Dn(r,e)},He.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),Ln.apply(null,t)},jn=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(We),An=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){var n,r;if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();n=t.sources[t.i],wo(n)&&(n=Tr(n)),r=new be,t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new jn(t,e)))}}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r=le(bo),o={o:t,i:0,subscription:e,disposable:r,sources:this._sources},i=ke.scheduleRecursive(o,n);return new ye([e,r,i])},e}(Ge),Ln=Ke.concat=function(){var t,e,n;if(Array.isArray(arguments[0]))t=arguments[0];else for(t=Array(arguments.length),e=0,n=arguments.length;e<n;e++)t[e]=arguments[e];return new An(t)},He.concatAll=function(){return this.merge(1)},Rn=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue;return e.add(this.source.subscribe(new Nn(t,this.maxConcurrent,e))),e},e}(Ge),Nn=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return ie(e,t),e.prototype.handleSubscribe=function(t){var e=new be;this.g.add(e),wo(t)&&(t=Tr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},ie(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(We),He.merge=function(t){return"number"!=typeof t?In(this,t):new Rn(this,t)},In=Ke.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(Ee(arguments[0]))for(t=arguments[0],
e=1;e<r;e++)n.push(arguments[e]);else for(t=ke,e=0;e<r;e++)n.push(arguments[e]);else for(t=ke,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),I(t,n).mergeAll()},qn=fo.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)},qn.prototype=Object.create(Error.prototype),qn.prototype.name="CompositeError",Mn=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue,n=new be,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Fn(e,r))),e},e}(Ge),Fn=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new qn(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e=new be;this._group.add(e),wo(t)&&(t=Tr(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},ie(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(We),Ke.mergeDelayError=function(){var t,e,n,r;if(Array.isArray(arguments[0]))t=arguments[0];else for(e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=I(null,t),new Mn(r)},Vn=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue,n=new be;return e.add(n),n.setDisposable(this.source.subscribe(new Un(t,e))),e},e}(Ge),Un=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e=new be;this.g.add(e),wo(t)&&(t=Tr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},ie(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(We),He.mergeAll=function(){return new Vn(this)},Yn=function(t){function e(e,n){this._s=e,this._o=wo(n)?Tr(n):n,this._open=!1,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n=new be;return n.setDisposable(this._s.subscribe(new Bn(t,this))),wo(this._o)&&(this._o=Tr(this._o)),e=new be,
e.setDisposable(this._o.subscribe(new Wn(t,this,e))),new me(n,e)},e}(Ge),Bn=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(We),Wn=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return ie(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(We),He.skipUntil=function(t){return new Yn(this,t)},zn=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,We.call(this)}function r(t,e){this.parent=t,this.id=e,We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r=this.source.subscribe(new n(t,e));return new me(r,e)},ie(n,We),n.prototype.next=function(t){var e=new be,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),wo(t)&&(t=Tr(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},ie(r,We),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Ge),He.switch=He.switchLatest=function(){return new zn(this)},Hn=function(t){function e(e,n){this.source=e,this.other=wo(n)?Tr(n):n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return new me(this.source.subscribe(t),this.other.subscribe(new Kn(t)))},e}(Ge),Kn=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=bo,e}(We),He.takeUntil=function(t){return new Hn(this,t)},Qn=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o,i=this._ss.length,s={hasValue:O(i,M),hasValueAll:!1,values:Array(i)},u=this._ss.length,c=Array(u+1);for(e=0;e<u;e++)n=this._ss[e],r=new be,wo(n)&&(n=Tr(n)),r.setDisposable(n.subscribe(new Gn(t,e,s))),c[e]=r;return o=new be,o.setDisposable(this._s.subscribe(new Jn(t,this._cb,s))),c[u]=o,new ye(c)},e}(Ge),Gn=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(vo)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=bo,e}(We),Jn=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){
var e,n=[t].concat(this._state.values);if(this._state.hasValueAll){if((e=ko(this._cb).apply(null,n))===Co)return this._o.onError(e.e);this._o.onNext(e)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(We),He.withLatestFrom=function(){var t,e,n,r;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Eo(e[t-1])?e.pop():F,Array.isArray(e[0])&&(e=e[0]),new Qn(this,e,r)},Zn=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o=this._s.length,i=Array(o),s=O(o,M),u=O(o,V);for(e=0;e<o;e++)n=this._s[e],r=new be,i[e]=r,wo(n)&&(n=Tr(n)),r.setDisposable(n.subscribe(new Xn(t,e,this,u,s)));return new ye(i)},e}(Ge),Xn=function(t){function e(e,n,r,o,i){this._o=e,this._i=n,this._p=r,this._q=o,this._d=i,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){var e,i;if(this._q[this._i].push(t),this._q.every(n)){if(e=this._q.map(r),(i=ko(this._p._cb).apply(null,e))===Co)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter(o(this._i)).every(vo)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(vo)&&this._o.onCompleted()},e}(We),He.zip=function(){var t,e,n,r,o;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Eo(e[t-1])?e.pop():F,Array.isArray(e[0])&&(e=e[0]),o=this,e.unshift(o),new Zn(e,r)},Ke.zip=function(){var t,e,n=arguments.length,r=Array(n);for(t=0;t<n;t++)r[t]=arguments[t];return Array.isArray(r[0])&&(r=Eo(r[1])?r[0].concat(r[1]):r[0]),e=r.shift(),e.zip.apply(e,r)},tr=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n=this.sources,r=n.length,o=Array(r),i={q:O(r,V),done:O(r,M),cb:this._cb,o:t};for(e=0;e<r;e++)!function(t){var e=n[t],r=new be;(Ct(e)||Et(e))&&(e=dn(e)),o[t]=r,r.setDisposable(e.subscribe(new er(i,t)))}(e);return new ye(o)},e}(Ge),er=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=ko(this._s.cb).apply(null,e);if(i===Co)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter(o(this._i)).every(vo)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(vo)&&this._s.o.onCompleted()},e}(We),He.zipIterable=function(){var t,e,n,r,o;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Eo(e[t-1])?e.pop():F,o=this,
e.unshift(o),new tr(e,r)},He.asObservable=function(){return new Qr(U(this),this)},nr=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new rr(t))},e}(Ge),rr=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(We),He.dematerialize=function(){return new nr(this)},or=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ir(t,this.keyFn,this.comparer))},e}(Ge),ir=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e,n=t;return Eo(this.keyFn)&&(n=ko(this.keyFn)(t))===Co?this.o.onError(n.e):this.hasCurrentKey&&(e=ko(this.comparer)(this.currentKey,n))===Co?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(We),He.distinctUntilChanged=function(t,e){return e||(e=yo),new or(this,t,e)},sr=function(t){function e(e,n,r,o){this.source=e,this._oN=n,this._oE=r,this._oC=o,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||Eo(e._oN)?Be(e._oN||bo,e._oE||bo,e._oC||bo):e._oN,this.isStopped=!1,We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},ie(n,We),n.prototype.next=function(t){var e=ko(this.t.onNext).call(this.t,t);e===Co&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=ko(this.t.onError).call(this.t,t);if(e===Co)return this.o.onError(e.e);this.o.onError(t)},n.prototype.completed=function(){var t=ko(this.t.onCompleted).call(this.t);if(t===Co)return this.o.onError(t.e);this.o.onCompleted()},e}(Ge),He.do=He.tap=He.doAction=function(t,e,n){return new sr(this,t,e,n)},He.doOnNext=He.tapOnNext=function(t,e){return this.tap(s!==e?function(n){t.call(e,n)}:t)},He.doOnError=He.tapOnError=function(t,e){return this.tap(bo,s!==e?function(n){t.call(e,n)}:t)},He.doOnCompleted=He.tapOnCompleted=function(t,e){return this.tap(bo,null,s!==e?function(){t.call(e)}:t)},ur=function(t){function e(e,n,r){this.source=e,this._fn=kt(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return ie(e,t),e.prototype.subscribeCore=function(t){var e=ko(this.source.subscribe).call(this.source,t);return e===Co&&(this._fn(),l(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=ko(this._s.dispose).call(this._s);this._fn(),t===Co&&l(t.e)}},e}(Ge),He.finally=function(t,e){return new ur(this,t,e)},cr=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},
n.prototype.onNext=bo,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Ge),He.ignoreElements=function(){return new cr(this)},ar=function(t){function e(e,n){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new lr(t))},e}(Ge),lr=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext(Fe(t))},e.prototype.error=function(t){this._o.onNext(Ve(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(Ue()),this._o.onCompleted()},e}(We),He.materialize=function(){return new ar(this)},He.repeat=function(t){return nn(this,t).concat()},He.retry=function(t){return nn(this,t).catchError()},hr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return ie(n,t),n.prototype.subscribeCore=function(t){var n,r=new Zr,o=new Zr,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},a=new ve,l=Oe.scheduleRecursive(null,function(e,i){var s,l,h,p;if(!c.isDisposed){if(s=u.next(),s.done)return void(n?t.onError(n):t.onCompleted());l=s.value,wo(l)&&(l=Tr(l)),h=new be,p=new be,a.setDisposable(new me(p,h)),h.setDisposable(l.subscribe(function(e){t.onNext(e)},function(e){p.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),h.dispose()},function(){t.onCompleted()}))}});return new ye([s,a,l,e(c)])},n}(Ge),He.retryWhen=function(t){return new hr(Y(this),t)},pr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return ie(n,t),n.prototype.subscribeCore=function(t){var n,r=new Zr,o=new Zr,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},a=new ve,l=Oe.scheduleRecursive(null,function(e,i){var s,l,h,p;if(!c.isDisposed){if(s=u.next(),s.done)return void(n?t.onError(n):t.onCompleted());l=s.value,wo(l)&&(l=Tr(l)),h=new be,p=new be,a.setDisposable(new me(p,h)),h.setDisposable(l.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){p.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),h.dispose()}))}});return new ye([s,a,l,e(c)])},n}(Ge),He.repeatWhen=function(t){return new pr(Y(this),t)},fr=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new dr(t,this))},e}(Ge),dr=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,
this._hv=!1,this._i=0,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=ko(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?ko(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Co)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(We),He.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new fr(this,n,e,t)},br=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new vr(t,this._c))},e}(Ge),vr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return ie(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(We),He.skipLast=function(t){if(t<0)throw new vt;return new br(this,t)},He.startWith=function(){var t,e,n,r,o=0;for(arguments.length&&Ee(arguments[0])?(t=arguments[0],o=1):t=ke,e=[],n=o,r=arguments.length;n<r;n++)e.push(arguments[n]);return on([vn(e,t),this]).concat()},mr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return ie(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(We),He.takeLast=function(t){if(t<0)throw new vt;var e=this;return new Qr(function(n){return e.subscribe(new mr(n,t))},e)},He.flatMapConcat=He.concatMap=function(t,e,n){return new Je(this,t,e,n).merge(1)},yr=function(t){function e(e,n,r){this.source=e,this.selector=kt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,We.call(this)}return ie(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},ie(r,We),r.prototype.next=function(t){var e=ko(this.selector)(t,this.i++,this.source);if(e===Co)return this.o.onError(e.e);this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Ge),He.map=He.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof yr?this.internalMap(n,e):new yr(this,n,e)},He.pluck=function(){var t,e=arguments.length,n=Array(e);if(0===e)throw Error("List of properties cannot be empty.");for(t=0;t<e;t++)n[t]=arguments[t];return this.map(B(n,e))},He.flatMap=He.selectMany=function(t,e,n){return new Je(this,t,e,n).mergeAll()},fo.Observable.prototype.flatMapLatest=function(t,e,n){return new Je(this,t,e,n).switchLatest()},
_r=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},ie(n,We),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Ge),He.skip=function(t){if(t<0)throw new vt;return new _r(this,t)},gr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new wr(t,this))},e}(Ge),wr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(!this._r){var e=ko(this._p._fn)(t,this._i++,this._p);if(e===Co)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(We),He.skipWhile=function(t,e){var n=kt(t,e,3);return new gr(this,n)},Er=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},ie(n,We),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Ge),He.take=function(t,e){if(t<0)throw new vt;return 0===t?hn(e):new Er(this,t)},Cr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new kr(t,this))},e}(Ge),kr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(this._r&&(this._r=ko(this._p._fn)(t,this._i++,this._p),this._r===Co))return this._o.onError(this._r.e);this._r?this._o.onNext(t):this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(We),He.takeWhile=function(t,e){var n=kt(t,e,3);return new Cr(this,n)},xr=function(t){function e(e,n,r){this.source=e,this.predicate=kt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,We.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},ie(r,We),r.prototype.next=function(t){var e=ko(this.predicate)(t,this.i++,this.source);if(e===Co)return this.o.onError(e.e);e&&this.o.onNext(t)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Ge),He.filter=He.where=function(t,e){return this instanceof xr?this.internalFilter(t,e):new xr(this,t,e)},
Ke.fromCallback=function(t,e,n){return function(){var r,o,i;for(s===e&&(e=this),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return W(t,e,n,o)}},Ke.fromNodeCallback=function(t,e,n){return function(){var r,o,i;for(s===e&&(e=this),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return H(t,e,n,o)}},G.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},fo.config.useNativeEvents=!1,Or=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];if(Eo(e)&&(n=ko(e).apply(null,arguments))===Co)return t.onError(n.e);t.onNext(n)}}return ie(e,t),e.prototype.subscribeCore=function(t){return J(this._el,this._n,n(t,this._fn))},e}(Ge),Ke.fromEvent=function(t,e,n){return t.addListener?$r(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):fo.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Or(t,e,n).publish().refCount():$r(function(n){t.on(e,n)},function(n){t.off(e,n)},n)},Sr=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];if(Eo(e)&&(n=ko(e).apply(null,arguments))===Co)return t.onError(n.e);t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return ie(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),o=this._add(e);return new r(this._del,e,o)},r.prototype.dispose=function(){this.isDisposed||(Eo(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Ge),$r=Ke.fromEventPattern=function(t,e,n){return new Sr(t,e,n).publish().refCount()},Dr=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new be,o=this;return this._p.then(function(r){e.setDisposable(o._s.schedule([t,r],n))},function(n){e.setDisposable(o._s.schedule([t,n],r))}),e},e}(Ge),Tr=Ke.fromPromise=function(t,e){return e||(e=Ae),new Dr(t,e)},He.toPromise=function(t){if(t||(t=fo.config.Promise),!t)throw new mt("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})},Ke.startAsync=function(t){var e=ko(t)();return e===Co?xn(e.e):Tr(e)},Pr=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new me(this._fn2(e).subscribe(t),e.connect())},e}(Ge),He.multicast=function(t,e){return Eo(t)?new Pr(this,t,e):new Ar(this,t)},He.publish=function(t){return t&&Eo(t)?this.multicast(function(){return new Zr},t):this.multicast(new Zr)},He.share=function(){return this.publish().refCount()},He.publishLast=function(t){return t&&Eo(t)?this.multicast(function(){return new Xr},t):this.multicast(new Xr)},He.publishValue=function(t,e){
return 2===arguments.length?this.multicast(function(){return new eo(e)},t):this.multicast(new eo(t))},He.shareValue=function(t){return this.publishValue(t).refCount()},He.replay=function(t,e,n,r){return t&&Eo(t)?this.multicast(function(){return new no(e,n,r)},t):this.multicast(new no(e,n,r))},He.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()},jr=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return ie(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},e}(Ge),Ar=fo.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return ie(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new jr(this)},e}(Ke),Lr=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return ie(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Ge),Rr=Ke.interval=function(t,e){return tt(t,t,Ee(e)?e:Ae)},Ke.timer=function(t,e,n){var r;return Ee(n)||(n=Ae),null!=e&&"number"==typeof e?r=e:Ee(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===s?Z(t,n):t instanceof Date&&r!==s?X(t,e,n):tt(t,r,n)},He.delay=function(){var t,e,n=arguments[0];if("number"==typeof n||n instanceof Date)return t=n,e=arguments[1],Ee(e)||(e=Ae),t instanceof Date?nt(this,t,e):et(this,t,e);if(Ke.isObservable(n)||Eo(n))return rt(this,n,arguments[1]);throw Error("Invalid arguments")},Nr=function(t){function e(e,n,r){Ee(r)||(r=Ae),this.source=e,this._dt=n,this._s=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve;return new me(this.source.subscribe(new Ir(t,this._dt,this._s,e)),e)},e}(Ge),Ir=function(t){function e(e,n,r,o){this._o=e,this._d=n,this._scheduler=r,this._c=o,this._v=null,this._hv=!1,this._id=0,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new be;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(We),He.debounce=function(){
if(Eo(arguments[0]))return ot(this,arguments[0]);if("number"==typeof arguments[0])return new Nr(this,arguments[0],arguments[1]);throw Error("Invalid arguments")},qr=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Mr(t,this._s))},e}(Ge),Mr=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(We),He.timestamp=function(t){return Ee(t)||(t=Ae),new qr(this,t)},Fr=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new be};return e.sourceSubscription.setDisposable(this.source.subscribe(new Ur(e))),new me(e.sourceSubscription,this._sampler.subscribe(new Vr(e)))},e}(Ge),Vr=function(t){function e(e){this._s=e,t.call(this)}return ie(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(We),Ur=function(t){function e(e){this._s=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(We),He.sample=function(t,e){return Ee(e)||(e=Ae),"number"==typeof t?new Fr(this,Rr(t,e)):new Fr(this,t)},Yr=fo.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)},Yr.prototype=Object.create(Error.prototype),He.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return st(this,t,arguments[1],arguments[2]);if(Ke.isObservable(t)||Eo(t))return it(this,t,arguments[1],arguments[2]);throw Error("Invalid arguments")},He.throttle=function(t,e){var n,r;if(Ee(e)||(e=Ae),(n=+t||0)<=0)throw new RangeError("windowDuration cannot be less or equal zero.");return r=this,new Qr(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)},Br=function(t){function e(e,n){this.source=e,this.controller=new Zr,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return ie(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=he,o=this.pauser.distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=he)});return new ye([n,r,o])},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(Ke),He.pausable=function(t){return new Br(this,t)},Wr=function(t){function e(e,n){
this.source=e,this.controller=new Zr,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return ie(e,t),e.prototype._subscribe=function(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[];return ut(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==s&&o.shouldFire!==n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()})},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(Ke),He.pausableBuffered=function(t){return new Wr(this,t)},zr=function(t){function e(e,n,r){t.call(this),this.subject=new Hr(n,r),this.source=e.multicast(this.subject).refCount()}return ie(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Ke),Hr=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Zr,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||Oe}return ie(e,t),se(e.prototype,Ye,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Ne.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(Ne.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(Ne.createOnNext(t)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n);if(!e.hasCompleted&&!e.hasFailed&&r>0)return e.requestedCount=r,le(function(){e.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Ke),He.controlled=function(t,e){return t&&Ee(t)&&(e=t,t=!0),null==t&&(t=!0),new zr(this,t,e)},He.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e+"")&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t},Kr=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){
var e=ko(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===Co&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(We),He.transduce=function(t){var e=this;return new Qr(function(n){var r=t(ct(n));return e.subscribe(new Kr(n,r))},e)},Qr=fo.AnonymousObservable=function(t){function e(t){return t&&Eo(t.dispose)?t:Eo(t)?le(t):he}function n(t,n){var r=n[0],o=n[1],i=ko(o.__subscribe).call(o,r);i!==Co||r.fail(Co.e)||l(Co.e),r.setDisposable(e(i))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return ie(r,t),r.prototype._subscribe=function(t){var e=new Gr(t),r=[e,this];return Oe.scheduleRequired()?Oe.schedule(r,n):n(null,r),e},r}(Ke),Gr=function(t){function e(e){t.call(this),this.observer=e,this.m=new be}ie(e,t);var n=e.prototype;return n.next=function(t){var e=ko(this.observer.onNext).call(this.observer,t);e===Co&&(this.dispose(),l(e.e))},n.error=function(t){var e=ko(this.observer.onError).call(this.observer,t);this.dispose(),e===Co&&l(e.e)},n.completed=function(){var t=ko(this.observer.onCompleted).call(this.observer);this.dispose(),t===Co&&l(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(We),Jr=function(t,e){this._s=t,this._o=e},Jr.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}},Zr=fo.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return ie(e,t),se(e.prototype,Ye.prototype,{_subscribe:function(t){return fe(this),this.isStopped?this.hasError?(t.onError(this.error),he):(t.onCompleted(),he):(this.observers.push(t),new Jr(this,t))},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=c(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped)for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new to(t,e)},e}(Ke),Xr=fo.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return ie(e,t),se(e.prototype,Ye.prototype,{_subscribe:function(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),he):(this.observers.push(t),new Jr(this,t))},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){var t,e,n,r;if(fe(this),!this.isStopped){
if(this.isStopped=!0,n=c(this.observers),e=n.length,this.hasValue)for(t=0;t<e;t++)r=n[t],r.onNext(this.value),r.onCompleted();else for(t=0;t<e;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){fe(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Ke),to=fo.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return ie(e,t),se(e.prototype,Ye.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Ke),eo=fo.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return ie(e,t),se(e.prototype,Ye.prototype,{_subscribe:function(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),he):(this.observers.push(t),t.onNext(this.value),new Jr(this,t))},getValue:function(){return fe(this),this.hasError&&l(this.error),this.value},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=c(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped){this.value=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Ke),no=fo.ReplaySubject=function(t){function e(t,e){return le(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,o){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=o||Oe,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return ie(n,t),se(n.prototype,Ye.prototype,{_subscribe:function(t){var n,r,o,i;for(fe(this),n=new Qe(this.scheduler,t),r=e(this,n),this._trim(this.scheduler.now()),this.observers.push(n),o=0,i=this.q.length;o<i;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return fe(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){var e,n,r,o,i;if(fe(this),!this.isStopped)for(e=this.scheduler.now(),this.q.push({interval:e,value:t}),this._trim(e),n=0,
r=c(this.observers),o=r.length;n<o;n++)i=r[n],i.onNext(t),i.ensureActive()},onError:function(t){var e,n,r,o,i;if(fe(this),!this.isStopped){for(this.isStopped=!0,this.error=t,this.hasError=!0,e=this.scheduler.now(),this._trim(e),n=0,r=c(this.observers),o=r.length;n<o;n++)i=r[n],i.onError(t),i.ensureActive();this.observers.length=0}},onCompleted:function(){var t,e,n,r,o;if(fe(this),!this.isStopped){for(this.isStopped=!0,t=this.scheduler.now(),this._trim(t),e=0,n=c(this.observers),r=n.length;e<r;e++)o=n[e],o.onCompleted(),o.ensureActive();this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(Ke),fo.Pauser=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Zr),po.Rx=fo,(i=function(){return fo}.call(e,n,e,t))!==s&&(t.exports=i),ro=b()}).call(this)}).call(e,n(46)(t),n(83),n(1385))},1360:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){function o(){var t=$(this),o=t.val(),i=e(o);t.removeClass("_tv-dialog-text-input-error"),"function"==typeof n&&n(o),o!==i&&(t.val(i),r&&t.trigger("change"))}function i(t){if(t.ctrlKey)return!1;if(t.metaKey)return!1;if(!t.charCode)return!1;var e=t.keyCode||t.which;return 9!==e&&(13!==e&&(16!==e&&(17!==e&&(18!==e&&(19!==e&&(20!==e&&(27!==e&&!(33<=e&&e<=40))))))))}if(!(t instanceof $))return void console.warn("'$inputs' should be instance of jQuery");"function"!=typeof e&&(e=function(t){return t}),t.each(function(t,e){var n=$(e);n.on("keypress",function(t){if(i(t)){var e=function(){o.call(this),$(this).off("keyup",e)}.bind(this);$(this).on("keyup",e)}}),n.change(o)})},t.exports=e.default},1381:function(t,e,n){"use strict";function r(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}var o;Object.defineProperty(e,"__esModule",{value:!0}),e.combine=e.ticket=e.controlGroup=e.control=e.timePicker=e.datePicker=e.comboBox=e.textLabel=e.textInput=e.numberInput=e.buttonsGroup=e.checkbox=e.errorLabel=void 0,e.createHTML=r,n(1382),n(1383),n(1357),n(1384),o=n(268),e.errorLabel=function(t){var e=t.element,r=void 0===e?"":e,o=t.containerClass,i=void 0===o?"":o;return'\n<div class="tv-control-error tv-control-error--fix_size tv-control-error--size_small '+(Modernizr.touch?"":"tv-control-error--for-number-input")+" "+i+'">\n\t'+r+'\n\t<span class="tv-control-error__icon">'+$("<div>").append($(n(1358)).attr("focusable","false")).html()+'</span>\n\t<span class="tv-control-error__messages"></span>\n</div>'},e.checkbox=function(t){var e=t.labelText,r=t.checkboxClass,o=t.checked;return'\n<label>\n\t<span class="tv-control-checkbox">\n\t\t<input class="tv-control-checkbox__input '+r+'" type="checkbox" '+(void 0!==o&&o?"checked":"")+'>\n\t\t<span class="tv-control-checkbox__box">'+n(148)+'</span>\n\t\t<span class="tv-control-checkbox__ripple js-ripple"></span>\n\t</span>\n\n\t<span class="tv-control-checkbox__label">'+e+"</span>\n</label>"},e.buttonsGroup=function(t){
var e=t.containerClass,n=void 0===e?"":e,r=t.options;return'<div class="tv-buttons-group '+n+'">\n\t'+(void 0===r?[]:r).map(function(t){var e=t.optionText;return'<div class="tv-buttons-group__option '+t.optionClass+'"><span class="tv-buttons-group__option--content apply-overflow-tooltip">'+e+"</span></div>"}).join("")+"\n</div>"},e.numberInput=function(t){var e=t.containerClass,n=void 0===e?"":e,r=t.inputClass,i=void 0===r?"":r,s=t.upClass,u=void 0===s?"":s,c=t.downClass,a=void 0===c?"":c;return'\n<div class="tv-control-number-input tv-control-number-input--size_small '+(Modernizr.touch?"tv-control-number-input--mobile":"")+" "+n+'">\n\t<input type="text" class="tv-control-number-input__input tv-control-number-input__input--size_small '+i+'"/>\n\t<div class="tv-control-number-input__controls">\n\t\t<div tabindex="-2" class="tv-control-number-input__wrapper '+u+'">\n\t\t\t<div class="tv-control-number-input__up">'+o+'</div>\n\t\t</div>\n\t\t<div class="tv-control-number-input__splinter"></div>\n\t\t<div tabindex="-2" class="tv-control-number-input__wrapper '+a+'">\n\t\t\t<div class="tv-control-number-input__down">'+o+"</div>\n\t\t</div>\n\t</div>\n</div>"},e.textInput=function(t){var e=t.id,n=t.type,r=void 0===n?"text":n,o=t.containerClass,i=void 0===o?"":o,s=t.inputClass,u=void 0===s?"":s,c=t.placeHolder,a=void 0===c?"":c,l=t.value;return'\n<div class="'+i+'">\n\t<input id="'+e+'" type="'+r+'" class="tv-control-input '+u+'" placeholder="'+a+'" value="'+(void 0===l?"":l).replace(/"/g,"&quote;")+'">\n</div>'},e.textLabel=function(t){var e=t.outputClass,n=void 0===e?"":e,r=t.outputText;return'\n<div class="tv-text-label js-text-label">\n\t<div class="tv-text-label__label">=</div>\n\t<div class="tv-text-label__value '+n+'">'+(void 0===r?"":r)+"</div>\n</div>"},e.comboBox=function(t){var e=t.outputClass;return'\n<select class="'+(void 0===e?"":e)+' tv-control-select tv-control-select--size_small"></select>\n'},e.datePicker=function(t){var e=t.outputClass;return'\n<div class="'+(void 0===e?"":e)+'">\n\t<input type="text" placeholder="yyyy-mm-dd" class="tv-control-input tv-control-input--size_small">\n</div>\n'},e.timePicker=function(t){var e=t.outputClass;return'\n<div class="'+(void 0===e?"":e)+'">\n\t<input type="text" placeholder="hh:mm" name="expired-time" class="tv-control-input tv-control-input--size_small">\n</div>\n'},e.control=function(t){var e=t.containerClass;return'\n<div class="tv-ticket__field '+(void 0===e?"":e)+'">\n\t<div class="tv-ticket__label">'+t.label+'</div>\n\t<div class="tv-ticket__inputs">\n\t\t<div class="tv-ticket__input js-first-control">\n\t\t\t'+t.selector+'\n\t\t</div>\n\n\t\t<div class="tv-ticket__input js-second-control">\n\t\t\t'+t.input+'\n\t\t</div>\n\n\t\t<div class="tv-ticket__input js-third-control">\n\t\t\t'+t.output+"\n\t\t</div>\n\t</div>\n</div>"},e.controlGroup=function(t){var e=t.containerClass,n=void 0===e?"":e,r=t.containerWrapperClass,o=void 0===r?"":r,i=t.label,s=void 0===i?"":i,u=t.controls
;return'\n<div class="tv-ticket__field '+n+'">\n\t<div class="tv-ticket__label js-control-group-label">'+s+'</div>\n\t<div class="'+o+'">'+(void 0===u?[]:u).join("")+"</div>\n</div>"},e.ticket=function(t){var e=t.body,n=void 0===e?"":e,r=t.riskRewardClass,o=void 0===r?"":r,i=t.riskClass,s=void 0===i?"":i,u=t.doneText,c=void 0===u?"":u,a=t.doneClass,l=void 0===a?"":a,h=t.profitClass;return'\n<div class="tv-ticket">\n\t'+n+'\n\t<div class="tv-ticket__submit">\n\t\t<div class="tv-ticket__risk">\n\t\t\t<div class="'+s+'"></div>\n\t\t\t<div class="'+o+'"></div>\n\t\t\t<div class="'+(void 0===h?"":h)+'"></div>\n\t\t</div>\n\t\t<span class="tv-button tv-button--primary '+l+'">'+c+"</span>\n\t</div>\n</div>"},e.combine=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.join("")}},1382:function(t,e){},1383:function(t,e){},1384:function(t,e){},1385:function(t,e){function n(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===n||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function i(t){if(h===clearTimeout)return clearTimeout(t);if((h===r||!h)&&clearTimeout)return h=clearTimeout,clearTimeout(t);try{return h(t)}catch(e){try{return h.call(null,t)}catch(e){return h.call(this,t)}}}function s(){f&&d&&(f=!1,d.length?p=d.concat(p):b=-1,p.length&&u())}function u(){var t,e;if(!f){for(t=o(s),f=!0,e=p.length;e;){for(d=p,p=[];++b<e;)d&&d[b].run();b=-1,e=p.length}d=null,f=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function a(){}var l,h,p,f,d,b,v=t.exports={};!function(){try{l="function"==typeof setTimeout?setTimeout:n}catch(t){l=n}try{h="function"==typeof clearTimeout?clearTimeout:r}catch(t){h=r}}(),p=[],f=!1,b=-1,v.nextTick=function(t){var e,n=Array(arguments.length-1);if(arguments.length>1)for(e=1;e<arguments.length;e++)n[e-1]=arguments[e];p.push(new c(t,n)),1!==p.length||f||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=a,v.addListener=a,v.once=a,v.off=a,v.removeListener=a,v.removeAllListeners=a,v.emit=a,v.prependListener=a,v.prependOnceListener=a,v.listeners=function(t){return[]},v.binding=function(t){throw Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(t){throw Error("process.chdir is not supported")},v.umask=function(){return 0}},1386:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e)
;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){return Array.isArray(t)?t:Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){var e,n,r,o,i,s,u,c,a,l,h,p,f,d,b,v,y,_,g,w,E,C,k,x,S,D,T,P=t.input,A=t.state$,R=t.error$,I=void 0===R?L.Observable.of({hasError:!1}):R,q=t.onOff$,M=void 0===q?L.Observable.of(!0):q,F=t.upClass,V=void 0===F?".js-input-up":F,U=t.downClass,Y=void 0===U?".js-input-down":U,B=t.inputClass,W=void 0===B?".js-input":B,H=t.parseError,K=void 0===H?$.t("can not parse value"):H,Q=t.leftMessageAlign,G=t.formatOnInput,J=void 0!==G&&G,Z=1e-10,X=function(t,e){return t.flatMapLatest(function(){return L.Observable.interval(50).delay(250).startWith(1).takeUntil(L.Observable.fromEvent(document,"mouseup"))}).map(function(){return e})},tt=P.querySelector(V),et=P.querySelector(Y),nt=P.querySelector(W),rt=new N.ControlError(P,{addFocusEvents:!1,addErrorOnElement:!1,leftMessageAlign:Q});try{nt.setSelectionRange(nt.value.length,nt.value.length)}catch(t){}return e=L.Observable.fromEvent(tt,"mousedown").pausable(M).publish(),n=L.Observable.fromEvent(et,"mousedown").pausable(M).publish(),r=X(e,1),o=X(n,-1),i=L.Observable.merge(L.Observable.fromEvent(nt,"focus",function(t){return!0}),L.Observable.fromEvent(tt,"focus",function(t){return!0}),L.Observable.fromEvent(et,"focus",function(t){return!0})),s=L.Observable.merge(L.Observable.fromEvent(nt,"blur",function(t){return!1}),L.Observable.fromEvent(tt,"blur",function(t){return!1}),L.Observable.fromEvent(et,"blur",function(t){return!1})),u=i.merge(s).debounce(10).distinctUntilChanged(),c=L.Observable.fromEvent(nt,"input",function(t){return t.target.value}),a=c.withLatestFrom(A,function(t,e){var n=e.formatter.parse(t);return n.res?{hasError:!1,input:n.price}:{hasError:!0,input:t,text:n.error||K}}).publish(),l=a.map(function(t){return t.input}).publish(),h=function(t,e){return function(n){var r=n;return void 0!==t&&(r=Math.max(r,t)),void 0!==e&&(r=Math.min(r,e)),r}},p=A.map(function(t){return t.value}),f=L.Observable.merge(p,l).withLatestFrom(A,function(t,e){return["string"==typeof t?0:t,e.step,h(e.min,e.max)]}),d=function(t){var e=j(t,3),n=e[0],i=e[1],s=e[2];return o.merge(r).scan(function(t,e){var n=e*i,r=Math.pow(10,-Math.floor(Math.log10(i))),o=t*r%(i*r)/r;return s(o>Z?t+n+(1===e?0:1)*i-o:t+n)},n)},b=f.flatMap(d),v=b.merge(p).distinctUntilChanged().publish(),y=L.Observable.merge(v,a.filter(function(t){return!t.hasError}).map(function(t){return t.input})).distinctUntilChanged().publish(),_=(J?y:v).withLatestFrom(A,function(t,e){return e.formatter.format(t)}),g=a.merge(y.map(function(t){return{hasError:!1}})).distinctUntilChanged(function(t){return t.text}),w=m(g,M,{hasError:!1}),E=w.value$,C=w.disposable,k=m(I,M,{hasError:!1}),x=k.value$,S=k.disposable,D=E.publish(),T=O([D,x],z),{value$:y,error$:D,subscribe:function(){
var t=u.subscribe(function(t){t?(P.classList.add("i-active"),P.parentNode.classList.add("i-focus")):(P.classList.remove("i-active"),P.parentNode.classList.remove("i-focus"))}),e=_.subscribe(function(t){var e=nt.value,n=e.slice(0,nt.selectionStart).length+t.length-e.length;nt.value=t,nt.setSelectionRange(n,n)}),n=M.subscribe(function(t){t?(nt.removeAttribute("disabled"),P.classList.remove("i-disabled")):(nt.setAttribute("disabled","disabled"),P.classList.add("i-disabled"))}),r=T.subscribe(function(t){t.hasError?(P.classList.add("i-error"),rt.add({id:1,message:t.text}).render()):(P.classList.remove("i-error"),rt.clear().render())});return new L.CompositeDisposable(t,e,n,r)},connect:function(){return new L.CompositeDisposable(D.connect(),y.connect(),v.connect(),l.connect(),a.connect(),e.connect(),n.connect(),S,C)}}}function l(t,e,n){return(t<=0||e<=0)&&!n?{text:$.t("Value should be more than 0"),hasError:!0}:{text:"",hasError:!1}}function h(t){var e,n,r,o,i,s,h,p,f,d,b,v,m,y,_,g,w,E,C,k,S,D,T,A=t.container,R=t.price$,N=t.custom$,I=t.initState$,q=t.pipsToPrice,M=t.priceToPips,F=t.pipsProps,V=t.priceProps,U=t.orderType$,Y=t.onOff$,B=void 0===Y?L.Observable.of(!0):Y,H=t.anyPriceValid$,K=void 0===H?L.Observable.of(!1):H,Q=t.switchClass,G=void 0===Q?".js-order-switch":Q,J=t.inputClass,Z=void 0===J?".js-order-input":J,X=t.outputClass,tt=void 0===X?".js-order-output":X,et=t.observableArrForErrorChecker,nt=void 0===et?[]:et,rt=t.errorChecker,ot=void 0===rt?l:rt,it={FIRST:1,SECOND:2},st=A.querySelector(G),ut=A.querySelector(Z),ct=A.querySelector(tt),at=st.querySelector("div"),lt=st.querySelectorAll("div")[1],ht=new L.Subject,pt=I.delay(1).concat(ht).distinctUntilChanged(function(t){return t.type}).publish(),ft=it.FIRST;return I.subscribe(function(t){ft=t.type}),e=L.Observable.fromEvent(at,"click",function(){return W.PRICE}).pausable(B),n=L.Observable.fromEvent(lt,"click",function(){return W.PIPS}).pausable(B),r=e.merge(n).distinctUntilChanged().startWith(ft),o=pt.map(function(t){return t.type}).publish(),i=new L.Subject,s=a({input:ut,state$:pt,error$:i,onOff$:B}),h=s.value$,p=s.error$,f=s.connect,d=s.subscribe,b=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e},v=N?[o,h,R,N]:[o,h,R],m=L.Observable.combineLatest.apply(L.Observable,c(v.concat(b))).publish(),y=L.Observable.combineLatest(o,h,b).publish(),_=function(t,e,n){return t.filter(function(t){return j(t,1)[0]===e}).map(function(t){var e=u(t),r=e.slice(1);return n.apply(void 0,c(r))})},g=_(m,W.PIPS,q).map(function(t){return x(V.formatter,t)}).merge(_(m,W.PRICE,M).map(function(t){return x(F.formatter,t)})).publish(),w=$.t("Pips"),E=g.withLatestFrom(o,function(t,e){var n=e===W.PRICE?w:"";return(e===W.PRICE?F.formatter:V.formatter).format(t)+" "+n}),C=r.withLatestFrom(g,function(t,e){return P({},t===W.PRICE?V:F,{type:t,value:e})}).publish(),k=_(m,W.PIPS,q).merge(_(y,W.PRICE,function(t){return t})).publish(),S=_(m,W.PRICE,M).merge(_(y,W.PIPS,function(t){return t})).publish(),
D=L.Observable.combineLatest.apply(L.Observable,[k,S].concat(c(nt),[K,R,U||L.Observable.of(null),ot])).distinctUntilChanged(function(t){return t.text}),T=O([i,p],z),{price$:k,pips$:S,error$:T,mode$:r,subscribe:function(){var t=pt.subscribe(function(t){t.type===W.PRICE?(at.classList.add("i-active"),lt.classList.remove("i-active")):(at.classList.remove("i-active"),lt.classList.add("i-active"))}),e=E.subscribe(function(t){ct.textContent=t}),n=B.subscribe(function(t){t?(st.classList.remove("i-disabled"),ct.parentNode.classList.remove("i-disabled")):(st.classList.add("i-disabled"),ct.parentNode.classList.add("i-disabled"))}),r=d();return new L.CompositeDisposable(e,t,r,n)},connect:function(){return new L.CompositeDisposable(D.subscribe(i),g.connect(),S.connect(),k.connect(),y.connect(),m.connect(),o.connect(),f(),pt.connect(),C.subscribe(ht),C.connect())}}}function p(t,e){var n=$(t);return L.Observable.fromEventPattern(function(t){return n.on("change",t)},function(t){return n.off("change",t)},function(){return n.val()}).startWith(e).publish()}function f(){return 60*-(new Date).getTimezoneOffset()*1e3}function d(t,e){var n,r,o=$(t);return(0,M.default)(o,{triggerChange:!0}),(0,Y.lazyJqueryUI)(o).datepicker({dateFormat:"yy-mm-dd",minDate:new Date,showOtherMonths:!0}),e=e||Date.now()+864e5,n=new Date(e+f()).toJSON(),r=n.substr(0,10),o.val(r),L.Observable.fromEventPattern(function(t){return o.on("change input",t)},function(t){return o.off("change input",t)},function(){return o.val()}).startWith(r)}function b(t,e,n){var r,o,i=$(t);return(0,V.default)(i,{triggerChange:!0}),i.clockpicker({autoclose:!0,donetext:"OK",placement:"top",afterShow:function(){var t=+e.css("z-index")+1;isFinite(t)&&i.data("clockpicker").popover.css("z-index",t)}}),n=n||Date.now(),r=new Date(n+f()).toJSON(),o=r.substr(11,5),i.val(o),L.Observable.fromEventPattern(function(t){return i.on("change input",t)},function(t){return i.off("change input",t)},function(){return i.val()}).startWith(o)}function v(t,e,n,r,o,i,s,u,c,a){function l(t,e,n){e.classList.toggle("i-disabled",!n),$(t).prop("disabled",!n)}var h,v,m,y,_,g,w,E,C,k,x,O=t.querySelector("select.js-duration-type"),S=t.querySelector(".js-duration-date"),D=t.querySelector(".js-duration-time"),T=S.querySelector("input"),P=D.querySelector("input");return!o||(0,U.isArray)(o)&&0===o.length?($(t).addClass("js-hidden"),h=L.Observable.of({}).publish(),{duration$:h,durationDateError$:h,durationTimeError$:h,subscribe:function(){return h.subscribe(function(){})},connect:function(){return h.connect()}}):($(t).removeClass("js-hidden"),v=p(O,n||o[0].value),m=d(T,r),y=b(P,$(e),r),_=new N.ControlError(T,{addFocusEvents:!1,addErrorOnElement:!1}),g=new N.ControlError(P,{addFocusEvents:!1,addErrorOnElement:!1}),w={text:"",hasError:!1},E=L.Observable.combineLatest(v,m,i,function(t,e,n){var r,i,s,u;return!o.filter(function(e){return e.value===t})[0].hasDatePicker||!c&&n===I.ORDERTYPE.MARKET?w:e?(r=$.t("Incorrect date format. Should be yyyy-mm-dd."),e.match(/^\d{4}-[01]\d-[0-3]\d$/)?(i=e+"T00:00:00Z",s=new Date(i),
s.valueOf()?(u=864e5*parseInt(Date.now()/864e5),s<u?{text:$.t("Expiration date is in the past."),hasError:!0}:w):{text:r,hasError:!0}):{text:r,hasError:!0}):{text:$.t("Enter valid date"),hasError:!0}}).startWith(w).distinctUntilChanged(function(t){return t.text}).publish(),C=L.Observable.combineLatest(v,m,E,y,i,function(t,e,n,r,i){var s,u,a;return!o.filter(function(e){return e.value===t})[0].hasTimePicker||!c&&i===I.ORDERTYPE.MARKET?w:r?(s=$.t("Incorrect time format. Should be hh:mm."),r.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)?n.hasError?w:(u=e+"T"+r+":00Z",a=new Date(u),a.valueOf()?(a-=f(),a<Date.now()?{text:$.t("Expiration time is in the past."),hasError:!0}:w):{text:s,hasError:!0}):{text:s,hasError:!0}):{text:$.t("Enter valid time"),hasError:!0}}).startWith(w).distinctUntilChanged(function(t){return t.text}).publish(),k=L.Observable.combineLatest(v,m,y,i,function(t,e,n,r){return r!==I.ORDERTYPE.MARKET||c?{type:t,dateStr:e,timeStr:n}:{}}).distinctUntilChanged().publish(),x=L.Observable.combineLatest(v,i,function(t,e){var n=o.filter(function(e){return e.value===t})[0],r=(c||e!==I.ORDERTYPE.MARKET)&&!u||u&&a;return{duration:r,datePicker:n.hasDatePicker&&r,timePicker:n.hasTimePicker&&r}}),{duration$:k,durationDateError$:E,durationTimeError$:C,subscribe:function(){var t=E.subscribe(function(t){_.clear().render(),t.hasError&&_.add({id:1,message:t.text}).render()}),e=C.subscribe(function(t){g.clear().render(),t.hasError&&g.add({id:1,message:t.text}).render()}),n=x.subscribe(function(t){l(T,S,t.datePicker),l(P,D,t.timePicker),t.duration?s.tvControlSelect("enable"):setTimeout(function(){s.tvControlSelect("disable")},0)});return new L.CompositeDisposable(t,e,n)},connect:function(){return new L.CompositeDisposable(k.connect(),C.connect(),E.connect(),v.connect())}})}function m(t,e,n){var r=t.replay(null,1),o=r.connect();return{value$:e.flatMapLatest(function(t){return t?r:L.Observable.of(n)}),disposable:o}}function y(t){var e,n=t.container,r=t.startState;return n.checked=!!r,e=L.Observable.merge(L.Observable.of(!!r).delay(1),L.Observable.create(function(t){var e=function(e){return setTimeout(function(){return t.onNext(e.target.checked)})};return n.addEventListener("change",e),function(){return n.removeEventListener("checked",e)}})).distinctUntilChanged().publish(),{value$:e,connect:function(){return e.connect()}}}function _(t,e){var n=t.price$,r=t.pips$,o=t.error$,i=t.mode$,s=e.value$,u=m(n,s),c=u.value$,a=u.disposable,l=m(r,s),h=l.value$,p=l.disposable,f=m(o,s,{text:"",hasError:!1}),d=f.value$,b=f.disposable;return{price$:c,pips$:h,error$:d,mode$:i,connect:function(){return new L.CompositeDisposable(e.connect(),t.connect())},subscribe:function(){return new L.CompositeDisposable(t.subscribe(),b,p,a)}}}function g(t){var e=t.buttonLoader,n=t.result$,r=t.fire$,o=void 0===r?L.Observable.empty():r,i=t.enable$,s=void 0===i?L.Observable.of(!0):i,u=t.handler,c=e.contentNojQuery(),a=new L.Subject,l=a.merge(s),h=L.Observable.merge(L.Observable.fromEvent(c,"click",function(){return"fire"
}),o).pausable(l),p=h.withLatestFrom(n,function(t,e){return e}),f=p.flatMapLatest(function(t){var e,n=u(t);return H(n)?(e=function(t,e){return a.onNext(!0),P({},t,{details:e})},a.onNext(!1),n.then().then(e.bind(null,{status:"ok"}),e.bind(null,{status:"error"}))):L.Observable.of({status:"ok",details:n})}).publish();return{result$:f,subscribe:function(){var t=s.subscribe(function(t){t?e.enable():e.disable()}),n=a.subscribe(function(t){t?e.stop():e.start()});return new L.CompositeDisposable(t,n)},connect:function(){return new L.CompositeDisposable(f.connect())}}}function w(t){var e=t.container,n=t.qty$,r=t.pips$,o=t.equity$,i=t.pipValue,s=t.currencySign,u=void 0===s?"$":s,c=t.text,a=void 0===c?$.t("Risk"):c,l=L.Observable.combineLatest(n,r,o,function(t,e,n){var r,o;return n?(r=e?e*t*i:void 0,o=r?100*r/n:void 0,{rm:r,rp:o}):null}).distinctUntilChanged();return{subscribe:function(){return l.subscribe(function(t){if(!t)return void(e.textContent="");var n=t.rm,r=t.rp;e.textContent=void 0===n||void 0===r?"":a+" "+r.toFixed(2)+"% ("+u+(0,A.splitThousands)(n.toFixed(2),",")+")"})}}}function E(t){var e=t.container,n=t.slPips$,r=t.tpPips$,o=L.Observable.combineLatest(n,r,function(t,e){return e/t}).distinctUntilChanged();return{subscribe:function(){return o.subscribe(function(t){Number.isFinite(t)?e.textContent=$.t("Risk/reward ratio:")+" "+t.toFixed(2):e.textContent=""})}}}function C(t){return Math.abs(Math.floor(Math.log10(t)))}function k(t,e,n,r){var o,i;return t&&r<t?{res:!1,error:Q.min}:e&&r>e?{res:!1,error:Q.max}:(o=1,n<0&&(o=Math.pow(10,C(n))),i=B(r*o/(n*o)),n&&i!==Math.floor(i)?{res:!1,error:Q.step}:{res:!0})}function x(t,e){var n=t.parse(t.format(e));return n.res?n.price:(n=Number.parseFloat(e),Number.isNaN(n)?void 0:n)}function O(t,e){return L.Observable.combineLatest.apply(L.Observable,c(t.concat(e))).distinctUntilChanged().publish().refCount()}var S,D,T,P,j,A,L,R,N,I,q,M,F,V,U,Y,B,W,z,H,K,Q;Object.defineProperty(e,"__esModule",{value:!0}),e.QtyFormatter=e.NumericFormatter=e.mergeErrors=e.INPUT_TYPE=void 0,S=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),D=function t(e,n,r){var o,i,s;return null===e&&(e=Function.prototype),void 0===(o=Object.getOwnPropertyDescriptor(e,n))?(i=Object.getPrototypeOf(e),null===i?void 0:t(i,n,r)):"value"in o?o.value:void 0!==(s=o.get)?s.call(r):void 0},T="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},P=Object.assign||function(t){var e,n,r;for(e=1;e<arguments.length;e++){n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},j=function(){function t(t,e){var n,r,o=[],i=!0,s=!1,u=void 0;try{for(n=t[Symbol.iterator]();!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,u=t}finally{try{
!i&&n.return&&n.return()}finally{if(s)throw u}}return o}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.createCustomNumberInput=a,e.createPriceController=h,e.localOffset=f,e.createDurationController=v,e.makeObservableOffable=m,e.createCheckBox=y,e.combineControllerAndCheckbox=_,e.createDoneButton=g,e.createRiskHelper=w,e.createRiskRewardHelper=E,e.checkQty=k,e.parseWithFormatter=x,e.combineErrors=O,A=n(183),L=n(1359),R=n(17),N=n(1387),I=n(96),q=n(1389),M=r(q),F=n(1390),V=r(F),U=n(15),Y=n(122),B=n(124).fixComputationError,W=e.INPUT_TYPE={PRICE:1,PIPS:2},z=e.mergeErrors=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e){return{hasError:t.hasError||e.hasError,text:t.text||e.text}},{})},H=function(t){return"object"===(void 0===t?"undefined":T(t))&&"function"==typeof t.then},K=e.NumericFormatter=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Only numbers allowed.";return o(this,e),n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Math.pow(10,t))),n._errorLabel=r,n}return s(e,t),S(e,[{key:"parse",value:function(t){var n=D(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parse",this).call(this,t);return n.res?n:P({},n,{error:this._errorLabel})}}]),e}(R.PriceFormatter),Q={min:$.t("Specified amount is less that the instrument minimum."),max:$.t("Specified amount is more than the instrument maximum."),step:$.t("Specified amount is not a multiple of the instrument minimum.")},e.QtyFormatter=function(t){function e(t){var n,r,s=t.min,u=void 0===s?null:s,c=t.max,a=void 0===c?null:c,l=t.step,h=void 0===l?1:l;return o(this,e),n=h>=1?0:C(h),r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,$.t("Amount format is invalid."))),r._values={min:u,max:a,step:h},r}return s(e,t),S(e,[{key:"parse",value:function(t){var n,r=D(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parse",this).call(this,t.replace(/\s/g,""));return r.res&&(n=k(this._values.min,this._values.max,this._values.step,r.price),!1===n.res)?n:r}},{key:"format",value:function(t){return(0,A.splitThousands)(D(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t)," ")}}]),e}(K)},1387:function(t,e,n){"use strict";function r(t){var e,n;if(t&&t.__esModule)return t;if(e={},null!=t)for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i,s,u,c,a;Object.defineProperty(e,"__esModule",{value:!0}),e.ControlError=void 0,i=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),n(1388),s=n(185),u=n(26),c=r(u),a=e.ControlError=function(){function t(e){function r(t,e){
return t.some(function(t){return e.test(t)})}var i,s,u,c,a=this,l=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},h=l.addFocusEvents,p=void 0===h||h,f=l.addErrorOnElement,d=void 0===f||f,b=l.leftMessageAlign,v=void 0!==b&&b,m=l.maxWidth,y=void 0===m?void 0:m;o(this,t),i=$(e),s=i.hasClass("tv-control-checkbox__input"),u=i.hasClass("tv-control-number-input"),c=r(i.attr("class").split(/\s+/),/^.+--size_small$/),this.options={smallMode:c,addErrorOnElement:d,maxWidth:y},s&&(i=i.closest(".tv-control-checkbox")),this.errors={},this.$control=i,i.data("tv-control-material")?this.$toWrap=i.data("tv-control-material").$el:i.data("tv-control-error-wrap")?this.$toWrap=i.data("tv-control-error-wrap"):this.$toWrap=i,this.$toWrap.parent().hasClass("tv-control-error")||this.$toWrap.wrap('<div class="tv-control-error '+(u?"tv-control-error--for-number-input":"")+'"></div>'),this.$el=this.$toWrap.parent(),s&&this.$el.addClass("tv-control-error--msg_left"),c&&this.$el.addClass("tv-control-error--size_small"),s||(this.$icon=this.$el.find(".tv-control-error__icon"),this.$icon.length||(this.$icon=$('<span class="tv-control-error__icon">'+$("<div>").append($(n(1358)).attr("focusable","false")).html()+"</span>").appendTo(this.$el)),i.data("tv-control-material")&&this.$icon.addClass("tv-control-error__icon--material-input")),this.$widthControlWrapper=this.$el.find(".tv-control-error__width-control-wrapper"),this.$widthControlWrapper.length||(this.$widthControlWrapper=$('<div class="tv-control-error__width-control-wrapper">').appendTo(this.$el)),this.$widthControlWrapper.css("width",this.options.maxWidth),v&&this.$widthControlWrapper.addClass("tv-control-error__width-control-wrapper--from-left"),this.$messages=this.$el.find(".tv-control-error__messages"),this.$messages.length||(this.$messages=$('<span class="tv-control-error__messages"></span>').appendTo(this.$widthControlWrapper)),i.on("focus",function(){a.$el.addClass("i-focus"),i.removeClass("i-error"),p&&i.on("keyup.tv-control-error",function(t){9!==t.keyCode&&16!==t.keyCode&&(a.clear().render(),a.$el.removeClass("i-focus"),i.off("keyup.tv-control-error"))})}),i.on("blur",function(){a.$el.removeClass("i-focus"),a.hasErrors()&&i.addClass("i-error")})}return i(t,[{key:"add",value:function(t){var e=t.id,n=t.message;return this.errors[e]=n,this}},{key:"remove",value:function(t){var e=t.id;return delete this.errors[e],this}},{key:"clear",value:function(){return this.errors={},this}},{key:"hasErrors",value:function(){return!!Object.keys(this.errors).length}},{key:"render",value:function(){var t,e,n=this;if(this.emptyTimeout&&clearTimeout(this.emptyTimeout),t=Object.keys(this.errors),t.length)for(this.$messages.empty(),this.$el.addClass("i-error"),this.options.addErrorOnElement&&this.$control.addClass("i-error"),e=0;e<t.length;e++)this.errors[t[e]]&&$('<span class="tv-control-error__message">'+this.errors[t[e]]+"</span>").appendTo(this.$messages);else this.$el.removeClass("i-error"),this.$control.removeClass("i-error"),this.emptyTimeout=setTimeout(function(){n.$messages.empty()},c.dur)
;return this}}]),t}(),$.fn.tvControlError=(0,s.createTvBlockWithInstance)("tv-control-error",function(t,e){return new a(t,e)})},1388:function(t,e){},1389:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o,i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function n(t){return 4!==t.length&&7!==t.length||(t+="-"),t=t.substr(0,10)}var e=e||{};(0,i.default)(t,n,e.inputOnTypingCallback,e.triggerChange)},o=n(1360),i=r(o),t.exports=e.default},1390:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o,i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function n(t){return 2===t.length&&(t+=":"),t=t.substr(0,5)}var e=e||{};(0,i.default)(t,n,e.inputOnTypingCallback,e.triggerChange)},o=n(1360),i=r(o),t.exports=e.default},1437:function(t,e){},1438:function(t,e,n){"use strict";(function(t,e){function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o,i,s,u,c=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();n(1439),o=n(185),n(427),i=n(148),s={wrap:'<span class="tv-control-select__wrap tv-dropdown-behavior {{ class }}{{# touch }} tv-control-select__wrap--touch{{/ touch }}{{# disabled }} i-disabled{{/ disabled }}"><span class="tv-control-select__control{{^ touch }} tv-dropdown-behavior__button{{/ touch }}{{# disabled }} i-disabled{{/ disabled }}"><span class="tv-control-select__control-inner"></span></span>{{^ touch }}<span class="tv-control-select__dropdown tv-dropdown-behavior__body tv-dropdown-behavior__body--from_top {{ dropdown_class }} i-hidden"><span class="tv-control-select__scroll tv-dropdown-behavior__scroll"><span class="tv-dropdown-behavior__inscroll">{{> route }}</span></span></span>{{/ touch }}<span class="tv-control-select__caret js-dropdown-toggle"></span></span>',route:"{{# items }}{{# option }}{{> option }}{{/ option }}{{^ option }}{{# optgroup }}{{> optgroup }}{{/ optgroup }}{{/ option }}{{/ items }}",optgroup:'<span class="tv-dropdown-behavior__item tv-control-select__optgroup-label">{{ label }}</span>{{> route}}',option:'<span data-id="{{ id }}" class="tv-dropdown-behavior__item tv-control-select__option{{# disabled }} i-disabled{{/ disabled }}">\n\t\t\t<span class="tv-control-select__option-wrap">\n\t\t\t{{# multiple }}\n\t\t\t\t<span class="tv-control-checkbox">\n\t\t\t\t\t<input class="tv-control-checkbox__input" type="checkbox" {{# selected }} checked{{/ selected }}>\n\t\t\t\t\t<span class="tv-control-checkbox__box">'+i+'</span>\n\t\t\t\t\t<span class="tv-control-checkbox__ripple js-ripple"></span>\n\t\t\t\t</span>\n\t\t\t\t<span class="tv-control-checkbox__label">{{ label }}</span>\n\t\t\t{{/ multiple }}\n\t\t\t{{^ multiple }}\n\t\t\t\t{{ label }}\n\t\t\t{{/ multiple }}\n\t\t\t</span>\n\t\t</span>'},u=function(){function e(){
var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};r(this,e),this._options=Object.assign({noAnimation:!0},t),this.touch=Modernizr.touch,this.$select=this._options.$select,this._selectElement=this.$select[0],this.multiple=!!this.$select.attr("multiple"),this._minDisplayCount=this._options.minDisplayCount||1,this._emptyString=this._options.emptyString||$.t("Nothing selected",{context:"combobox_input"}),this.disabled=!!this.$select.is(":disabled"),this.options=[],this.filterQuery=[],this.items=this._parseDomItems(this.$select),this._render(),t.initialValue&&this.val(t.initialValue),this.$el.insertBefore(this.$select),this.$select.detach().addClass("i-inited").appendTo(this.$el)}return c(e,[{key:"val",value:function(t){this.multiple?this._setMultipleValues(t):this._setSingleValue(this._findOption(t))}},{key:"enable",value:function(){this.disabled=!1,this.$el.add(this.$dropdown).removeClass("i-disabled"),this.touch||(this.$el.tvDropdown("enable"),this.$control.attr("tabindex",this.$select.attr("tabindex")||0))}},{key:"disable",value:function(){this.disabled=!0,this.$el.add(this.$dropdown).addClass("i-disabled"),this.touch||(this.$el.tvDropdown("disable"),this.$control.removeAttr("tabindex"))}},{key:"toggle",value:function(){this.disabled||(this.touch?this.$select.click():this.$el.tvDropdown("toggle"))}},{key:"open",value:function(){this.disabled||(this.touch?this.$select.click():this.$el.tvDropdown("open"))}},{key:"close",value:function(){this.disabled||(this.touch?this.$select.click():(this._focusOption(this._selectElement.selectedIndex),this.$el.tvDropdown("close")))}},{key:"destroy",value:function(){this.$select.off("change"),this.$dropdown.off("click"),this.$select.removeClass("i-inited").insertBefore(this.$el),this.$el.tvDropdown("destroy"),this.$el.remove()}},{key:"updateItems",value:function(){var t,e,n,r,o;if(this.options=[],this.items=this._parseDomItems(this.$select),t=this._renderDropdown(),!this.touch)for(this.$dropdown.find(".tv-control-select__option").remove(),e=this.$dropdown.find(".tv-dropdown-behavior__inscroll"),this.$options=t.find(".tv-control-select__option"),n=0;n<this.$options.length;n++)r=$(this.$options[n]),o=r.data("id"),this.options[o]&&(this.options[o].$el=r,e.append(r));this.multiple?(this._updateSelectBoxTitle(),this._updateCheckBoxes()):this._updateSingleView(this._selectElement.selectedIndex)}},{key:"_focusOption",value:function(t){var e,n,r,o,i,s,u=this.options[t].$el;if(this._focusedOption=t,!this.touch){if(this._clearFocus(),u.addClass("i-active"),!this.dropdownScroll||!this.opened)return;e=this.dropdownScroll.currentPosition(),n=u.outerHeight(),r=u.position().top,o=this.dropdownScroll.getContainerHeightWithoutHeader(),i=r<-e,s=-e+o<r+n,i?this.dropdownScroll.scrollTo(r):s&&this.dropdownScroll.scrollTo(r+n)}}},{key:"_setSingleValue",value:function(t){var e=this.options[t].value;(this.$select.val()&&""+this.$select.val())!==""+e&&this.$select.val(e).trigger("change")}},{key:"_updateSingleView",value:function(t){var e=this.options[t];e&&(this._focusOption(t),
this._selectElement.selectedIndex=t,this.$controlInner.text(e.label),this.$controlInner.toggleClass("tv-control-select__control-inner--option-disabled",e.disabled))}},{key:"_toggleOption",value:function(t){var e,n,r=this,o=this.options[t].value,i=this.$select.val()||[],s=i.indexOf(o);-1!==s?i.splice(s,1):i.length?(e=this.options[this._findOption(o)].id,n=i.find(function(t){return r.options[r._findOption(t)].id>e}),i.splice(n?i.indexOf(n):0,0,o)):i.push(o),this._setMultipleValues(i)}},{key:"_updateCheckBoxes",value:function(){var t,e,n=this.$select.val()||[];for(t=0;t<this.items.length;t++)e=this.items[t],e.$el.find(".tv-control-checkbox__input").prop("checked",-1!==n.indexOf(e.value))}},{key:"_updateSelectBoxTitle",value:function(){var t,e=this,n=this.$select.val()||[];n.length?n.length===this.items.length?this.$controlInner.text($.t("All items",{context:"combobox_input"})):n.length>this._minDisplayCount?this.$controlInner.text($.t("{0} item",{plural:"{0} items",count:n.length,context:"combobox_input"}).format(n.length)):(t=n.map(function(t){return e.options[e._findOption(t)].label}),this.$controlInner.text(t.join(", "))):this.$controlInner.text(this._emptyString)}},{key:"_setMultipleValues",value:function(t){var e,n;for(this.$select.find("option").prop("selected",!1),e=0;e<t.length;e++)n=t[e],this.$select.find('option[value="'+n+'"]').prop("selected",!0);this.$select.trigger("change")}},{key:"_clearFocus",value:function(){this.$options.removeClass("i-active")}},{key:"_findOption",value:function(t){var e,n=Object.keys(this.options);for(e=0;e<n.length;e++)if(""+this.options[n[e]].value==""+t)return this.options[n[e]].id}},{key:"_parseDomItems",value:function(t){var e,n,r,o=t.children(),i=[];for(e=0;e<o.length;e++)n=$(o[e]),r=void 0,"optgroup"===n.prop("tagName").toLowerCase()?r={optgroup:!0,label:n.attr("label"),items:this._parseDomItems(n)}:"option"===n.prop("tagName").toLowerCase()&&(r={id:n[0].index,option:!0,label:n.text(),value:n.attr("value"),disabled:n.is(":disabled")},this.options[r.id]=r),i.push(r);return i}},{key:"_render",value:function(){var t,e,n,r=this;if(this.$el=this._renderDropdown(),this.$control=this.$el.find(".tv-control-select__control"),this.$controlInner=this.$el.find(".tv-control-select__control-inner"),!this.touch)for(this.$dropdown=this.$el.find(".tv-control-select__dropdown"),this.$options=this.$el.find(".tv-control-select__option"),t=0;t<this.$options.length;t++)e=$(this.$options[t]),n=e.data("id"),this.options[n]&&(this.options[n].$el=e);this.multiple?(this._updateSelectBoxTitle(),this._updateCheckBoxes()):(-1===this._selectElement.selectedIndex&&(this._selectElement.selectedIndex=0),this._updateSingleView(this._selectElement.selectedIndex)),this.$select.on("change",function(t){r.multiple?(r._updateSelectBoxTitle(),r._updateCheckBoxes()):r._updateSingleView(r._findOption(r.$select.val()))}),this.touch||(this.$el.tvDropdown({scroll:!0,adaptBody:!0,noAnimation:this._options.noAnimation}),this.dropdownScroll=this.$el.tvDropdown("get","scroll"),
this.$dropdown.on("click",".tv-control-select__option",function(t){var e=parseInt($(t.currentTarget).data("id"));r.options[e]&&!r.options[e].disabled&&(r.multiple?r._toggleOption(e):(r._setSingleValue(e),r.close()))}),this.$el.on("beforeOpenMenu",function(){r.opened=!0}),this.$el.on("afterCloseMenu",function(){r.opened=!1,r.filterQuery=[],r.multiple||""+r._focusedOption==""+r._selectElement.selectedIndex||r._focusOption(r._selectElement.selectedIndex),r.multiple&&r._clearFocus()}),this.$el.on("click",function(){r.$control.focus()}),this.$el.on("keydown",function(t){r._filter(t)}),this.disabled?this.disable():this.enable())}},{key:"_renderDropdown",value:function(){return $(t.render(s.wrap,{items:this.items,class:this.$select.attr("class"),touch:this.touch,multiple:this.multiple,disabled:this.disabled,dropdown_class:this._options.addDropdownClass},s)).removeClass("tv-control-select")}},{key:"_filter",value:function(t){var e,n,r,o,i,s,u,c=this;if(9===t.which)return void this.close();if(13!==t.which||this.opened){if((40===t.which||32===t.which)&&!this.opened)return this.open(),void t.preventDefault();if(t.preventDefault(),this.opened||this.open(),e=String.fromCharCode(t.which).toLowerCase(),n=[9,13,27,38,40],e&&-1===n.indexOf(t.which)){for(this.filterQuery.push(e),r=this.filterQuery.join(""),o=void 0,i=Object.keys(this.options),s=0;s<i.length;s++)if(0===this.options[i[s]].label.toLowerCase().indexOf(r)&&!this.options[i[s]].disabled){o=this.options[i[s]].id;break}void 0!==o&&this._focusOption(o),this.clearFilter&&clearTimeout(this.clearFilter),this.clearFilter=setTimeout(function(){c.filterQuery=[]},500)}32!==t.which&&13!==t.which||!this.opened||(this.multiple?this._toggleOption(this._focusedOption):(this._setSingleValue(this._focusedOption),this.close(),this.$el.one("keyup",function(t){return t.stopPropagation()}))),u=function(t){var e,n=void 0;return c.options[c._focusedOption]?(e=c.options[c._focusedOption].$el[t](c.$dropdown,".tv-control-select__option:not(.i-disabled)"),n=e.length?e.data("id"):c._focusedOption):n=c.$options.first(".tv-control-select__option:not(.i-disabled)").data("id"),n},40===t.which&&(this.filterQuery=[],this._focusOption(u("nextUntil"))),38===t.which&&(this.filterQuery=[],this._focusOption(u("prevUntil"))),27===t.which&&this.close()}}}]),e}(),$.fn.tvControlSelect=(0,o.createTvBlockWithInstance)("tv-control-select",function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new u(e.extend(n,{$select:t}))})}).call(e,n(34),n(125))},1439:function(t,e){},1440:function(t,e){!function(){function t(t){return document.createElementNS(a,t)}function e(t){return(t<10?"0":"")+t}function n(t){var e=++m+"";return t?t+e:e}function r(r,u){function a(t,e){var n,r=N.offset(),o=/^touch/.test(t.type),s=r.left+y,a=r.top+y,h=(o?t.originalEvent.touches[0]:t).pageX-s,p=(o?t.originalEvent.touches[0]:t).pageY-a,f=Math.sqrt(h*h+p*p),v=!1;e&&(f<_-w||f>_+w)||(t.preventDefault(),n=setTimeout(function(){i.addClass("clockpicker-moving")},200),l&&N.append(Y.canvas),Y.setHand(h,p,!e,!0),
c.off(d).on(d,function(t){t.preventDefault();var e=/^touch/.test(t.type),n=(e?t.originalEvent.touches[0]:t).pageX-s,r=(e?t.originalEvent.touches[0]:t).pageY-a;(v||n!==h||r!==p)&&(v=!0,Y.setHand(n,r,!1,!0))}),c.off(b).on(b,function(t){c.off(b),t.preventDefault();var r=/^touch/.test(t.type),o=(r?t.originalEvent.changedTouches[0]:t).pageX-s,l=(r?t.originalEvent.changedTouches[0]:t).pageY-a;(e||v)&&o===h&&l===p&&Y.setHand(o,l),"hours"===Y.currentView?Y.toggleView("minutes",C/2):u.autoclose&&(Y.minutesView.addClass("clockpicker-dial-out"),setTimeout(function(){Y.done()},C/2)),N.prepend($),clearTimeout(n),i.removeClass("clockpicker-moving"),c.off(d)}))}var h,p,v,m,x,O,S,$,D,T,P,j,A,L,R=s(k),N=R.find(".clockpicker-plate"),I=R.find(".clockpicker-hours"),q=R.find(".clockpicker-minutes"),M=R.find(".clockpicker-am-pm-block"),F="INPUT"===r.prop("tagName"),V=F?r:r.find("input"),U=r.find(".input-group-addon"),Y=this;if(this.id=n("cp"),this.element=r,this.options=u,this.isAppended=!1,this.isShown=!1,this.currentView="hours",this.isInput=F,this.input=V,this.addon=U,this.popover=R,this.plate=N,this.hoursView=I,this.minutesView=q,this.amPmBlock=M,this.spanHours=R.find(".clockpicker-span-hours"),this.spanMinutes=R.find(".clockpicker-span-minutes"),this.spanAmPm=R.find(".clockpicker-span-am-pm"),this.amOrPm="PM",u.twelvehour&&(h='<div class="clockpicker-am-pm-block"><button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-am-button">AM</button><button type="button" class="btn btn-sm btn-default clockpicker-button clockpicker-pm-button">PM</button></div>',s(h),s('<button type="button" class="btn btn-sm btn-default clockpicker-button am-button">AM</button>').on("click",function(){Y.amOrPm="AM",s(".clockpicker-span-am-pm").empty().append("AM")}).appendTo(this.amPmBlock),s('<button type="button" class="btn btn-sm btn-default clockpicker-button pm-button">PM</button>').on("click",function(){Y.amOrPm="PM",s(".clockpicker-span-am-pm").empty().append("PM")}).appendTo(this.amPmBlock)),u.autoclose||s('<button type="button" class="btn btn-sm btn-default btn-block clockpicker-button">'+u.donetext+"</button>").click(s.proxy(this.done,this)).appendTo(R),"top"!==u.placement&&"bottom"!==u.placement||"top"!==u.align&&"bottom"!==u.align||(u.align="left"),"left"!==u.placement&&"right"!==u.placement||"left"!==u.align&&"right"!==u.align||(u.align="top"),R.addClass(u.placement),R.addClass("clockpicker-align-"+u.align),this.spanHours.click(s.proxy(this.toggleView,this,"hours")),this.spanMinutes.click(s.proxy(this.toggleView,this,"minutes")),V.on("focus.clockpicker click.clockpicker",s.proxy(this.show,this)),U.on("click.clockpicker",s.proxy(this.toggle,this)),p=s('<div class="clockpicker-tick"></div>'),u.twelvehour)for(v=1;v<13;v+=1)m=p.clone(),x=v/6*Math.PI,O=_,m.css("font-size","120%"),m.css({left:y+Math.sin(x)*O-w,top:y-Math.cos(x)*O-w}),m.html(0===v?"00":v),I.append(m),m.on(f,a);else for(v=0;v<24;v+=1)m=p.clone(),x=v/6*Math.PI,S=v>0&&v<13,O=S?g:_,m.css({left:y+Math.sin(x)*O-w,top:y-Math.cos(x)*O-w}),S&&m.css("font-size","120%"),
m.html(0===v?"00":v),I.append(m),m.on(f,a);for(v=0;v<60;v+=5)m=p.clone(),x=v/30*Math.PI,m.css({left:y+Math.sin(x)*_-w,top:y-Math.cos(x)*_-w}),m.css("font-size","120%"),m.html(e(v)),q.append(m),m.on(f,a);N.on(f,function(t){0===s(t.target).closest(".clockpicker-tick").length&&a(t,!0)}),l&&($=R.find(".clockpicker-canvas"),D=t("svg"),D.setAttribute("class","clockpicker-svg"),D.setAttribute("width",E),D.setAttribute("height",E),T=t("g"),T.setAttribute("transform","translate("+y+","+y+")"),P=t("circle"),P.setAttribute("class","clockpicker-canvas-bearing"),P.setAttribute("cx",0),P.setAttribute("cy",0),P.setAttribute("r",2),j=t("line"),j.setAttribute("x1",0),j.setAttribute("y1",0),A=t("circle"),A.setAttribute("class","clockpicker-canvas-bg"),A.setAttribute("r",w),L=t("circle"),L.setAttribute("class","clockpicker-canvas-fg"),L.setAttribute("r",3.5),T.appendChild(j),T.appendChild(A),T.appendChild(L),T.appendChild(P),D.appendChild(T),$.append(D),this.hand=j,this.bg=A,this.fg=L,this.bearing=P,this.g=T,this.canvas=$),o(this.options.init)}function o(t){t&&"function"==typeof t&&t()}var i,s=window.jQuery,u=s(window),c=s(document),a="http://www.w3.org/2000/svg",l="SVGAngle"in window&&function(){var t,e=document.createElement("div");return e.innerHTML="<svg/>",t=(e.firstChild&&e.firstChild.namespaceURI)==a,e.innerHTML="",t}(),h=function(){var t=document.createElement("div").style;return"transition"in t||"WebkitTransition"in t||"MozTransition"in t||"msTransition"in t||"OTransition"in t}(),p="ontouchstart"in window,f="mousedown"+(p?" touchstart":""),d="mousemove.clockpicker"+(p?" touchmove.clockpicker":""),b="mouseup.clockpicker"+(p?" touchend.clockpicker":""),v=navigator.vibrate?"vibrate":navigator.webkitVibrate?"webkitVibrate":null,m=0,y=100,_=80,g=54,w=13,E=2*y,C=h?350:1,k='<div class="popover clockpicker-popover"><div class="arrow"></div><div class="popover-title"><span class="clockpicker-span-hours text-primary"></span> : <span class="clockpicker-span-minutes"></span><span class="clockpicker-span-am-pm"></span></div><div class="popover-content"><div class="clockpicker-plate"><div class="clockpicker-canvas"></div><div class="clockpicker-dial clockpicker-hours"></div><div class="clockpicker-dial clockpicker-minutes clockpicker-dial-out"></div></div><span class="clockpicker-am-pm-block"></span></div></div>';r.DEFAULTS={default:"",fromnow:0,placement:"bottom",align:"left",donetext:"",autoclose:!1,twelvehour:!1,vibrate:!0},r.prototype.toggle=function(){this[this.isShown?"hide":"show"]()},r.prototype.locate=function(){var t=this.element,e=this.popover,n=t.offset(),r=t.outerWidth(),o=t.outerHeight(),i=this.options.placement,s=this.options.align,u={};switch(e.show(),i){case"bottom":u.top=n.top+o;break;case"right":u.left=n.left+r;break;case"top":u.top=n.top-e.outerHeight();break;case"left":u.left=n.left-e.outerWidth()}switch(s){case"left":u.left=n.left;break;case"right":u.left=n.left+r-e.outerWidth();break;case"top":u.top=n.top;break;case"bottom":u.top=n.top+o-e.outerHeight()}e.css(u)},r.prototype.show=function(t){var n,r,a
;this.isShown||(o(this.options.beforeShow),n=this,this.isAppended||(i=s(document.body).append(this.popover),u.on("resize.clockpicker"+this.id,function(){n.isShown&&n.locate()}),this.isAppended=!0),r=((this.input.prop("value")||this.options.default||"")+"").split(":"),"now"===r[0]&&(a=new Date(+new Date+this.options.fromnow),r=[a.getHours(),a.getMinutes()]),this.hours=+r[0]||0,this.minutes=+r[1]||0,this.spanHours.html(e(this.hours)),this.spanMinutes.html(e(this.minutes)),this.toggleView("hours"),this.locate(),this.isShown=!0,c.on("click.clockpicker."+this.id+" focusin.clockpicker."+this.id,function(t){var e=s(t.target);0===e.closest(n.popover).length&&0===e.closest(n.addon).length&&0===e.closest(n.input).length&&n.hide()}),c.on("keyup.clockpicker."+this.id,function(t){27===t.keyCode&&n.hide()}),o(this.options.afterShow))},r.prototype.hide=function(){o(this.options.beforeHide),this.isShown=!1,c.off("click.clockpicker."+this.id+" focusin.clockpicker."+this.id),c.off("keyup.clockpicker."+this.id),this.popover.hide(),o(this.options.afterHide)},r.prototype.toggleView=function(t,e){var n,r,i,u=!1;"minutes"===t&&"visible"===s(this.hoursView).css("visibility")&&(o(this.options.beforeHourSelect),u=!0),n="hours"===t,r=n?this.hoursView:this.minutesView,i=n?this.minutesView:this.hoursView,this.currentView=t,this.spanHours.toggleClass("text-primary",n),this.spanMinutes.toggleClass("text-primary",!n),i.addClass("clockpicker-dial-out"),r.css("visibility","visible").removeClass("clockpicker-dial-out"),this.resetClock(e),clearTimeout(this.toggleViewTimer),this.toggleViewTimer=setTimeout(function(){i.css("visibility","hidden")},C),u&&o(this.options.afterHourSelect)},r.prototype.resetClock=function(t){var e=this.currentView,n=this[e],r="hours"===e,o=Math.PI/(r?6:30),i=n*o,s=r&&n>0&&n<13?g:_,u=Math.sin(i)*s,c=-Math.cos(i)*s,a=this;l&&t?(a.canvas.addClass("clockpicker-canvas-out"),setTimeout(function(){a.canvas.removeClass("clockpicker-canvas-out"),a.setHand(u,c)},t)):this.setHand(u,c)},r.prototype.setHand=function(t,n,r,o){var i,u,c,a=Math.atan2(t,-n),h="hours"===this.currentView,p=Math.PI/(h||r?6:30),f=Math.sqrt(t*t+n*n),d=this.options,b=h&&f<(_+g)/2,m=b?g:_;if(d.twelvehour&&(m=_),a<0&&(a=2*Math.PI+a),i=Math.round(a/p),a=i*p,d.twelvehour?h?0===i&&(i=12):(r&&(i*=5),60===i&&(i=0)):h?(12===i&&(i=0),i=b?0===i?12:i:0===i?0:i+12):(r&&(i*=5),60===i&&(i=0)),this[this.currentView]!==i&&v&&this.options.vibrate&&(this.vibrateTimer||(navigator[v](10),this.vibrateTimer=setTimeout(s.proxy(function(){this.vibrateTimer=null},this),100))),this[this.currentView]=i,this[h?"spanHours":"spanMinutes"].html(e(i)),!l)return void this[h?"hoursView":"minutesView"].find(".clockpicker-tick").each(function(){var t=s(this);t.toggleClass("active",i===+t.html())});o||!h&&i%5?(this.g.insertBefore(this.hand,this.bearing),this.g.insertBefore(this.bg,this.fg),this.bg.setAttribute("class","clockpicker-canvas-bg clockpicker-canvas-bg-trans")):(this.g.insertBefore(this.hand,this.bg),this.g.insertBefore(this.fg,this.bg),this.bg.setAttribute("class","clockpicker-canvas-bg")),
u=Math.sin(a)*m,c=-Math.cos(a)*m,this.hand.setAttribute("x2",u),this.hand.setAttribute("y2",c),this.bg.setAttribute("cx",u),this.bg.setAttribute("cy",c),this.fg.setAttribute("cx",u),this.fg.setAttribute("cy",c)},r.prototype.done=function(){o(this.options.beforeDone),this.hide();var t=this.input.prop("value"),n=e(this.hours)+":"+e(this.minutes);this.options.twelvehour&&(n+=this.amOrPm),this.input.prop("value",n),n!==t&&(this.input.triggerHandler("change"),this.isInput||this.element.trigger("change")),this.options.autoclose&&this.input.trigger("blur"),o(this.options.afterDone)},r.prototype.remove=function(){this.element.removeData("clockpicker"),this.input.off("focus.clockpicker click.clockpicker"),this.addon.off("click.clockpicker"),this.isShown&&this.hide(),this.isAppended&&(u.off("resize.clockpicker"+this.id),this.popover.remove())},s.fn.clockpicker=function(t){var e=Array.prototype.slice.call(arguments,1);return this.each(function(){var n,o=s(this),i=o.data("clockpicker");i?"function"==typeof i[t]&&i[t].apply(i,e):(n=s.extend({},r.DEFAULTS,o.data(),"object"==typeof t&&t),o.data("clockpicker",new r(o,n)))})}}()},449:function(t,e,n){"use strict";function r(t,e){var n,r={};for(n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function u(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function c(t){return Array.isArray(t)?t:Array.from(t)}function a(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function l(t){var e=[{optionText:$.t("Market"),optionClass:"tv-buttons-group__option--padding_normal js-market i-active"},{optionText:$.t("Limit"),optionClass:"tv-buttons-group__option--padding_normal js-limit"},{optionText:$.t("Stop"),optionClass:"tv-buttons-group__option--padding_normal js-stop"}];return t.supportStopLimitOrders&&e.push({optionText:$.t("StopLimit"),optionClass:"tv-buttons-group__option--padding_normal js-stop-limit"}),(0,C.ticket)({body:(0,C.combine)(F({containerClass:"tv-ticket__field",content:(0,C.buttonsGroup)({containerClass:"tv-buttons-group--primary js-type",options:e})}),(0,C.control)({containerClass:"js-order-price",label:t.supportStopLimitOrders?$.t("Limit Price"):$.t("Price"),selector:L(),input:A(),output:j()}),t.supportStopLimitOrders?(0,C.control)({containerClass:"js-order-stop-price",label:$.t("Stop Price"),selector:L(),input:A(),output:j()}):"",(0,C.control)({
containerClass:"js-order-sl",label:(0,C.checkbox)({labelText:$.t("Stop Loss"),checkboxClass:"js-sl-checker"}),selector:L(),input:A(),output:j()}),(0,C.control)({containerClass:"js-order-tp",label:(0,C.checkbox)({labelText:$.t("Take Profit"),checkboxClass:"js-tp-checker"}),selector:L(),input:A(),output:j()}),(0,C.control)({containerClass:"js-order-qty",label:t.showQuantityInsteadOfAmount?$.t("Quantity"):$.t("Amount"),selector:(0,C.buttonsGroup)({containerClass:"tv-buttons-group--primary_ghost tv-buttons-group--size-small js-order-switch",options:[{optionText:$.t("Manual"),optionClass:"tv-buttons-group__option--padding_small"},{optionText:$.t("% Risk"),optionClass:"tv-buttons-group__option--padding_small"}]}),input:A(),output:(0,C.textLabel)({outputClass:"js-order-output",outputText:"0.00 %"})}),(0,C.control)({containerClass:"js-order-duration",label:$.t("Duration"),selector:R(),input:N(),output:I()}),F({containerClass:"js-custom-fields",content:""})),riskRewardClass:"risk-revard-js",riskClass:"risk-js",profitClass:"profit-js",doneText:$.t("Sell",{context:"trading"}),doneClass:"js-done"})}function h(t){var e,n,r,o,i,s,u,l,h,p,f,d,b,v,_,w,E,C,O,S,$,D,T,P,j,A,L,R,N,I,q=t.container,M=t.price$,F=t.custom$,U=t.initState$,Y=t.firstToSecond,B=t.secondToFirst,W=t.firstProps,z=t.secondProps,H=t.supportBrackets,K=t.switchClass,Q=void 0===K?".js-order-switch":K,G=t.inputClass,J=void 0===G?".js-order-input":G,Z=t.outputClass,X=void 0===Z?".js-order-output":Z,tt=t.errorChecker,et=void 0===tt?V({min:1,step:1}):tt,nt=t.createDisabled,rt=void 0!==nt&&nt,ot=t.formatOnInput,it=void 0!==ot&&ot,st={FIRST:1,SECOND:2},ut=q.querySelector(Q),ct=q.querySelector(J),at=q.querySelector(X);return H||([ut,at.parentNode].forEach(function(t){return t.classList.add("js-hidden")}),q.querySelector(".js-second-control").classList.add("tv-ticket__input--singlechild")),e=ut.querySelectorAll("div")[0],n=ut.querySelectorAll("div")[1],r=new k.Subject,o=U.delay(1).concat(r).publish(),i=F.filter(function(t){return void 0===t}).map(st.FIRST),s=k.Observable.fromEvent(e,"click",function(){return st.FIRST}),u=k.Observable.fromEvent(n,"click",function(){return st.SECOND}).withLatestFrom(F,function(t,e){return void 0===e?st.FIRST:t}),l=k.Observable.merge(s,u,i).startWith(st.FIRST).distinctUntilChanged(),h=o.map(function(t){return t.type}).publish(),p=new k.Subject,f=(0,x.createCustomNumberInput)({input:ct,state$:o,error$:p,leftMessageAlign:!H,onOff$:k.Observable.of(!rt),formatOnInput:it}),d=f.value$,b=f.error$,v=f.connect,_=f.subscribe,w=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e},E=F?[h,d,M,F.filter(function(t){return void 0!==t})]:[h,d,M],C=k.Observable.combineLatest.apply(k.Observable,a(E.concat(w))).publish(),O=k.Observable.combineLatest(h,d,w).publish(),S=function(t,e,n){return t.filter(function(t){return y(t,1)[0]===e}).map(function(t){var e=c(t),r=e.slice(1);return n.apply(void 0,a(r))})},$=S(C,st.SECOND,B).map(function(t){return(0,x.parseWithFormatter)(W.formatter,t)}).merge(S(C,st.FIRST,Y).map(function(t){
return(0,x.parseWithFormatter)(z.formatter,t)})).publish(),D=$.withLatestFrom(h,function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",e=arguments[1];return(e!==st.FIRST?(0,g.splitThousands)(t,","):t)+" "+(e===st.FIRST?"%":"")}),T=l.withLatestFrom($,function(t,e){return m({},t===st.FIRST?W:z,{type:t,value:e})}).publish(),P=S(C,st.SECOND,B).merge(S(O,st.FIRST,function(t){return t})).publish(),j=(0,x.makeObservableOffable)(k.Observable.merge(S(C,st.FIRST,Y),S(O,st.SECOND,function(t){return t})),F.map(function(t){return void 0!==t}).distinctUntilChanged()),A=j.value$,L=j.disposable,R=A.publish(),N=P.map(et).distinctUntilChanged(function(t){return t.text}),I=(0,x.combineErrors)([p,b],x.mergeErrors),{first$:P,second$:R,error$:I,mode$:l,subscribe:function(){var t=o.subscribe(function(t){t.type===x.INPUT_TYPE.PRICE?(e.classList.add("i-active"),n.classList.remove("i-active")):(e.classList.remove("i-active"),n.classList.add("i-active"))}),r=F.map(function(t){return void 0===t}).distinctUntilChanged().subscribe(function(t){t?(n.classList.add("i-disabled"),at.parentNode.classList.add("i-disabled")):(n.classList.remove("i-disabled"),at.parentNode.classList.remove("i-disabled"))}),i=D.subscribe(function(t){" %"!==t&&(at.textContent=t)}),s=_();return new k.CompositeDisposable(i,r,t,s,L)},connect:function(){return new k.CompositeDisposable(N.subscribe(p),$.connect(),R.connect(),P.connect(),O.connect(),C.connect(),h.connect(),v(),o.connect(),T.subscribe(r),T.connect())}}}function p(t){var e=t.container,n=t.quotes$,r=t.priceFormatter,o=t.spreadFormatter,i=e.querySelector(".js-bid"),s=e.querySelector(".js-ask"),u=e.querySelector(".js-spread");return n.subscribe(function(t){var e=+t.ask||+t.trade||0,n=+t.bid||+t.trade||0;i.textContent=r.format(n),s.textContent=r.format(e),u.textContent=(0,S.isNumber)(t.spread)?o.format(t.spread):r.format(e-n)})}function f(t,e){var n,r=$(t);return r.empty(),e.forEach(function(t){var e=$("<option>").attr("value",t.value).text(t.name);r.append(e)}),r.tvControlSelect(),n=r.parent(),n.toggleClass("js-hidden",1===e.length),n.parent().toggleClass("tv-ticket__input--no-selector",1===e.length),r}var d,b,v,m,y,_,g,w,E,C,k,x,O,S,D,T,P,j,A,L,R,N,I,q,M,F,V,U,Y,B,W,z;Object.defineProperty(e,"__esModule",{value:!0}),e.Ticket=void 0,d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),v=function t(e,n,r){var o,i,s;return null===e&&(e=Function.prototype),void 0===(o=Object.getOwnPropertyDescriptor(e,n))?(i=Object.getPrototypeOf(e),null===i?void 0:t(i,n,r)):"value"in o?o.value:void 0!==(s=o.get)?s.call(r):void 0},m=Object.assign||function(t){var e,n,r;for(e=1;e<arguments.length;e++){n=arguments[e]
;for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},y=function(){function t(t,e){var n,r,o=[],i=!0,s=!1,u=void 0;try{for(n=t[Symbol.iterator]();!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,u=t}finally{try{!i&&n.return&&n.return()}finally{if(s)throw u}}return o}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),n(1437),_=n(432),g=n(183),w=n(431),n(1438),E=n(96),C=n(1381),k=n(1359),x=n(1386),O=n(6),S=n(15),D=null,n(1440),T=(0,O.getLogger)("Trading.OrderDialog"),P='\n<div class="tv-ticket-header js-theader">\n\t<div class="tv-ticket-header__wrapper">\n\t\t<div class="tv-ticket-header__bid js-bid-button">\n\t\t\t<div class="tv-ticket-header__title">'+$.t("Bid")+'</div>\n\t\t\t<div class="tv-ticket-header__value js-bid">...</div>\n\t\t\t<span class="tv-ticket-header__button tv-button tv-button--default tv-button--size_xsmall js-bid-label">'+$.t("SELL")+'</span>\n\t\t</div>\n\t\t<div class="tv-ticket-header__ask js-ask-button">\n\t\t\t<div class="tv-ticket-header__title">'+$.t("Ask")+'</div>\n\t\t\t<div class="tv-ticket-header__value js-ask">...</div>\n\t\t\t<span class="tv-ticket-header__button tv-button tv-button--default tv-button--size_xsmall js-ask-label">'+$.t("BUY")+'</span>\n\t\t</div>\n\t</div>\n\t<div class="tv-ticket-header__spread js-spread">...</div>\n</div>',j=function(){return(0,C.textLabel)({outputClass:"js-order-output"})},A=function(){return(0,C.errorLabel)({element:(0,C.numberInput)({containerClass:"js-order-input",inputClass:"js-input",upClass:"js-input-up",downClass:"js-input-down"}),containerClass:""})},L=function(){return(0,C.buttonsGroup)({containerClass:"tv-buttons-group--primary_ghost tv-buttons-group--size-small js-order-switch",options:[{optionText:$.t("Price"),optionClass:"tv-buttons-group__option--padding_small"},{optionText:$.t("Pips"),optionClass:"tv-buttons-group__option--padding_small"}]})},R=function(){return(0,C.comboBox)({outputClass:"js-duration-type"})},N=function(){return(0,C.datePicker)({outputClass:"js-duration-date"})},I=function(){return(0,C.timePicker)({outputClass:"js-duration-time"})},q=function(t,e,n,r){return(0,C.textInput)({id:"custom-field-input-"+t,type:e,containerClass:"tv-ticket__custom-field-with-checkbox-input",inputClass:"js-custom-field-input",placeHolder:n,value:r})},M=function(t,e,n){return F({content:(0,C.checkbox)({labelText:e,checkboxClass:"js-custom-field-checkbox-"+t,checked:n}),containerClass:"tv-ticket__custom-field-checkbox"})},F=function(t){var e=t.content;return'\n<div class="'+t.containerClass+'">'+e+"</div>\n"},V=function(t){var e=t.min,n=void 0===e?null:e,r=t.max,o=void 0===r?null:r,i=t.step,s=void 0===i?null:i;return function(t){var e=(0,x.checkQty)(n,o,s,t);return!1===e.res?{hasError:!0,text:e.error}:{hasError:!1}}},U={},Y=function(t){return function(e,n){return e<=0||n<=0?{text:t,hasError:!0}:{text:"",hasError:!1}}},
B=Y($.t("If the position is long, stop loss order must be below entry price. If short, then higher.")),W=Y($.t("If the position is long, take profit order must be above entry price. If short, then lower.")),z=!1,e.Ticket=function(t){function e(){return i(this,e),s(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return u(e,t),b(e,[{key:"open",value:function(t,n){var i,s,u,c,a,l,b,_,g,O,T=this,P=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,j=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return this.opened?(this.focus(),this.toTop(),this._log("Open rejected","Dialog is already open"),Promise.reject()):z?(this._log("Open rejected","Dialog is already opening"),Promise.reject()):(z=!0,i=this.el,s=!!t.id,u=D.realtimeProvider(),c=D.activeBroker(),a=c.metainfo().configFlags,l=a.supportOrderBrackets,b=a.supportStopLimitOrders,_=a.supportEditAmount,g=void 0!==j&&Array.isArray(j.customFields)&&1===j.customFields.length&&j.customFields[0].value&&j.customFields[0].customInfo&&void 0!==j.customFields[0].customInfo.checkboxTitle,O="",Promise.all([c.symbolInfo(t.symbol),c.accountInfo(),c.quotesSnapshot(t.symbol),c.formatter(t.symbol),c.spreadFormatter(t.symbol)]).then(function(A){var L,R,N,I,F,U,Y,H,K,Q,G,J,Z,X,tt,et,nt,rt,ot,it,st,ut,ct,at,lt,ht,pt,ft,dt,bt,vt,mt,yt,_t,gt,wt,Et,Ct,kt,xt,Ot,St,$t,Dt,Tt,Pt,jt,At,Lt,Rt,Nt,It,qt,Mt,Ft,Vt,Ut,Yt,Bt,Wt,zt,Ht,Kt,Qt,Gt,Jt,Zt,Xt,te,ee,ne,re,oe,ie,se,ue,ce,ae,le,he,pe,fe,de,be,ve,me,ye,_e,ge,we,Ee,Ce,ke,xe,Oe,Se,$e,De,Te,Pe,je,Ae,Le,Re,Ne,Ie,qe,Me,Fe,Ve,Ue,Ye,Be,We,ze,He,Ke,Qe,Ge,Je,Ze,Xe=y(A,5),tn=Xe[0],en=Xe[1],nn=Xe[2],rn=Xe[3],on=Xe[4];if(T.setTitle("<strong>"+(t.brokerSymbol||t.symbol)+(tn.description?",":"")+"</strong> "+tn.description,!0),R=k.Observable.fromEventPattern(function(e){return u.subscribeRealtime(t.symbol,e)},function(e){return u.unsubscribeRealtime(t.symbol,e)},function(t,e){return e}).publish(),N=k.Observable.fromEventPattern(function(t){return c.subscribeEquity(t)},function(t){return c.unsubscribeEquity(t)},function(t,e){return e}).publish(),I=k.Observable.fromEventPattern(function(t){return D.onConnectionStatusChange.subscribe(null,t)},function(t){return D.onConnectionStatusChange.unsubscribe(null,t)},function(t){return t.status||t}),F=k.Observable.fromEventPattern(function(t){return c.orderUpdate.subscribe(null,t)},function(t){return c.orderUpdate.unsubscribe(null,t)}).filter(function(e){return e.id===t.id}).map(function(t){return t.status}),U=i.querySelector(".js-bid-button"),Y=i.querySelector(".js-ask-button"),H=s?k.Observable.empty():k.Observable.fromEvent(U,"click",function(){return E.SIDE.SELL}),K=s?k.Observable.empty():k.Observable.fromEvent(Y,"click",function(){return E.SIDE.BUY}),Q=H.merge(K).startWith(t.side||E.SIDE.SELL).distinctUntilChanged().publish(),G=k.Observable.combineLatest(Q,R,function(t,e){return t===E.SIDE.SELL?+e.bid||+e.trade||0:+e.ask||+e.trade||0}).publish(),J=i.querySelector(".js-done"),Z=new w.ButtonLoader(J),X=i.querySelector(".js-ask-label"),tt=i.querySelector(".js-bid-label"),
et=i.querySelector(".js-order-duration"),nt=et.querySelector(".js-duration-date"),rt=et.querySelector(".js-duration-time"),ot=t.duration?t.duration.type:null,it=t.duration?t.duration.datetime:null,st=c.metainfo().durations,(0,S.isArray)(st)&&0!==st.length&&(T.durationComboControl&&T.durationComboControl.tvControlSelect("destroy"),ut=et.querySelector(".js-duration-type"),T.durationComboControl=f(ut,st),T.durationComboControl.tvControlSelect("val",ot||st[0].value),ct=st.some(function(t){return t.hasDatePicker}),at=ct&&st.some(function(t){return t.hasTimePicker}),nt.classList.toggle("i-hidden",!ct),rt.classList.toggle("i-hidden",!at)),lt=i.querySelector(".js-custom-fields"),g&&(ht=j.customFields[0],pt=ht.customInfo.asterix?"password":"text",ft=q(ht.id,pt,ht.placeHolder,ht.value.text),dt=M(ht.id,ht.customInfo.checkboxTitle,ht.value.checked),O=ht.id,lt.innerHTML=(0,C.controlGroup)({id:ht.id,containerClass:"js-custom-field-control-group",containerWrapperClass:"tv-ticket__group-wrapper",label:ht.title,controls:[ft,dt]})),bt=function(t){t===E.SIDE.SELL?(Y.classList.remove("i-active"),X.classList.add("tv-button--default"),X.classList.remove("tv-button--primary"),U.classList.add("i-active"),tt.classList.add("tv-button--danger"),tt.classList.remove("tv-button--default"),tt.classList.remove("i-disabled"),J.classList.remove("tv-button--primary"),J.classList.add("tv-button--danger"),Z.contentHtml($.t("Sell",{context:"trading"}))):(U.classList.remove("i-active"),tt.classList.add("tv-button--default"),tt.classList.remove("tv-button--danger"),Y.classList.add("i-active"),X.classList.add("tv-button--primary"),X.classList.remove("tv-button--default"),X.classList.remove("i-disabled"),J.classList.remove("tv-button--danger"),J.classList.add("tv-button--primary"),Z.contentHtml($.t("Buy",{context:"trading"}))),s?(Z.contentHtml($.t("Modify")),et.classList.add("i-disabled"),t===E.SIDE.BUY?tt.classList.add("i-disabled"):X.classList.add("i-disabled")):(tt.classList.remove("i-disabled"),X.classList.remove("i-disabled"))},vt=i.querySelector(".js-type"),mt=i.querySelector(".js-market"),yt=i.querySelector(".js-limit"),_t=i.querySelector(".js-stop"),gt=i.querySelector(".js-stop-limit"),wt=s?k.Observable.empty():k.Observable.fromEvent(mt,"click",function(){return E.ORDERTYPE.MARKET}),Et=s?k.Observable.empty():k.Observable.fromEvent(yt,"click",function(){return E.ORDERTYPE.LIMIT}),Ct=s?k.Observable.empty():k.Observable.fromEvent(_t,"click",function(){return E.ORDERTYPE.STOP}),kt=s||!gt?k.Observable.empty():k.Observable.fromEvent(gt,"click",function(){return E.ORDERTYPE.STOPLIMIT}),xt=k.Observable.merge(Et,wt,Ct,kt,k.Observable.of(t.type||E.ORDERTYPE.MARKET).delay(10)).distinctUntilChanged().publish(),Ot=i.querySelector(".js-order-price"),St=i.querySelector(".js-order-stop-price"),$t=i.querySelector(".js-order-stop-price input"),Dt=i.querySelector(".js-order-qty"),Tt=i.querySelector(".js-sl-checker"),Pt=i.querySelector(".js-tp-checker"),jt=(0,
x.createDurationController)(et,i,ot,it,st,xt,T.durationComboControl,s,a.durationForMarketOrders,a.supportModifyDuration),L={},o(L,E.ORDERTYPE.MARKET,mt),o(L,E.ORDERTYPE.LIMIT,yt),o(L,E.ORDERTYPE.STOP,_t),At=L,gt&&(At[E.ORDERTYPE.STOPLIMIT]=gt),Lt=function(e){vt.querySelector(".i-active").classList.remove("i-active"),e===E.ORDERTYPE.MARKET?mt.classList.add("i-active"):e===E.ORDERTYPE.LIMIT?yt.classList.add("i-active"):e===E.ORDERTYPE.STOP?_t.classList.add("i-active"):gt.classList.add("i-active"),e===E.ORDERTYPE.MARKET&&!a.supportMarketBrackets||void 0!==t.parentType&&null!==t.parentType?(Tt.setAttribute("disabled","disabled"),Pt.setAttribute("disabled","disabled")):(Tt.removeAttribute("disabled"),Pt.removeAttribute("disabled")),s?Object.values(At).forEach(function(e){e!==At[t.type]&&e.classList.add("i-disabled")}):Object.values(At).forEach(function(t){return t.classList.remove("i-disabled")})},Rt=tn.pipSize,Nt={step:1,formatter:new x.NumericFormatter(tn.pipSize!==tn.minTick?1:0)},It=m({},Nt,{min:.1}),qt={step:tn.minTick,min:tn.minTick,formatter:rn},Mt=function(t,e,n){return n*(t-e)/Rt},Ft=function(t,e,n){return n*t*Rt+e},Vt=k.Observable.combineLatest(xt,Q,function(t,e){return{type:t,side:e}}).map(function(t){var e=t.type,n=t.side;return e===E.ORDERTYPE.LIMIT&&n===E.SIDE.SELL||(e===E.ORDERTYPE.STOP||e===E.ORDERTYPE.STOPLIMIT)&&n===E.SIDE.BUY?1:-1}).publish(),Ut=Q.map(function(t){return t===E.SIDE.BUY?1:-1}).publish(),Yt=t.limitPrice||!b&&t.stopPrice||t.price||nn.trade||nn.bid||nn.ask||0,Bt=t.stopPrice||t.price||t.limitPrice||nn.trade||0,Wt={pipsProps:It,priceProps:qt,priceToPips:Mt,pipsToPrice:Ft,orderType$:xt},zt={type:x.INPUT_TYPE.PRICE,value:(0,x.parseWithFormatter)(qt.formatter,Yt),step:qt.step,formatter:qt.formatter},Ht={type:x.INPUT_TYPE.PRICE,value:(0,x.parseWithFormatter)(qt.formatter,Bt),step:qt.step,formatter:qt.formatter},Kt=b?(0,x.createPriceController)(m({},Wt,{container:St,custom$:Ut,onOff$:xt.map(function(t){return t===E.ORDERTYPE.STOP||t===E.ORDERTYPE.STOPLIMIT}),price$:G,initState$:k.Observable.of(Ht),errorChecker:function(t,e){return t<0||e<0?{text:$.t("Order price is not appropriate for this order type/direction."),hasError:!0}:{text:"",hasError:!1}}})):k.Observable.empty().publish(),Qt=b?Kt.price$:k.Observable.of(0),Gt=k.Observable.combineLatest(xt,Qt,G,function(t,e,n){return t===E.ORDERTYPE.STOPLIMIT?e:n}).publish(),Jt=xt.map(function(t){return t===E.ORDERTYPE.STOPLIMIT}),Zt=(0,x.createPriceController)(m({},Wt,{pipsProps:Nt,container:Ot,custom$:Vt,onOff$:xt.map(function(t){return b?t===E.ORDERTYPE.LIMIT||t===E.ORDERTYPE.STOPLIMIT:t!==E.ORDERTYPE.MARKET}),errorChecker:function(t,e,n,r,o){var i,s,u={text:"",hasError:!1};return n?u:(i="forex"===tn.type,s=Math.abs(r-t)>t/2&&t>1,t<0||e<0&&(o!==E.ORDERTYPE.LIMIT||i||s)?{text:$.t("Order price is not appropriate for this order type/direction."),hasError:!0}:u)},price$:Gt,initState$:k.Observable.of(zt),anyPriceValid$:Jt})),Xt=Zt.price$,te=k.Observable.combineLatest(G,Xt,Qt,xt,function(t,e,n,r){return r===E.ORDERTYPE.MARKET?t:r===E.ORDERTYPE.STOP&&b?n:e
}).distinctUntilChanged().publish(),ee=k.Observable.combineLatest(G,Xt,Qt,xt,function(t,e,n,r){var o=b?n:e;return{price:t,limitPrice:r===E.ORDERTYPE.LIMIT||r===E.ORDERTYPE.STOPLIMIT?e:void 0,stopPrice:r===E.ORDERTYPE.STOP||r===E.ORDERTYPE.STOPLIMIT?o:void 0}}).distinctUntilChanged().publish(),ne=(0,x.makeObservableOffable)(Zt.error$,xt.map(function(t){return t!==E.ORDERTYPE.MARKET&&(!b||t!==E.ORDERTYPE.STOP)}),{text:"",hasError:!1}),re=ne.value$,oe=ne.disposable,ie=b?k.Observable.combineLatest(Kt.error$,xt,function(t,e){return e===E.ORDERTYPE.MARKET||e===E.ORDERTYPE.LIMIT?{}:t}).distinctUntilChanged().publish():k.Observable.of({}).publish(),se=function(t){return E.SIDE.BUY===t?1:-1},ue=(0,x.createCheckBox)({container:Tt,startState:!!t.stopLoss}),ce=(0,x.createCheckBox)({container:Pt,startState:!!t.takeProfit}),ae=(0,x.makeObservableOffable)(ue.value$,xt.map(function(e){return(e!==E.ORDERTYPE.MARKET||a.supportMarketBrackets)&&!t.parentType})),le=ae.value$,he=ae.disposable,ue.value$=le,pe=(0,x.makeObservableOffable)(ce.value$,xt.map(function(t){return t!==E.ORDERTYPE.MARKET||a.supportMarketBrackets})),fe=pe.value$,de=pe.disposable,ce.value$=fe,be=i.querySelector(".js-order-sl"),ve=i.querySelector(".js-order-tp"),me=i.querySelector(".js-order-sl .js-input"),ye=i.querySelector(".js-order-tp .js-input"),l||[be,ve].forEach(function(t){return t.classList.add("js-hidden")}),T.firstFocusControl=null,s&&P)switch(P){case E.TICKETFOCUS.STOPPRICE:T.firstFocusControl=$t;break;case E.TICKETFOCUS.STOPLOSS:T.firstFocusControl=t.stopLoss&&me;break;case E.TICKETFOCUS.TAKEPROFIT:T.firstFocusControl=t.takeProfit&&ye}return _e=t.stopLoss?m({},qt,{type:x.INPUT_TYPE.PRICE,value:(0,x.parseWithFormatter)(qt.formatter,t.stopLoss)}):m({},It,{type:x.INPUT_TYPE.PIPS,value:25}),ge=t.takeProfit?m({},qt,{type:x.INPUT_TYPE.PRICE,value:(0,x.parseWithFormatter)(qt.formatter,t.takeProfit)}):m({},It,{type:x.INPUT_TYPE.PIPS,value:75}),we=(0,x.createPriceController)(m({},Wt,{errorChecker:B,container:be,price$:te,custom$:Q.map(function(t){return-1*se(t)}),initState$:k.Observable.of(_e),onOff$:ue.value$})),Ee=(0,x.createPriceController)(m({},Wt,{errorChecker:W,container:ve,price$:te,custom$:Q.map(function(t){return se(t)}),initState$:k.Observable.of(ge),onOff$:ce.value$})),Ce=(0,x.combineControllerAndCheckbox)(we,ue),ke=Ce.price$,xe=Ce.pips$,Oe=Ce.error$,Se=Ce.mode$,$e=r(Ce,["price$","pips$","error$","mode$"]),De=(0,x.combineControllerAndCheckbox)(Ee,ce),Te=De.price$,Pe=De.pips$,je=De.error$,Ae=De.mode$,Le=r(De,["price$","pips$","error$","mode$"]),Re=function(t,e,n){return Math.round(t*e/n/tn.pipValue/100/tn.qty.step)*tn.qty.step},Ne=function(t,e,n){return e?t*n*tn.pipValue*100/e:0},Ie=h({container:Dt,price$:N,custom$:xe,initState$:k.Observable.of({type:1,value:t.qty,step:tn.qty.step,min:tn.qty.min,max:tn.qty.max,formatter:new x.QtyFormatter(tn.qty)}),firstProps:{start:t.qty,step:tn.qty.step,min:tn.qty.min,max:tn.qty.max,formatter:new x.QtyFormatter(tn.qty)},secondProps:{start:2,step:.1,min:.01,max:100,formatter:new x.NumericFormatter(2)},
errorChecker:V(tn.qty),secondToFirst:Re,firstToSecond:Ne,supportBrackets:l,createDisabled:s&&!_,formatOnInput:!0}),qe=Ie.first$,Me=(0,x.combineErrors)([re,Oe,je,Ie.error$,ie,jt.durationDateError$,jt.durationTimeError$],function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every(function(t){return!t.hasError})}),Fe=k.Observable.combineLatest(Q,xt,ee,ke,Te,qe,jt.duration$,Zt.mode$,ue.value$,Se,ce.value$,Ae,Ie.mode$,function(e,n,r,o,i,s,u,c,l,h,p,f,d){var b,v,y,_,g,w=n!==E.ORDERTYPE.MARKET||a.supportMarketBrackets,C=m({},t,r,{side:e,type:n,stopLoss:w?o:null,takeProfit:w?i:null,qty:s,priceMode:c,slCheckbox:l,slMode:h,tpCheckbox:p,tpMode:f,qtyMode:d});return u.type&&(C.duration={type:u.type},b=st.find(function(t){return t.value===u.type}),b.hasTimePicker?(v=u.dateStr+"T"+u.timeStr+":00Z",y=new Date(v),C.duration.datetime=y.valueOf()-(0,x.localOffset)()):b.hasDatePicker&&(_=u.dateStr+"T00:00:00Z",g=new Date(_),C.duration.datetime=g.valueOf())),C}),Ve=!1,Ue=!1,Ye=(0,x.createDoneButton)({buttonLoader:Z,result$:Fe,fire$:k.Observable.fromEvent(document,"keyup",function(t){return t.keyCode}).filter(function(t){return 13===t&&T.isFocused()}),enable$:Me,handler:function(t){var e,r,o,i,s,u,c,a,l;if(!Ve)return D.suggestedQty().setValue(t.symbol,t.qty),e=t.side>0?" Buy":" Sell",r=["Limit","Market","Stop","StopLimit"],o=["Price","Pips"],i=["Manual","Risk"],s=[" Disabled"," Active"],u={Price:{active:s[+(t.type!==E.ORDERTYPE.MARKET)],mode:o[t.priceMode-1]},SL:{active:s[+t.slCheckbox],mode:o[t.slMode-1]},TP:{active:s[+t.tpCheckbox],mode:o[t.tpMode-1]},Quantity:{mode:i[t.qtyMode-1]}},Object.keys(u).forEach(function(n){D.trackEvent("Order ticket",e+" "+r[t.type-1]+" "+n+(u[n].active||""),u[n].mode)}),Ve=!0,g?(c=document.querySelector(".js-custom-field-checkbox-"+O),a=document.querySelector("#custom-field-input-"+O),l={},l[O]={checked:c.checked,text:a.value.replace(/&quote;/g,'"')},n(t,l)):n(t)}}),Be=Ye.result$,We=r(Ye,["result$"]),ze=i.querySelector(".risk-revard-js"),He=i.querySelector(".risk-js"),Ke=i.querySelector(".profit-js"),Qe=(0,x.createRiskHelper)({container:He,qty$:qe,pips$:xe,equity$:N,pipValue:tn.pipValue,currencySign:en.currencySign,text:$.t("Risk")}),Ge=(0,x.createRiskHelper)({container:Ke,qty$:qe,pips$:Pe,equity$:N,pipValue:tn.pipValue,currencySign:en.currencySign,text:$.t("Reward")}),Je=(0,x.createRiskRewardHelper)({container:ze,slPips$:xe,tpPips$:Pe}),Ze=[oe,p({container:T.el.querySelector(".js-theader"),quotes$:R,priceFormatter:rn,spreadFormatter:on}),Ge.subscribe(),Qe.subscribe(),Je.subscribe(),I.subscribe(function(t){t!==E.CONNECTSTATUSES.CONNECTED&&T.close()}),F.subscribe(function(t){t!==E.ORDERSTATUS.WORKING&&t!==E.ORDERSTATUS.INACTIVE&&(Ve?Ue=!0:T.close())}),Be.subscribe(function(t){if("error"===t.status){var e="";return"string"==typeof t.details?e=t.details:"object"===d(t.details)&&"string"==typeof t.details.message&&(e=t.details.message),e&&("."!==e.slice(-1)&&(e+="."),D.showErrorNotification($.t("Order rejected"),e+" "+$.t("To learn more, please contact your broker."))),
Ue&&(Ue=!1,T.close()),void(Ve=!1)}T._resolve(!0),T.close()}),xt.subscribe(Lt),Q.subscribe(bt),Ie.subscribe(),Le.subscribe(),$e.subscribe(),de,he,We.subscribe(),Zt.subscribe(),jt.subscribe(),Kt.subscribe(),We.connect(),Ie.connect(),$e.connect(),Le.connect(),Vt.connect(),Ut.connect(),Zt.connect(),Gt.connect(),Kt.connect(),te.connect(),ee.connect(),ie.connect(),xt.connect(),G.connect(),Q.connect(),R.connect(),N.connect(),jt.connect()],T.once("beforeClose",function(){Ze.forEach(function(t){return t.dispose()}),T._reject()}),T.once("afterClose",function(){Ve=!1}),v(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"open",T).call(T),z=!1,new Promise(function(t,e){T._resolve=t,T._reject=e})},function(t){T._log("Open dialog",t),z=!1}))}},{key:"_log",value:function(t,e){T.logNormal((D.activeBroker()?D.activeBroker().metainfo().id+" ":"")+t+" - "+e)}}],[{key:"get",value:function(t){D=t;var n=D.activeBroker().metainfo();return U[n.id]||(U[n.id]=new e({title:"ticket",width:450,destroyOnClose:!1,closeOnOutsideClick:!1,content:P+l(n.configFlags),contentWrapTemplate:"<div>"})),U[n.id]}}]),e}(_.TVPopup)}});