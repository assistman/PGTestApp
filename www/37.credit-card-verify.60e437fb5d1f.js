webpackJsonp([37],{1920:function(e,i,t){var a;void 0!==(a=function(e,i,a){function s(e){return new n(e,o)}var n=t(2748),o=t(2412);a.exports=s}.call(i,t,i,e))&&(e.exports=a)},2209:function(e,i,t){var a;void 0!==(a=function(e,i,t){t.exports={MONDAY:"MONDAY",TUESDAY:"TUESDAY",WEDNESDAY:"WEDNESDAY",THURSDAY:"THURSDAY",FRIDAY:"FRIDAY",DEFAULT_FROM_HOURS:10,DEFAULT_TO_HOURS:18}}.call(i,t,i,e))&&(e.exports=a)},2400:function(e,i,t){(function(a,s){function n(e,i,t){return i in e?Object.defineProperty(e,i,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[i]=t,e}var o;void 0!==(o=function(e,i,a){var s,o=t(4),d=t(0),l=t(2),c=t(7),r=t(9),p=t(2401),u=t(24),v=t(2402),f=t(2405),m=t(2407),h=t(2408),_=t(30),b=t(79),C=t(185),g=t(218),y=t(2409),D=t(3),x=t(215),E=t(41),T=t(8),O=t(850),w=t(811),I=t(10),S=I.REJECTED,k=I.PENDING,R=I.APPROVED,A=I.IN_PROCESS,P=["driver_license","passport","national_id"],F=u.extend({name:"verification-center",state:{opened_poi:!1,opened_por:!1,opened_cc:!1,opened_nci:!1,opened_other:!1,markedDocumentsAsUploaded:(s={},n(s,w.PROOF_OF_ID,!1),n(s,w.PROOF_OF_RESIDENCE,!1),s)},initialize:function(e,i){var t,a=this;this.model=new p,this.verifyPopupTemplate=d.template(i),e.headerStyle="wizard",u.prototype.initialize.apply(this,arguments),this.docTypes=(t={},n(t,w.PROOF_OF_ID,"poi"),n(t,w.PROOF_OF_RESIDENCE,"por"),t),c.getUserData().load().then(function(){Promise.all([a.getCC(),c.getUserDocumentsModel().load()]).then(function(){a.getDocStatuses(),a.initECDD(),a.initNCI(),a.render()})})},getDocStatuses:function(){var e=this;if(this.docStatuses={poi:{status:-1,expirationDate:null},por:{status:-1,expirationDate:null}},c.getUserDocumentsModel().documentsApprovedByEV())return void(this.documentsApprovedByEV=!0);var i=c.getUserDocumentsModel().getDocuments();d.isArray(i)&&d.each(i,function(i){e.docStatuses[e.docTypes[i.type]].status=i.status,i.status===O.PENDING_EXPIRATION&&(e.docStatuses[e.docTypes[i.type]].expirationDate=i.expirationDate>0?D(i.expirationDate).utc().format("DD/MM/YYYY"):"")})},getCC:function(){var e=this;return c.getUserCreditCards().load().then(function(i){if(i.data.error)return Promise.reject();e.ccList=d.filter(i.data,function(e){return e.status!==R})})},initECDD:function(){var e=r.isComplianceECDDCheckEnabled();this.notEEACompliance=e&&c.getUserData().isNotEEACompliance(),this.pendingECDD=e&&c.getUserData().isPendingComplianceGroundPendingECDD(),this.pendingPhoneVerification=e&&c.getUserData().isPendingComplianceGroundPhoneVerification()},initNCI:function(){this.nciEnabled=r.isComplianceNationalCountryIdentifierEnabled(),this.nciValue=this.nciEnabled&&c.getUserData().getTinData().nationalCountryIdentifier,this.nciStatus=this.nciEnabled&&c.getUserData().getTinData().nationalCountryIdentifierStatus,this.nciInputDisabled=!(!this.nciEnabled||this.nciStatus!==R)},events:function(){return d.extend({},d.result(u.prototype,"events"),{"change .browse":"previewFile","click .fn-toggle":"toggle","click .fn-done":"closePopup","click .fn-verify":"approveCC","click .fn-verify-mobile":"approveCC_mobile","change .browse-mobile":"uploadMobileFile","input input[name=nci_code]":"changeNCI","click .fn-nci-update":"updateNCI"})},getOptions:function(e){return d.extend({},d.result(u.prototype,"getOptions"),{isHeaderShowed:!0,caption:__("verification_center.popup.title"),previousCaption:__("actions.back"),headerStyle:"wizard"},e)},setState:function(e){this.state=d.extend({},this.state,e)},toggle:function(e){var i="opened_"+e.currentTarget.dataset.doc;this.setState(n({},i,!this.state[i]));var t=o(e.currentTarget.parentNode),a=t.find(".fieldset-content")[0];this.state[i]?(a.style.maxHeight=a.style.maxHeight?null:a.scrollHeight+a.scrollHeight/2+"px",a.style.opacity=1,t.addClass("field-fieldset-opened")):(a.style.maxHeight=null,a.style.opacity=0,t.removeClass("field-fieldset-opened"))},previewFile:function(e){var i=e.currentTarget.files[0];if(i){var t=e.currentTarget.getAttribute("data-id").indexOf("poi")>-1,a=e.currentTarget.getAttribute("data-id").indexOf("por")>-1,s=this.$el.find(".por-error"),n=this.$el.find(".poi-error");E.uploadDocumentsFileExt.test(i.name)&&i.size<E.uploadDocumentsFileMaxSize?(t&&n.addClass("hidden"),a&&s.addClass("hidden"),this.sendFile(e.currentTarget)):(t&&n.removeClass("hidden"),a&&s.removeClass("hidden"))}},sendFile:function(e){var i=this,t=e.form;if(o(t).find("div").find(".upload").val()){o(t).find(".upload").attr("data-id").indexOf("poi")>-1&&localStorage.setItem("poidoc",this.$el.find("div[name=poi_select]").find("select").val()),o(t).find(".upload").attr("data-id").indexOf("por")>-1&&localStorage.setItem("pordoc",this.$el.find("div[name=por_select]").find("select").val());var a=o(t).find("[name=docType]").val(),s=new FormData(t);this.model.uploadDocument(a,s).then(function(){i.markDocumentAsUploaded(a),i.openSchedulePopup(a),o(t).find("span").html(__("verification_center.update_file"));var e=o(t).closest(".verification-wrapper");o(e).find(".in-review").hasClass("hidden")&&(o(e).find(".upload-status").find("div").addClass("hidden"),o(e).find(".upload-status").find(".in-review").removeClass("hidden"))}).catch(function(){o(t).find(".upload").attr("data-id").indexOf("poi")>-1&&(o(t).find("input[data-id=poi-front-img]").val(""),o(t).find("input[data-id=poi-back-img]").val("")),o(t).find(".upload").attr("data-id").indexOf("por")>-1&&o(t).find("input[data-id=por-front-img]").val("")})}},uploadMobileFile:function(e){var i=e.currentTarget.files[0];if(i){var t=this.$el.find(".mobile-upload-error");E.uploadDocumentsFileExt.test(i.name)&&i.size<E.uploadDocumentsFileMaxSize?(t.addClass("hidden"),this.sendMobileFile(e.currentTarget.form,i)):t.removeClass("hidden")}},sendMobileFile:function(e){var i=this,t=o(e).find("div").find(".upload").val(),a=o(e).closest(".fieldset-content");if(t){this.showUploadLoading();var s=new FormData(e),n=o(e).find("[name=docType]").val(),d=o(a).find(".mobile-upload-status");d.addClass("hidden"),s.append("secret",c.getUserData().getCrmboCustomer().password),this.model.uploadDocument(n,s).then(function(){i.hideUploadLoading(),i.showMobileStatus(e,d),i.markDocumentAsUploaded(n),i.openSchedulePopup(n),e.previousElementSibling&&e.previousElementSibling.setAttribute("class","doc-uploaded"),d.removeClass("hidden").addClass("in-review").find(".text").html(__("verification_center.status.review"))}).catch(function(){i.hideUploadLoading(),o(e).find(".upload").attr("data-id").indexOf("poi")>-1&&(o(e).find("input[data-id=poi-front-img]").val(""),o(e).find("input[data-id=poi-back-img]").val("")),o(e).find(".upload").attr("data-id").indexOf("por")>-1&&o(e).find("input[data-id=por-front-img]").val("")})}},openSchedulePopup:function(e){var i=this;r.isPorScheduleCallEnabled()&&e===w.PROOF_OF_RESIDENCE&&c.getUserData().isNotEEACompliance()&&!c.getUserDocumentsModel().get("callScheduled")&&(this.schedulePopupView=new y({parent:o("body"),onClose:function(){return i.schedulePopupView=null}}))},loadCreditCardsAndRenderCCBlockIfNeeded:function(){var e=this;this.getCC().then(function(){d.isEmpty(e.ccList)?(e.verifyBlockCC.hide(),e.verifyBlockCCMobile.hide()):(e.verifyBlockCC.reRender(e.ccList),e.verifyBlockCCMobile.reRender(e.ccList))}).catch(function(){x(function(){return e.close()})})},approveCC:function(){var e=document.getElementById("cc_verify"),i=e.options[e.selectedIndex].value;return this.$el.find(".verify-btn").addClass("hidden"),this.model.approveCreditCard(i).then(this.approveCreditCardSuccess.bind(this)).catch(function(e){return Promise.reject()})},approveCreditCardSuccess:function(){this.$el.find(".cc-upload-status").removeClass("hidden"),c.getUserDocumentsModel().load().then(function(){return l.trigger("sm","c_verify")}),this.loadCreditCardsAndRenderCCBlockIfNeeded()},approveCC_mobile:function(){var e=this,i=document.getElementById("cc_verify_mobile"),t=i.options[i.selectedIndex].value,a=i.options[i.selectedIndex].text;return this.$el.find(".fn-verify-mobile").addClass("hidden"),this.model.approveCreditCard(t).then(function(t){o(i).parent().addClass("hidden"),e.$el.find(".cc-verified").removeClass("hidden").find(".cc-number").html(a),c.getUserDocumentsModel().load().then(function(){return l.trigger("sm","c_verify")}),e.loadCreditCardsAndRenderCCBlockIfNeeded()}).catch(function(e){return Promise.reject()})},check_upload:function(){this.docStatuses.poi.status===O.APPROVED&&(this.$el.find("div[name='poi_select']").addClass("field-disabled"),this.$el.find("div[name='poi_select'] select").attr("disabled","true"),this.$el.find(".upload-poi-front form").addClass("hidden"),this.$el.find(".upload-poi-back form").addClass("hidden")),this.docStatuses.por.status===O.APPROVED&&(this.$el.find("div[name='por_select']").addClass("field-disabled"),this.$el.find("div[name='por_select'] select").attr("disabled","true"),this.$el.find(".upload-por form").addClass("hidden")),this.docStatuses.poi.status!==O.APPROVED||this.docStatuses.por.status!==O.APPROVED||0!==d.size(this.ccList)||this.pendingECDD||this.pendingPhoneVerification||(this.$el.find(".top-block").addClass("hidden"),this.$el.find(".mobile-top-block").addClass("hidden"),this.$el.find(".approved-block").removeClass("hidden")),this.docStatuses.por.status===O.PENDING||this.docStatuses.por.status===O.IN_PROCESS?this.$el.find(".upload-status-por .in-review").removeClass("hidden"):this.docStatuses.por.status===O.APPROVED?this.$el.find(".upload-status-por .approved").removeClass("hidden"):this.docStatuses.por.status===O.REJECTED?this.$el.find(".upload-status-por .rejected").removeClass("hidden"):this.docStatuses.por.status===O.EXPIRED?this.$el.find(".upload-status-por .expired").removeClass("hidden"):this.docStatuses.por.status===O.PENDING_EXPIRATION&&this.$el.find(".upload-status-por .pending-expiration").removeClass("hidden"),this.docStatuses.poi.status===O.PENDING||this.docStatuses.poi.status===O.IN_PROCESS?this.$el.find(".upload-status-poi .in-review").removeClass("hidden"):this.docStatuses.poi.status===O.APPROVED?this.$el.find(".upload-status-poi .approved").removeClass("hidden"):this.docStatuses.poi.status===O.REJECTED?this.$el.find(".upload-status-poi .rejected").removeClass("hidden"):this.docStatuses.poi.status===O.EXPIRED?this.$el.find(".upload-status-poi .expired").removeClass("hidden"):this.docStatuses.poi.status===O.PENDING_EXPIRATION&&this.$el.find(".upload-status-poi .pending-expiration").removeClass("hidden");var e=this.$el.find(".mobile-upload-poi"),i=function(e,i,t,a){e.find(i).removeClass("hidden").addClass(t).find(".text").html(a)};this.docStatuses.poi.status===O.PENDING||this.docStatuses.poi.status===O.IN_PROCESS?i(e,".mobile-upload-status","in-review",__("verification_center.status.review")):this.docStatuses.poi.status===O.APPROVED?(i(e,".mobile-upload-status","approved",__("verification_center.status.approved")),e.find(".fileUpload").addClass("hidden")):this.docStatuses.poi.status===O.REJECTED?i(e,".mobile-upload-status","rejected",__("verification_center.status.rejected")):this.docStatuses.poi.status===O.EXPIRED?i(e,".mobile-upload-status","expired",__("verification_center.status.expired")):this.docStatuses.poi.status===O.PENDING_EXPIRATION&&i(e,".mobile-upload-status","pending-expiration",__("verification_center.status.going_to_expire",this.docStatuses.poi.expirationDate));var t=this.$el.find(".mobile-upload-por");this.docStatuses.por.status===O.PENDING||this.docStatuses.por.status===O.IN_PROCESS?i(t,".mobile-upload-status","in-review",__("verification_center.status.review")):this.docStatuses.por.status===O.APPROVED?(i(t,".mobile-upload-status","approved",__("verification_center.status.approved")),t.find(".fileUpload").addClass("hidden")):this.docStatuses.por.status===O.REJECTED?i(t,".mobile-upload-status","rejected",__("verification_center.status.rejected")):this.docStatuses.por.status===O.EXPIRED?i(t,".mobile-upload-status","expired",__("verification_center.status.expired")):this.docStatuses.por.status===O.PENDING_EXPIRATION&&i(t,".mobile-upload-status","pending-expiration",__("verification_center.status.going_to_expire",this.docStatuses.por.expirationDate));var a=localStorage.getItem("poidoc");a&&this.$el.find("div[name='poi_select'] select").val(a);var s=localStorage.getItem("pordoc");s&&this.$el.find("div[name='por_select'] select").val(s)},closePopup:function(){this.close()},close:function(){d.isFunction(this.options.onClose)&&this.options.onClose(),u.prototype.close.call(this),this.otherView.destroy(),this.otherView=null},showUploadLoading:function(){this.fixedLoadingView=new _({parent:document.body,position:"fixed",translucent:"2"})},hideUploadLoading:function(){this.fixedLoadingView.destroy()},showMobileStatus:function(e,i){i.removeClass("hidden"),o(e).hasClass("upload-doc-mobile-poi-front")&&i.attr("class","mobile-upload-status").addClass("in-review").find(".text").html(__("verification_center.status.review")),o(e).hasClass("upload-doc-mobile-poi-back")&&i.attr("class","mobile-upload-status").addClass("in-review").find(".text").html(__("verification_center.status.review")),o(e).hasClass("upload-doc-mobile-por")&&i.attr("class","mobile-upload-status").addClass("in-review").find(".text").html(__("verification_center.status.review"))},render:function(){if(u.prototype.render.call(this),this.setContent(this.verifyPopupTemplate(this.getRenderData())),!this.documentsApprovedByEV){var e=this.$el.find(".verification-wrapper");new C({el:e[0],form:[]}),new C({el:e[1],form:[]}),this.check_upload(),"it"===c.getCitizenship()&&this.nciEnabled&&(new g({el:this.$el.find(".verification-block-nci")[0],form:[]}),new g({el:this.$el.find(".mobile-upload-nci")[0],form:[]}),this.showNCIstatus())}return this.verifyBlockCC=new v(this.getBlockCCRenderTemplateData(),m),this.verifyBlockCCMobile=new v(this.getBlockCCMobileRenderTemplateData(),h),this.otherView=new f({el:this.$el.find(".other-verification-wrapper"),userId:c.getUserData().getCrmboCustomer().id}),this},getVerifyPoiDocuments:function(){return d.isEmpty(r.getVerifyPoiDocuments())?P:r.getVerifyPoiDocuments()},getRenderData:function(){return{countryCode:c.getUserData().getCrmboCustomer().country.toLowerCase(),userId:c.getUserData().getCrmboCustomer().id,country:__("country.name."+c.getUserData().getCrmboCustomer().country.toUpperCase()),documents_status:this.docStatuses,documentsApprovedByEV:this.documentsApprovedByEV,cc_list:this.ccList,docTypes:w,poiTemplate:b.selectBox({title:"",name:"poi_select",options:this.getVerifyPoiDocuments(),translationGroupPrefix:"verification_center.poi",translationKey:"",disable:!1}),porTemplate:b.selectBox({title:"",name:"por_select",options:this.notEEACompliance?["landline_phone_bill","mobile_phone_bill","other"]:["bank_statement_bill","utility_bill","internet_bill","landline_phone_bill","tv_service_bill","other"],translationGroupPrefix:"verification_center.por",translationKey:"",disable:!1}),citizenship:c.getCitizenship(),nciCountryTemplate:b.selectBox({title:__("verification_center.popup.national_country_identifier.country_label"),name:"national_country_identifier_country",options:[c.getCitizenship().toUpperCase()],defaultValue:c.getCitizenship().toUpperCase(),emptyText:__("country.name.IT"),translationGroupPrefix:"country.name",translationKey:"",disable:!0}),config:E,settings:r,nciTitle:__("verification_center.popup.national_country_identifier.title"),nciInputName:"nci_code",nciEnabled:this.nciEnabled,nciInputDisabled:this.nciInputDisabled,nciInputValue:this.nciValue,nciStatus:this.nciStatus,notEEACompliance:this.notEEACompliance,pendingECDD:this.pendingECDD,pendingPhoneVerification:this.pendingPhoneVerification}},getBlockCCRenderTemplateData:function(){return{el:this.$el.find(".cc-verification")[0],cc_list:this.ccList}},getBlockCCMobileRenderTemplateData:function(){return{el:this.$el.find(".mobile-cc-verification")[0],cc_list:this.ccList}},updateNCI:function(e){var i=this;if(e.preventDefault(),this.nciValue===c.getUserData().get("nationalCountryIdentifier"))return!1;if(this.validateNCI(this.nciValue)){var t={data:{nationalCountryIdentifier:this.nciValue}};T.updateAccountV2(t).then(function(){i.nciStatus="PENDING",i.$el.find(".nci-error").addClass("hidden"),i.$el.find(".fn-nci-update").addClass("disabled"),i.showNCIstatus()}).catch(function(e){x(function(){})})}else this.$el.find(".nci-error").removeClass("hidden")},validateNCI:function(e){return!!d.isString(e)&&/^[a-zA-Z]{6}[a-zA-Z0-9]{10}$/.test(e)},changeNCI:function(e){var i=e.currentTarget.value,t=this.$el.find(".fn-nci-update");this.nciValue=i,this.$el.find("input[name=nci_code]").val(i),this.validateNCI(i)&&(t.removeClass("disabled"),this.$el.find(".nci-error").addClass("hidden")),i===c.getUserData().get("nationalCountryIdentifier")?t.addClass("disabled"):t.removeClass("disabled")},showNCIstatus:function(){var e=this.$el.find(".upload-status-nci");e.find("div").addClass("hidden"),this.nciStatus===k||this.nciStatus===A?e.find(".in-review").removeClass("hidden"):this.nciStatus===R?e.find(".approved").removeClass("hidden"):this.nciStatus===S&&e.find(".rejected").removeClass("hidden");var i=this.$el.find("#upload-nci-form"),t=function(e,i,t,a){e.find(i).removeClass("hidden").addClass(t).find(".text").html(a)};this.nciStatus===k||this.nciStatus===A?t(i,".mobile-upload-status","in-review",__("verification_center.status.review")):this.nciStatus===R?(t(i,".mobile-upload-status","approved",__("verification_center.status.approved")),i.find(".fileUpload").addClass("hidden")):this.nciStatus===S&&t(i,".mobile-upload-status","rejected",__("verification_center.status.rejected"))},markDocumentAsUploaded:function(e){e!==w.PROOF_OF_ID_FRONT&&e!==w.PROOF_OF_ID_BACK||(this.state.markedDocumentsAsUploaded[w.PROOF_OF_ID]=!0),this.state.markedDocumentsAsUploaded[e]=!0,d.chain(this.state.markedDocumentsAsUploaded).values().every().value()&&(c.getUserDocumentsModel().load().then(function(){c.getUserDocumentsModel().isDocumentsUploaded()&&(l.trigger("sm","verify_documents_uploaded"),c.getUserData().set("uploadDocumentsCompleted",!0))}),l.trigger("user:data:updater:start"))}});a.exports=F}.call(i,t,i,e))&&(e.exports=o)}).call(i,t(0),t(4))},2401:function(e,i,t){var a;void 0!==(a=function(e,i,a){var s=(t(0),t(2)),n=t(13),o=t(8);a.exports=n.extend({uploadDocument:function(e,i){var t={docType:e};return o.uploadDocument(t,i).then(this.uploadSuccess.bind(this)).catch(this.uploadError.bind(this))},uploadSuccess:function(e){return Promise.resolve(e)},uploadError:function(e){return s.trigger("ui:message-box",{text:__("generic.error.message")}),Promise.reject(e)},approveCreditCard:function(e){return o.approveCreditCard(e)}})}.call(i,t,i,e))&&(e.exports=a)},2402:function(e,i,t){(function(a){var s;void 0!==(s=function(e,i,a){var s=t(0),n=(t(4),t(12)),o=t(7),d=t(811),l=t(2403),c=t(2404),r=n.extend({initialize:function(e,i){n.prototype.initialize.apply(this,arguments),this.template=s.template(i),this.ccList=e.cc_list,this.shouldUploadCCDocs=e.shouldUploadCCDocs,this.selectedCardId=s.isEmpty(this.ccList)?0:s.first(this.ccList).id,this.nothingToVerify=!1,this.render()},render:function(){this.$el.html(this.template({cc_list:this.ccList,userId:o.getUserData().getCrmboCustomer().id,shouldUploadCCDocs:this.shouldUploadCCDocs,docTypes:d,back_image:c,front_image:l,selectedCardId:this.selectedCardId,nothingToVerify:this.nothingToVerify,card:this.getSelectedCard()||{}}))},reRender:function(e){this.ccList=e,this.render()},hide:function(){this.nothingToVerify=!0,this.render(),this.$el.addClass("hidden")},onChange:function(e){this.selectedCardId=parseInt(this.$("#cc_verify")[0].value),this.render()},getSelectedCard:function(){return s.findWhere(this.ccList,{id:this.selectedCardId})}});a.exports=r}.call(i,t,i,e))&&(e.exports=s)}).call(i,t(0))},2403:function(e,i,t){e.exports=t.p+"images/fe4edf5c8337.png"},2404:function(e,i,t){e.exports=t.p+"images/eb765273ab9d.png"},2405:function(e,i,t){(function(a,s){var n;void 0!==(n=function(e,i,a){var s=t(0),n=t(4),o=t(8),d=t(7),l=t(12),c=t(185),r=t(851),p=t(79),u=t(2406),v=t(41),f=t(811),m=t(9),h={phoneVerification:f.PHONE_VERIFICATION,enhancedVerification:f.ENHANCED_VERIFICATION_PROOF,bankConfirmation:f.BANK_CONFIRMATION_LETTER,address:f.DECLARATION_OF_ADDRESS,familymember:f.DECLARATION_OF_FAMILY_MEMBER,email:f.EMAIL,marriage:f.MARRIAGE_CERTIFICATE,attorney:f.POWER_OF_ATTORNEY,poi_familymember:f.PROOF_OF_ID_FAMILY_MEMBER,deposit:f.STATEMENTS_OF_DEPOSITS,swift:f.SWIFT,third_poi:f.THIRD_PARTY_PROOF_OF_ID,third_por:f.THIRD_PARTY_PROOF_OF_RESIDENCE,waiver:f.WAIVER_LETTER,wiretransfer:f.WIRE_TRANSFER_DOCUMENT,withdrawal:f.WITHDRAWAL_REQUEST,payment_method_ownership:f.PAYMENT_METHOD_OWNERSHIP,payment_method_cancellation:f.PAYMENT_METHOD_CANCELLATION,professionalClientApplication:f.PROFESSIONAL_CLIENT_APPLICATION,other:f.OTHER},_=c.extend({onChange:function(e){c.prototype.onChange.apply(this,arguments);var i=this.value(),t=h[i];t>0&&(this.$el.find(".fileUpload").removeClass("disabled"),this.$el.find("#other-upload").removeAttr("disabled"),this.$el.find('input[name="docType"]').val(t))}}),b=l.extend({template:s.template(u),events:function(){return s.extend({},s.result(l.prototype,"events"),{"change #other-upload":"changeFile",submit:"approveSubmit"})},initialize:function(e){l.prototype.initialize.apply(this,arguments),this.render()},render:function(){this.$el.html(this.template({userId:this.options.userId,config:v,textareaTemplate:p.textArea({title:__("upload_documents.popup.other.comment"),name:"comment",settings:{rows:3,columns:1},validation:{rules:{max_length:[1e3,__("withdraw.form.error.max_length",1e3)]}},disable:!1}),selectTemplate:p.selectBox({title:__("upload_documents.popup.other.doc_type"),name:"other_select",options:s.chain(h).keys().reject(function(e){return"professionalClientApplication"===e&&!m.isAccountClassificationEnabled()&&!d.isElectiveProfessionalEnabled()}).value(),translationGroupPrefix:"upload_documents.popup.other.type",translationKey:"",validation:{rules:{not_empty:__("withdraw.form.error.not_empty",__("withdraw.form.label.address"))}},disable:!1})})),this.otherFormField=new _({el:n(".other-document")[0],form:[]}),this.otherTexteareaField=new r({el:n(".upload-textarea")[0],form:[]})},changeFile:function(e){var i=e.target.files[0];if(i){var t=i.name;n(e.target.parentNode).find("span").html(t),this.$el.find(".upload-success").addClass("hidden"),v.uploadDocumentsFileExt.test(i.name)&&i.size<v.uploadDocumentsFileMaxSize?(this.$el.find(".file-error").addClass("hidden"),this.$el.find("#other-submit").removeAttr("disabled")):(this.$el.find(".file-error").removeClass("hidden"),this.$el.find("#other-submit").attr("disabled",!0))}},approveSubmit:function(e){var i=this;e.preventDefault();var t=e.target.elements,a=new FormData(e.target),s=t.docType.value,n=t.comment.value;if(a.append("secret",d.getUserData().getCrmboCustomer().password),n.length>1e3)return this.$el.find(".comment-error").removeClass("hidden"),!1;this.$el.find(".comment-error").addClass("hidden");var l={docType:s};o.uploadDocument(l,a).then(function(e){i.$el.find("#other-upload").val(""),i.$el.find(".fileUpload span").html(__("verification_center.choose_file")),i.$el.find("#other-submit").html(__("submit")),i.$el.find(".upload-success").removeClass("hidden");var t=i.$el.find(".fieldset-content")[0];t.style.maxHeight=t.scrollHeight+"px"}).catch(function(e){i.$el.find("#other-submit").html(__("submit")),i.$el.find("#other-submit").removeAttr("disabled"),i.$el.find(".upload-error").removeClass("hidden");var t=i.$el.find(".fieldset-content")[0];t.style.maxHeight=t.scrollHeight+"px"}),this.$el.find("#other-submit").attr("disabled",!0),this.$el.find("#other-submit").html(__("loader.loading")),this.$el.find(".upload-success").addClass("hidden"),this.$el.find(".upload-error").addClass("hidden")}});a.exports=b}.call(i,t,i,e))&&(e.exports=n)}).call(i,t(0),t(4))},2406:function(e,i){e.exports='<div class="form section"><div class="field field-fieldset"><div class="fieldset-legend fn-toggle" data-doc="other"><div class="text upload-title"><%=__(\'upload_documents.popup.other.title\')%></div></div><div class="fieldset-content"><div class="section-header"><%=__(\'upload_documents.popup.other.desc\')%></div><form id="upload-other-doc-form" enctype="multipart/form-data"><div class="form-col"><div class="upload-document other-document"> <%=selectTemplate%> <input type="hidden" name="docType" value required><div class="field upload-block upload-other"><label for="other-upload"><%=__(\'upload_documents.popup.other.select_file\')%></label><div class="fileUpload btn btn-primary btn-block disabled"><span><%=__(\'verification_center.choose_file\')%></span><input class="upload" id="other-upload" type="file" aria-hidden="true" name="doc" accept="<%=config.uploadDocumentsFileMimeTypes %> " disabled="disabled"></div><div class="file-error hidden"><span class="icon-error-red"></span> <span><%=__(\'verification_center.popup.oversize.message\')%></span></div></div></div><div class="upload-textarea"> <%=textareaTemplate%> <div class="comment-error hidden"><span class="icon-error-red"></span> <span><%=__(\'withdraw.form.error.max_length\', 1000)%></span></div></div><div class="field"><div class="upload-error hidden"><i class="icon-error-red"></i> <span class="text"><%=__(\'upload_documents.popup.other.error\')%></span></div><div class="upload-success hidden"><i class="icon"></i> <span class="text"><%=__(\'upload_documents.popup.other.success\')%></span></div><button id="other-submit" type="submit" class="btn btn-primary btn-block fn-submit" disabled="disabled"><%=__(\'submit\')%></button></div></div></form></div></div></div>'},2407:function(e,i){e.exports='<% if (!nothingToVerify){%> <div class="verification-block cc-verification"><div class="upload-document"><div class="upload-title"> <%=__(\'verification_center.popup.cc.label\')%> <% if (shouldUploadCCDocs){%> <span class="question-tooltip" aria-label="<%=__(\'upload_documents.help.cc.text\')%>"></span> <% } %> </div><div class="field field-type-select"><label></label><div class="styled-select"><select name="cc_verify" id="cc_verify" class="form-control"> <%_.each(cc_list,function(item){%> <option value="<%=item.id%>" <%= item.id == selectedCardId ? \'selected\' : \'\' %>>xxxx-xxxx-xxxx-<%=item.number%></option> <%});%> </select></div></div> <% if (!shouldUploadCCDocs){%> <div class="cc-description"> <%=__(\'verification_center.popup.cc.desc\')%> </div> <% } else {%> <div class="upload-error cc-error hidden"><span class="icon-error-red"></span> <span><%=__(\'verification_center.popup.oversize.message\')%></span></div> <% } %> </div> <% if (shouldUploadCCDocs){%> <div class="upload-area"><div class="upload-block upload-cc-front"><span class="title"><%=__(\'verification_center.example.front\')%></span><img id="cc-front-img" src="<%=front_image%>"><form enctype="multipart/form-data" class="upload-doc-form"><input type="hidden" name="docType" value="<%=docTypes.CREDIT_CARD_FRONT%>"><div class="fileUpload btn btn-primary"><span> <%=__(\'verification_center.choose_file\')%> </span><input class="upload upload-cc" type="file" data-id="cc-front-img" name="doc" accept="image/*,application/pdf"></div><div class="doc-status hidden"><i class="icon doc-uploaded"></i> <span><%=__(\'credit_card.status.UPLOADED\')%></span></div></form></div><div class="upload-block upload-cc-back"><span class="title"><%=__(\'verification_center.example.back\')%></span><img id="cc-back-img" src="<%=back_image%>"><form enctype="multipart/form-data" class="upload-doc-form"><input type="hidden" name="docType" value="<%=docTypes.CREDIT_CARD_BACK%>"><div class="fileUpload btn btn-primary"><span> <%=__(\'verification_center.choose_file\')%> </span><input class="upload upload-cc" type="file" data-id="cc-back-img" name="doc" accept="image/*,application/pdf"></div><div class="doc-status hidden"><i class="icon doc-uploaded"></i> <span><%=__(\'credit_card.status.UPLOADED\')%></span></div></form></div></div> <% } %> </div><div class="upload-status cc-upload-status"><div class="in-review hidden"><i class="icon"></i><span><%=__(\'verification_center.status.review\')%></span></div><div class="approved hidden"><i class="icon"></i><span><%=__(\'verification_center.status.approved\')%></span></div><div class="rejected hidden"><i class="icon"></i><span><%=__(\'verification_center.status.rejected\')%></span></div></div> <% if (!shouldUploadCCDocs){%> <div class="verify-btn"><a class="btn btn-primary btn-block fn-verify" href="#"><div class="button-container"><span><%=__(\'actions.verify\')%></span></div></a></div> <% } %> <% } %>'},2408:function(e,i){e.exports='<div class="field field-fieldset cc-verification-mobile"><div class="fieldset-legend fn-toggle" data-doc="cc"><div class="text upload-title"> <%=__(\'verification_center.popup.cc.label\')%> </div> <% if (shouldUploadCCDocs){%> <span class="question-tooltip" aria-label="<%=__(\'upload_documents.help.cc.text\')%>"></span> <% } %> </div><div class="fieldset-content"><div class="upload-cc-dropdown"><div class="cc-verified hidden"><span class="cc-number"></span><span> - </span><span><%=__(\'verification_center.status.verified\')%></span></div><div class="styled-select"><select name="cc_verify" id="cc_verify_mobile" class="form-control"> <%_.each(cc_list,function(item){%> <option value="<%=item.id%>" <%= item.id == selectedCardId ? \'selected\' : \'\' %>>xxxx-xxxx-xxxx-<%=item.number%></option> <%});%> </select></div> <% if (shouldUploadCCDocs){%> <div class="mobile-upload-cc"><div class="upload-btn mobile-upload-cc-front"><div class="mobile-upload-error cc-error hidden"><span class="icon-error-red"></span> <span><%=__(\'verification_center.popup.oversize.message\')%></span></div><form enctype="multipart/form-data" class="upload-doc-mobile-cc-front"><input type="hidden" name="docType" value="<%=docTypes.CREDIT_CARD_FRONT%>"><div class="fileUpload btn btn-primary upload-icon"><span></span> <span><%=__(\'credit_card.popup.header.front\')%></span><input class="upload upload-cc" type="file" data-id="cc-front-img" name="doc" accept="image/*"></div><div class="mobile-upload-status approved hidden"><div class="status"></div><span class="text"><%=__(\'credit_card.status.UPLOADED\')%></span></div></form></div><div class="upload-btn mobile-upload-cc-back"><form enctype="multipart/form-data" class="upload-doc-mobile-cc-back"><input type="hidden" name="docType" value="<%=docTypes.CREDIT_CARD_BACK%>"><div class="fileUpload btn btn-primary upload-icon"><span></span> <span><%=__(\'credit_card.popup.header.back\')%></span><input class="upload upload-cc" type="file" data-id="cc-back-img" name="doc" accept="image/*"></div><div class="mobile-upload-status approved hidden"><div class="status"></div><span class="text"><%=__(\'credit_card.status.UPLOADED\')%></span></div></form></div></div><div class="mobile-upload-status mobile-upload-status-card hidden"><span class="status"></span><span class="text"></span></div> <% } %> <% if (!shouldUploadCCDocs){%> <div class="upload-btn"><a class="btn btn-primary btn-block fn-verify-mobile" href="#"><div class="button-container"><span><%=__(\'verify_account.popup.button\')%></span></div></a></div> <% } %> </div></div></div>'},2409:function(e,i,t){(function(a,s){var n;void 0!==(n=function(e,i,a){var n=t(0),o=(t(2),t(7),t(24)),d=n.template(t(2410)),l=t(2411),c=t(215),r=(t(8),t(71),t(214)),p=t(2209),u=(p.WEEKDAYS,p.DEFAULT_FROM_HOURS),v=p.DEFAULT_TO_HOURS,f=o.extend({events:function(){return n.extend({},n.result(o.prototype,"events"),{"click input[type=checkbox]":"onCheck","click .fn-submit":"onSubmit","click .fn-cancel":"onCancel"})},getOptions:function(e){return n.extend({},n.result(o.prototype,"getOptions"),{isHeaderShowed:!0,maxBoxWidth:"40em"},e)},initialize:function(e){var i=this;this.model=new l,this.options=e,o.prototype.initialize.apply(this,arguments),this.render(),this.$el.find('input[type="time"]').map(function(e){var t=void 0;"fromTime"===e.dataset.key&&(t=new r(e,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:u+":00",minuteIncrement:0,time_24hr:!0,disableMobile:!0,maxDate:v+":00",onChange:function(e,t,a){i.onTimepickerUpdated(e,t,a)}})),"toTime"===e.dataset.key&&(t=new r(e,{enableTime:!0,noCalendar:!0,dateFormat:"H:i",defaultDate:v+":00",minuteIncrement:0,time_24hr:!0,disableMobile:!0,minDate:u+":00",onChange:function(e,t,a){i.onTimepickerUpdated(e,t,a)}})),s(t.minuteElement).attr("readonly","readonly")})},render:function(){return o.prototype.render.call(this),this.setContent(d({scheduleList:this.model.get("scheduleModelList")})),this},onCheck:function(e){var i=e.currentTarget.dataset.day;n.findWhere(this.model.get("scheduleModelList"),{dayOfWeek:i}).enabled=e.currentTarget.checked;var t=s(s(e.currentTarget).closest(".form-row"));n.each(t.find("input[type=text]"),function(i){e.currentTarget.checked?(t.removeClass("disabled"),i.removeAttribute("disabled")):(t.addClass("disabled"),i.setAttribute("disabled",!0))})},onCancel:function(){this.close()},onSubmit:function(e){var i=this;e.preventDefault();var t=n.filter(this.model.get("scheduleModelList"),function(e){return e.enabled});this.model.uploadSchedule(t).then(function(e){i.close()}).catch(function(e){c(function(){})})},onTimepickerUpdated:function(e,i,t){var a=t.config.day,o=e[0].getHours(),d=s(s(t.element).closest(".form-row")),l=void 0,c=n.findWhere(this.model.get("scheduleModelList"),{dayOfWeek:a});"fromTime"===t.config.key?(c.startHour=o,l=d.find('input[data-key="toTime"]')[0]._flatpickr,l.set("minDate",o+1+":00")):(c.endHour=o,l=d.find('input[data-key="fromTime"]')[0]._flatpickr,l.set("maxDate",o-1+":00"))}});a.exports=f}.call(i,t,i,e))&&(e.exports=n)}).call(i,t(0),t(4))},2410:function(e,i){e.exports='<div class="schedule-popup verify-popup"><div class="content"><div class="title"><%=__(\'schedule.popup.title\')%></div><div class="form"><div class="form-body"> <% _.each(scheduleList, function(dayModel) { %> <div class="form-row <%=dayModel.enabled ? \'\' : \'disabled\'%>"><div class="label"><div class="switcher"><div class="flex flex-row"><input type="checkbox" name="checkbox-<%=dayModel.dayOfWeek.toLowerCase()%>" class="ios-switch green" id="checkbox-<%=dayModel.dayOfWeek.toLowerCase()%>" data-day="<%=dayModel.dayOfWeek%>" <%=dayModel.enabled ? \'checked\' : \'\'%> ><label for="checkbox-<%=dayModel.dayOfWeek.toLowerCase()%>"><%=__(\'schedule.popup.\' + dayModel.dayOfWeek.toLowerCase())%></label></div></div></div><div class="flex flex-row flex-valign-center flex-align-center"><div class="field field-type-timepicker"><div class="form-inline flex flex-row flex-valign-center"><div class="label"><%=__(\'schedule.popup.from\')%></div><div class="form-group inner-addon right-addon"><label for="input-from-<%=dayModel.dayOfWeek.toLowerCase()%>" class="flex flex-row flex-valign-center"><input type="time" class="timepicker-from flex flex-stretch" data-day="<%=dayModel.dayOfWeek%>" data-key="fromTime" name="input-from-<%=dayModel.dayOfWeek.toLowerCase()%>" id="input-from-<%=dayModel.dayOfWeek.toLowerCase()%>" <%=dayModel.enabled ? \'\' : \'disabled\'%> > <i class="glyphicon icon-watch"></i></label></div></div></div><div class="field field-type-timepicker"><div class="form-inline flex flex-row flex-valign-center"><div class="label"><%=__(\'schedule.popup.to\')%></div><div class="form-group inner-addon right-addon"><label for="input-to-<%=dayModel.dayOfWeek.toLowerCase()%>" class="flex flex-row flex-valign-center"><input type="time" class="timepicker-from flex flex-stretch" data-day="<%=dayModel.dayOfWeek%>" data-key="toTime" name="input-to-<%=dayModel.dayOfWeek.toLowerCase()%>" id="input-to-<%=dayModel.dayOfWeek.toLowerCase()%>" <%=dayModel.enabled ? \'\' : \'disabled\'%> > <i class="glyphicon icon-watch"></i></label></div></div></div></div></div> <% }) %> </div></div><div class="note-block"><div class="note-title"><%=__(\'schedule.popup.note\')%></div><ul><li class="note-row"><%=__(\'schedule.popup.contact_upon_approval\')%></li><li class="note-row"><%=__(\'schedule.popup.time_availability\')%></li></ul></div></div><div class="content-bottom"><div class="action-buttons"><a class="btn btn-primary btn-block fn-submit" href="#"><div class="button-container"><span><%=__(\'actions.save\')%></span></div></a></div></div></div>'},2411:function(e,i,t){var a;void 0!==(a=function(e,i,a){var s=(t(0),t(13)),n=t(2),o=t(8),d=t(2209),l=d.MONDAY,c=d.TUESDAY,r=d.WEDNESDAY,p=d.THURSDAY,u=d.FRIDAY,v=d.DEFAULT_FROM_HOURS,f=d.DEFAULT_TO_HOURS;a.exports=s.extend({defaults:function(){return{scheduleModelList:[{enabled:!0,dayOfWeek:l,startHour:v,endHour:f},{enabled:!0,dayOfWeek:c,startHour:v,endHour:f},{enabled:!0,dayOfWeek:r,startHour:v,endHour:f},{enabled:!0,dayOfWeek:p,startHour:v,endHour:f},{enabled:!0,dayOfWeek:u,startHour:v,endHour:f}]}},uploadSchedule:function(e){return o.uploadSchedule(e).then(this.uploadSuccess.bind(this)).catch(this.uploadError.bind(this))},uploadSuccess:function(e){return Promise.resolve(e)},uploadError:function(e){return n.trigger("ui:message-box",{text:__("generic.error.message")}),Promise.reject(e)}})}.call(i,t,i,e))&&(e.exports=a)},2412:function(e,i){e.exports='<div class="verify-popup"> <% if(documentsApprovedByEV) { %> <div class="content"><div class="verification-wrapper"><div class="approved-by-ev-wrapper"><div class="upload-title"><%=__(\'verification_center.approved_by_ev.title\')%></div><div><%=__(\'verification_center.approved_by_ev.text\')%></div></div></div> <% if(cc_list.length>0) { %> <div class="verification-wrapper hidden-xs"></div><div class="mobile-verification-wrapper hidden-sm hidden-md hidden-lg"></div> <%}%> </div> <%} else {%> <div class="content hidden-xs"><div class="top-block"><div class="disclaimer-text"> <%=__(\'verification_center.popup.disclaimer.text1\')%><br> <%=__(\'verification_center.popup.disclaimer.text2\')%> </div><div class="country-change"><span class="flag flag-<%=countryCode%>"></span> <%=country%> </div></div><div class="approved-block hidden"><span><%=__(\'verification_center.status.verified\')%></span></div><div class="line"></div> <% if (pendingECDD) { %> <div class="pending-activation-wrapper"><div class="pending-activation-title"> <%=__(\'upload_documents.popup.other.pending_ecdd.title\')%> <span class="question-tooltip" aria-label="<%=__(\'upload_documents.popup.other.pending_ecdd.tooltip\')%>" data-tooltip-classname="wide"></span></div><div class="pending-activation-description"><%=__(\'upload_documents.popup.other.pending_ecdd.subtitle\')%></div></div> <%}%> <% if (pendingPhoneVerification) { %> <div class="pending-activation-wrapper"><div class="pending-activation-title"> <%=__(\'upload_documents.popup.other.pending_phone_verification.title\')%> </div><div class="pending-activation-description"><%=__(\'upload_documents.popup.other.pending_phone_verification.subtitle\')%></div></div> <%}%> <div class="verification-wrapper"><div class="verification-block"><div class="upload-document"><div class="upload-title"> <%=__(\'verification_center.popup.poi.label\')%> <span class="question-tooltip" aria-label="<%=__(\'upload_documents.help.poi.text\')%>"></span></div><div class="flex flex-row flex-stretch upload-row"> <%=poiTemplate%> <div class="upload-error poi-error hidden"><span class="icon-error-red"></span> <span><%=__(\'verification_center.popup.oversize.message\')%></span></div><div class="upload-area"><div class="upload-block upload-poi-front"><form enctype="multipart/form-data" class="upload-doc-form"><input type="hidden" name="docType" value="<%=docTypes.PROOF_OF_ID_FRONT%>"><div class="fileUpload btn btn-primary"><span> <% if (documents_status.poi.status == -1){%><%=__(\'verification_center.choose_file\')%><% } else {%><%=__(\'verification_center.update_file\')%><% }%> </span><input class="upload browse" type="file" data-id="poi-front-img" name="doc" accept="<%=config.uploadDocumentsFileMimeTypes %>"></div></form></div><div class="upload-block upload-poi-back"><form enctype="multipart/form-data" class="upload-doc-form"><input type="hidden" name="docType" value="<%=docTypes.PROOF_OF_ID_BACK%>"><div class="fileUpload btn btn-primary"><span> <% if (documents_status.poi.status == -1){%><%=__(\'verification_center.choose_file\')%><% } else {%><%=__(\'verification_center.update_file\')%><% }%> </span><input class="upload browse" type="file" data-id="poi-back-img" name="doc" accept="<%=config.uploadDocumentsFileMimeTypes %>"></div></form></div></div></div></div></div><div class="upload-status upload-status-poi"><div class="in-review hidden"><i class="icon"></i><span><%=__(\'verification_center.status.review\')%></span></div><div class="approved hidden"><i class="icon"></i><span><%=__(\'verification_center.status.approved\')%></span></div><div class="rejected hidden"><i class="icon"></i><span><%=__(\'verification_center.status.rejected\')%></span></div><div class="expired hidden"><i class="icon"></i><span><%=__(\'verification_center.status.expired\')%></span></div><div class="pending-expiration hidden"><i class="icon"></i><span><%=__(\'verification_center.status.going_to_expire\', documents_status.poi.expirationDate)%></span></div></div></div><div class="verification-wrapper verification-with-note"><div><div class="verification-block"><div class="upload-document"><div class="upload-title"> <%=__(\'verification_center.popup.por.label\')%> <span class="question-tooltip" aria-label="<%=__(notEEACompliance ? \'upload_documents.help.por.not_eea_compliance.text\' : \'upload_documents.help.por.text\')%>"></span></div><div class="flex flex-row flex-stretch upload-row"> <%=porTemplate%> <div class="upload-error por-error hidden"><span class="icon-error-red"></span> <span><%=__(\'verification_center.popup.oversize.message\')%></span></div><div class="upload-area"><div class="upload-block upload-por"><form enctype="multipart/form-data" class="upload-doc-form"><input type="hidden" name="docType" value="<%=docTypes.PROOF_OF_RESIDENCE%>"><div class="fileUpload btn btn-primary"><span> <% if (documents_status.por.status == -1){%><%=__(\'verification_center.choose_file\')%><% } else {%><%=__(\'verification_center.update_file\')%><% }%> </span><input class="upload browse" type="file" data-id="por-front-img" name="doc" accept="<%=config.uploadDocumentsFileMimeTypes %>"></div></form></div></div></div></div></div><div class="upload-status upload-status-por"><div class="in-review hidden"><i class="icon"></i><span><%=__(\'verification_center.status.review\')%></span></div><div class="approved hidden"><i class="icon"></i><span><%=__(\'verification_center.status.approved\')%></span></div><div class="rejected hidden"><i class="icon"></i><span><%=__(\'verification_center.status.rejected\')%></span></div><div class="expired hidden"><i class="icon"></i><span><%=__(\'verification_center.status.expired\')%></span></div><div class="pending-expiration hidden"><i class="icon"></i><span><%=__(\'verification_center.status.going_to_expire\', documents_status.por.expirationDate)%></span></div></div></div><div> <% if (notEEACompliance) { %> <div class="verification-note"><%=__(\'verification_center.por.not_eea_compliance.text\')%></div> <%}%> </div></div> <% if(cc_list.length>0) { %> <div class="verification-wrapper cc-verification"></div> <%}%> <% if(citizenship === \'it\' && nciEnabled) { %> <div class="verification-wrapper"><div class="verification-block verification-block-nci"><div class="upload-document"><div class="upload-title"> <%=__(\'verification_center.popup.national_country_identifier.title\')%> </div><div class="flex flex-row flex-valign-center"> <%=nciCountryTemplate%> <div class="field field-type-input <%=nciInputDisabled ? \'field-disabled\' : \'\'%>"><label><%=nciTitle%></label><input type="text" class="form-control input-field" name="<%=nciInputName%>" value="<%=nciInputValue%>"><div class="upload-error nci-error hidden"><span class="icon-error-red"></span> <span><%=__(\'registration.warning.national_country_identifier\')%></span></div><div class="field-tooltip"><div class="content"></div></div></div><div class="action-buttons"><a class="btn btn-primary btn-block fn-nci-update disabled" href="#"><div class="button-container"><span><%=__(\'save\')%></span></div></a></div><div class="upload-status upload-status-nci"><div class="in-review hidden"><i class="icon"></i><span><%=__(\'verification_center.status.review\')%></span></div><div class="approved hidden"><i class="icon"></i><span><%=__(\'verification_center.status.approved\')%></span></div><div class="rejected hidden"><i class="icon"></i><span><%=__(\'verification_center.status.rejected\')%></span></div></div></div></div></div></div> <%}%> </div><div class="content hidden-sm hidden-md hidden-lg"><div class="mobile-top-block"><div class="disclaimer-text"> <%=__(\'verification_center.mobile.title\')%> </div></div><div class="approved-block flex flex-align-center flex-valign-center hidden"><span><%=__(\'verification_center.status.verified\')%></span></div> <% if (pendingECDD) { %> <div class="mobile-pending-activation-wrapper"><div class="pending-activation-title"> <%=__(\'upload_documents.popup.other.pending_ecdd.title\')%> <span class="question-tooltip" aria-label="<%=__(\'upload_documents.popup.other.pending_ecdd.tooltip\')%>" data-tooltip-classname="wide"></span></div><div class="pending-activation-description"><%=__(\'upload_documents.popup.other.pending_ecdd.subtitle\')%></div></div> <%}%> <% if (pendingPhoneVerification) { %> <div class="mobile-pending-activation-wrapper"><div class="pending-activation-title"> <%=__(\'upload_documents.popup.other.pending_phone_verification.title\')%> </div><div class="pending-activation-description"><%=__(\'upload_documents.popup.other.pending_phone_verification.subtitle\')%></div></div> <%}%> <div class="form section mobile-verification-wrapper"><div class="field field-fieldset"><div class="fieldset-legend fn-toggle" data-doc="poi"><div class="text upload-title"><%=__(\'verification_center.popup.poi.label\')%></div><span class="question-tooltip" aria-label="<%=__(\'upload_documents.help.poi.text\')%>"></span></div><div class="fieldset-content"><div class="upload-description"><%=__(\'verification_center.mobile.upload\')%></div><div class="mobile-upload-poi"><div class="upload-btn mobile-upload-poi-front"><form enctype="multipart/form-data" class="upload-doc-mobile-poi-front"><input type="hidden" name="docType" value="<%=docTypes.PROOF_OF_ID_FRONT%>"><div class="mobile-upload-error hidden"><span class="icon-error-red"></span> <span><%=__(\'verification_center.popup.oversize.message\')%></span></div><div class="fileUpload btn btn-primary upload-icon"><span></span> <span><%=__(\'verification_center.mobile.poi.upload_front\')%></span><input class="upload browse-mobile" type="file" data-id="poi-front-img" name="doc" accept="<%=config.uploadDocumentsFileMimeTypes %>"></div></form></div><div class="upload-btn mobile-upload-poi-back"><form enctype="multipart/form-data" class="upload-doc-mobile-poi-back"><input type="hidden" name="docType" value="<%=docTypes.PROOF_OF_ID_BACK%>"><div class="mobile-upload-error hidden"><span class="icon-error-red"></span> <span><%=__(\'verification_center.popup.oversize.message\')%></span></div><div class="fileUpload btn btn-primary upload-icon"><span></span> <span><%=__(\'verification_center.mobile.poi.upload_back\')%></span><input class="upload browse-mobile" type="file" data-id="poi-back-img" name="doc" accept="<%=config.uploadDocumentsFileMimeTypes %>"></div></form></div><div class="mobile-upload-status hidden"><span class="status"></span><span class="text"></span></div></div></div></div></div><div class="form section mobile-verification-wrapper"><div class="field field-fieldset"><div class="fieldset-legend fn-toggle" data-doc="por"><div class="text upload-title"><%=__(\'verification_center.popup.por.label\')%></div><span class="question-tooltip" aria-label="<%=__(notEEACompliance ? \'upload_documents.help.por.not_eea_compliance.text\' : \'upload_documents.help.por.text\')%>"></span></div><div class="fieldset-content"><div class="upload-description"><%=__(\'verification_center.mobile.upload\')%></div><div class="upload-btn mobile-upload-por"><form enctype="multipart/form-data" class="upload-doc-mobile-por"><input type="hidden" name="docType" value="<%=docTypes.PROOF_OF_RESIDENCE%>"><div class="mobile-upload-error hidden"><span class="icon-error-red"></span> <span><%=__(\'verification_center.popup.oversize.message\')%></span></div><div class="fileUpload btn btn-primary upload-icon"><span></span> <span><%=__(\'verification_center.upload_file\')%></span><input class="upload browse-mobile" type="file" data-id="por-front-img" name="doc" accept="<%=config.uploadDocumentsFileMimeTypes %>"></div><div class="mobile-upload-status hidden"><span class="status"></span><span class="text"></span></div></form></div> <% if (notEEACompliance) { %> <div class="verification-note"><%=__(\'verification_center.por.not_eea_compliance.text\')%></div> <%}%> </div></div></div> <% if(cc_list.length>0) { %> <div class="form section mobile-verification-wrapper mobile-cc-verification"></div> <% } %> <% if(citizenship === \'it\' && nciEnabled) { %> <div class="form section mobile-verification-wrapper"><div class="field field-fieldset"><div class="fieldset-legend fn-toggle" data-doc="nci"><div class="text upload-title"><%=__(\'verification_center.popup.national_country_identifier.title\')%></div></div><div class="fieldset-content mobile-upload-nci"><form id="upload-nci-form"><div class="form-col"><div class="field-row"> <%=nciCountryTemplate%> </div><div class="field-row"><div class="field field-type-input <%=nciInputDisabled ? \'nci-field-disabled\' : \'\'%>"><label><%=nciTitle%></label><input type="text" class="form-control input-field" name="<%=nciInputName%>" value="<%=nciInputValue%>"><div class="upload-error nci-error hidden"><span class="icon-error-red"></span> <span><%=__(\'registration.warning.national_country_identifier\')%></span></div></div></div><div class="field"><button type="submit" class="btn btn-primary btn-block fn-nci-update disabled"><%=__(\'save\')%></button></div></div><div class="mobile-upload-status hidden"><span class="status"></span><span class="text"></span></div></form></div></div></div> <% } %> </div> <%}%> <div class="content"><div class="other-verification-wrapper"></div></div> <% if (settings.isLiveChatEnabled()) { %> <div class="content-bottom hidden-xs"><div class="help-link"><div><%=__(\'help.need_help\')%> <a href="#" class="fn-help-live-chat-link"><%=__(\'help.right_here\')%></a></div></div><div class="action-buttons"><a class="btn btn-primary btn-block fn-done" href="#"><div class="button-container"><span><%=__(\'actions.done\')%></span></div></a></div></div> <% } %> </div>'},2748:function(e,i,t){(function(a,s){var n;void 0!==(n=function(e,i,n){var o=t(2400),d=t(2),l=t(41),c=t(811),r=t(10),p=r.REJECTED,u=r.PENDING,v=r.APPROVED,f=r.IN_PROCESS,m=o.extend({events:function(){return a.extend({},a.result(o.prototype,"events"),{"change .upload-cc":"previewCCFile","change #cc_verify":"changeCC","change #cc_verify_mobile":"changeCC"})},render:function(e){o.prototype.render.call(this),this.ccList.length>0&&this.initCCOptions()},initCCOptions:function(){var e=this;this.ccOptions={},a.each(this.ccList,function(i){e.ccOptions[i.id]={frontStatus:i.frontStatus,backStatus:i.backStatus,status:i.status}}),this.updateCCStatuses()},getBlockCCRenderTemplateData:function(){return a.extend({},o.prototype.getBlockCCRenderTemplateData.call(this),{shouldUploadCCDocs:!0,ccOptions:this.ccOptions})},getBlockCCMobileRenderTemplateData:function(){return a.extend({},o.prototype.getBlockCCMobileRenderTemplateData.call(this),{shouldUploadCCDocs:!0,ccOptions:this.ccOptions})},updateCCStatuses:function(){var e=this,i=this.getCCId(),t=this.$(".cc-upload-status"),a=this.ccOptions[i],s=function(i){return e.$(i).addClass("hidden")},n=function(i){return e.$(i).removeClass("hidden")};s(".upload-cc-front .doc-status"),s(".upload-cc-back .doc-status"),s(".mobile-upload-cc-front .mobile-upload-status"),s(".mobile-upload-cc-back .mobile-upload-status"),this.$(".cc-verification .fileUpload span").html(__("verification_center.choose_file"));var o=a.frontStatus===u||a.frontStatus===f,l=a.backStatus===u||a.frontStatus===f,c=a.frontStatus===v,r=a.backStatus===v,m=a.status;o&&(n(".upload-cc-front .doc-status"),n(".mobile-upload-cc-front .mobile-upload-status"),this.$(".upload-cc-front .fileUpload span").html(__("verification_center.update_file"))),l&&(n(".upload-cc-back .doc-status"),n(".mobile-upload-cc-back .mobile-upload-status"),this.$(".upload-cc-back .fileUpload span").html(__("verification_center.update_file")));var h=this.$(".cc-verification-mobile"),_=function(e,i,t,a){return e.find(i).removeClass("hidden").addClass(t).find(".text").html(a)};switch(t.find(".cc-upload-status div").addClass("hidden"),m===u&&((m=o||l?m:"")||(m=c&&r?v:"")),m){case u:case f:n(".cc-upload-status .in-review"),_(h,".mobile-upload-status-card","in-review",__("verification_center.status.review")),d.trigger("sm","c_verify");break;case v:n(".cc-upload-status .approved"),_(h,".mobile-upload-status-card","approved",__("verification_center.status.approved")),d.trigger("sm","c_verify");break;case p:n(".cc-upload-status .rejected"),_(h,".mobile-upload-status-card","rejected",__("verification_center.status.rejected"));break;default:t.find(".in-review").addClass("hidden"),t.find(".approved").addClass("hidden"),t.find(".rejected").addClass("hidden")}},changeCC:function(e){this.ccid=e.currentTarget.value,this.updateCCStatuses()},getCCId:function(){if(!this.ccid){var e=document.getElementById("cc_verify");this.ccid=e.options[e.selectedIndex].value}return this.ccid},previewCCFile:function(e){var i=(document.querySelector("#"+s(e.currentTarget).attr("data-id")),e.currentTarget.files[0]);i&&(l.uploadDocumentsFileExt.test(i.name)&&i.size<l.uploadDocumentsFileMaxSize?(this.$el.find(".cc-error").addClass("hidden"),this.uploadCCFile(e.currentTarget.form)):e.currentTarget.getAttribute("data-id").indexOf("cc-")>-1&&this.$el.find(".cc-error").removeClass("hidden"))},uploadCCFile:function(e){var i=this;if(s(e).find(".upload").val()){var t=s(e).find("[name=docType]").val(),a=new FormData(e),n=this.getCCId();a.append("docId",n),t===c.CREDIT_CARD_FRONT&&a.append("comment","Front"),t===c.CREDIT_CARD_BACK&&a.append("comment","Back"),this.model.uploadDocument(t,a).then(function(e){t===c.CREDIT_CARD_FRONT&&(i.ccOptions[n].frontStatus=u),t===c.CREDIT_CARD_BACK&&(i.ccOptions[n].backStatus=u),i.updateCCStatuses()})}},approveCC:function(){return!1},approveCC_mobile:function(){return!1}});n.exports=m}.call(i,t,i,e))&&(e.exports=n)}).call(i,t(0),t(4))}});