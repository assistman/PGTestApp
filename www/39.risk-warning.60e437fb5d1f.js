webpackJsonp([39],{1916:function(e,i,t){var n;void 0!==(n=function(e,i,n){var s=t(2707),a=t(2709),o=t(2713),r=t(2716),l=t(2718);n.exports={DefaultRiskWarningView:s,SpanishRiskWarningView:a,SpanishRiskWarningTradeView:o,CheckKnowledgeRiskWarningView:r,RiskWarningModel:l}}.call(i,t,i,e))&&(e.exports=n)},2208:function(e,i,t){var n;void 0!==(n=function(e,i,t){t.exports={NONE:"NONE",UNKNOWN_SCORE:"UNKNOWN",NONE_SCORE:"NONE",LOW_SCORE:"LOW",MEDIUM_SCORE:"MEDIUM",HIGH_SCORE:"HIGH",EMPTY:"EMPTY",SUBMITTING:"SUBMITTING",LOADING:"LOADING",ERROR:"ERROR",SUCCESS:"SUCCESS"}}.call(i,t,i,e))&&(e.exports=n)},2383:function(e,i,t){(function(n){var s;void 0!==(s=function(e,i,n){var s=t(0),a=(t(4),t(80)),o=a.extend({events:function(){return s.extend({},s.result(a.prototype,"events"),{"click .fn-ok":"onOK","click .fn-cancel":"onCancel","click .fn-back":"onBack"})},className:"risk-warning",name:"risk-warning",initialize:function(e){e=s.extend(e||{},{isHeaderShowed:!0}),a.prototype.initialize.apply(this,arguments),this.render()},close:function(){a.prototype.close.call(this)},onCancel:function(){this.handle("onCancel"),this.close()},onBack:function(){this.handle("onBack"),this.close()},onOK:function(){this.handle("onOK"),this.close()},handle:function(e){var i=this.options[e];s.isFunction(i)&&i()},handleError:function(e){}});n.exports=o}.call(i,t,i,e))&&(e.exports=s)}).call(i,t(0))},2707:function(e,i,t){(function(n){var s;void 0!==(s=function(e,i,n){var s=t(0),a=t(2),o=t(2383),r=s.template(t(2708)),l=t(30),c=t(9),d=t(2208),u=d.LOW_SCORE,f=d.MEDIUM_SCORE,p=d.LOADING,h=d.ERROR,g=d.SUCCESS,v=o.extend({initialize:function(){o.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:statusOfLeverages",this.onStatusOfLeveragesChanged),this.model.loadLeverages()},render:function(){o.prototype.render.call(this)},onStatusOfLeveragesChanged:function(){switch(this.model.get("statusOfLeverages")){case p:this.addChildView(".description",l,{parent:this.$el});break;case h:this.removeChildView(".description"),a.trigger("ui:message-box",{text:__("indigo.generic.error.message")});break;case g:this.removeChildView(".description");var e=this.model.get("leverage"),i=e.getMaxLeverageValue(),t=this.model.getScore()==f?f:u,n=t==f?__("medium_score.popup.message",i):__("low_score.login.demo.message"),s=t==f?__("medium_score.popup.button.accept"):__("low_score.login.live.button"),o=t==f?__("registration.medium-score.cancel.button"):__("registration.low-score.cancel.button");this.setContent(r({popupTxt:n,acceptKey:s,backKey:o,score:t,allowBack:c.isRegistrationFinalStepAllowBack(t)}))}}});n.exports=v}.call(i,t,i,e))&&(e.exports=s)}).call(i,t(0))},2708:function(e,i){e.exports='<div class="fluid-scroll-content flex flex-column"><div class="description"><div> <%=popupTxt%> </div></div><div class="actions flex flex-row"> <%if (allowBack) {%> <button class="btn btn-link flex-stretch fn-back" data-score="<%-score%>"><%=backKey%></button> <%}%> <button class="btn btn-primary flex-stretch fn-ok" data-score="<%-score%>"><%=acceptKey%></button></div></div>'},2709:function(e,i,t){(function(n){var s;void 0!==(s=function(e,i,n){var s=t(0),a=(t(4),t(2)),o=t(2383),r=s.template(t(2710)),l=s.template(t(2711)),c=s.template(t(2712)),d=t(71),u=t(30),f=t(9),p=t(2208),h=p.MEDIUM_SCORE,g=p.SUBMITTING,v=p.LOADING,m=p.ERROR,b=p.SUCCESS,_=o.extend({initialize:function(){o.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:statusOfSubmittingSignature",this.onStatusOfSubmittingChanged),this.listenTo(this.model,"change:statusOfLeverages",this.onStatusOfLeveragesChanged),this.model.loadLeverages()},onOK:function(){var e=this.form,i=e.validate(),t=this.model.get("score"),n="";(f.isMiddleScoreRiskWarningConfirmationEditEnabled()&&t===h||f.isRiskWarningConfirmationEditEnabled()&&t!==h)&&(n=e.field("signature").value());i||this.model.submitSignature(n,!0)},onStatusOfSubmittingChanged:function(){switch(this.model.get("statusOfSubmittingSignature")){case g:this.addChildView(".description",u,{parent:this.$el});break;case m:this.removeChildView(".description"),a.trigger("ui:message-box",{text:__("indigo.generic.error.message")});break;case b:this.removeChildView(".description"),o.prototype.onOK.call(this)}},onStatusOfLeveragesChanged:function(){switch(this.model.get("statusOfLeverages")){case v:this.addChildView(".description",u,{parent:this.$el});break;case m:this.removeChildView(".description"),a.trigger("ui:message-box",{text:__("indigo.generic.error.message")});break;case b:this.onSuccess()}},onSuccess:function(){var e=this.model.get("leverage"),i=this.model.get("score"),t=e.getMaxLeverageValue(),n=i===h&&f.isRegistrationFinalStepAllowBack("medium"),s=i===h?__("spanish.regulation.medium.score.new_user.text",t):__("spanish.regulation.high.score.new_user.text"),a=i===h?__("spanish.regulation.medium.score.new_user.confirmation"):__("spanish.regulation.high.score.new_user.confirmation"),o=__("medium_score.popup.button.accept"),u=__("registration.medium-score.cancel.button");this.setContent(r({popupTxt:s,acceptKey:o,backKey:u,allowBack:n})),this.removeChildView(".description");var p={template:l,templateOptions:{spanishConfirmText:a}};(!f.isMiddleScoreRiskWarningConfirmationEditEnabled()&&i===h||!f.isRiskWarningConfirmationEditEnabled()&&i!==h)&&(p={template:c}),this.form=this.addChildView(".form-container",d,p),this.form.field("signature")&&this.form.field("signature").setRules({not_empty:__("registration.warning.this_field_is_required"),strict_equals:[new RegExp('"?'+a.replace(".",".?")+'"?$',"gi"),__("indigo.spanish.regulation.confirmation.error")]}),this.form.field("spanishRiskWarningCheckbox").setRules({not_equals:[!1,__("registration.warning.this_field_is_required")]})}});n.exports=_}.call(i,t,i,e))&&(e.exports=s)}).call(i,t(0))},2710:function(e,i){e.exports='<div class="description"><%=popupTxt%></div><div class="form-container"></div><div class="actions flex flex-row"> <%if (allowBack) {%> <button class="btn btn-link flex-stretch fn-back"><%=backKey%></button> <%}%> <button class="btn btn-primary flex-stretch fn-ok"><%=acceptKey%></button></div>'},2711:function(e,i){e.exports='<div class="form-col"><div class="field field-type-input"><label><%=__(\'spanish.regulation.medium.score.new_user.confirmation.header\')%></label><br><label><%= \'"\' + spanishConfirmText + \'"\' %></label><input type="text" class="form-control input-field" name="signature" value="" no-paste="true"><div class="field-conversion"><div class="content"></div></div><div class="field-tooltip bottom-of-field"><div class="content"></div></div></div><div class="field field-type-checkbox"><div class="checkbox-row"><input type="checkbox" id="spanishRiskWarningCheckbox" name="spanishRiskWarningCheckbox"><label for="spanishRiskWarningCheckbox"><span class="checkbox_label_inline"><%=__(\'spanish.regulation.check_box.text\')%></span></label><div class="field-tooltip"><div class="content"></div></div></div></div></div>'},2712:function(e,i){e.exports='<div class="form-col"><div class="field field-type-checkbox"><div class="checkbox-row"><input type="checkbox" id="spanishRiskWarningCheckbox" name="spanishRiskWarningCheckbox"><label for="spanishRiskWarningCheckbox"><span class="checkbox_label_inline"><%=__(\'spanish.regulation.check_box.text\')%></span></label><div class="field-tooltip"><div class="content"></div></div></div></div></div>'},2713:function(e,i,t){(function(n){var s;void 0!==(s=function(e,i,n){var s=t(0),a=(t(4),t(2)),o=t(2383),r=s.template(t(2714)),l=s.template(t(2715)),c=t(71),d=t(30),u=(t(9),t(7)),f=t(2208),p=f.SUBMITTING,h=f.ERROR,g=f.SUCCESS,v=o.extend({className:"risk-warning-trade spanish-risk-warning-trade",initialize:function(){o.prototype.initialize.apply(this,arguments),this.listenTo(this.model,"change:statusOfSubmittingSignature",this.onStatusOfSubmittingChanged),this.listenTo(this.model,"all",this.onFieldsChanged)},onFieldsChanged:function(e,i,t){var n=this.$(".fn-ok"),s=this.form.validate(!0),a=this.getFormData(),o=a.firstName,r=a.lastName;!s&&o&&r?n.removeClass("disabled"):n.addClass("disabled")},getFormData:function(){var e=this,i=function(i){return String(e.form.field(i).value()).trim()};return{firstName:i("firstName"),lastName:i("lastName")}},onOK:function(){if(!this.$(".fn-ok").hasClass("disabled")){var e=this.form,i=e.validate(),t=this.getFormData(),n=t.firstName,s=t.lastName;!i&&n&&s&&this.model.submitSignature(n+" "+s,!0)}},onStatusOfSubmittingChanged:function(){switch(this.model.get("statusOfSubmittingSignature")){case p:this.addChildView(".description",d,{parent:this.$el});break;case h:this.removeChildView(".description"),a.trigger("ui:message-box",{text:__("indigo.generic.error.message")});break;case g:this.removeChildView(".description"),o.prototype.onOK.call(this),u.getUserDataCompliance().load()}},render:function(){o.prototype.render.call(this);var e=this.model;this.setContent(r()),this.$(".popup-actions").css("display","block");var i=this.addChildView(".form-container",c,{template:l});return this.listenTo(i,"field:change:firstName",function(i){return e.set("firstName",i.value())}),this.listenTo(i,"field:change:lastName",function(i){return e.set("lastName",i.value())}),this.listenTo(i,"field:change:confirmation",function(i){return e.confirm(i.value())}),i.setRules({firstName:{not_empty:__("registration.warning.this_field_is_required")},lastName:{not_empty:__("registration.warning.this_field_is_required")},confirmation:{not_equals:[!1,__("registration.warning.this_field_is_required")]}}),this.form=i,this}});n.exports=v}.call(i,t,i,e))&&(e.exports=s)}).call(i,t(0))},2714:function(e,i){e.exports='<div class="description"><%=__(\'risk.warning.popup.text\')%></div><div class="form-container"></div><div class="actions flex flex-row"><button class="btn btn-primary flex-stretch fn-ok disabled"><%= __(\'risk.warning.popup.confirm_button\') %></button></div>'},2715:function(e,i){e.exports='<div class="form-col"><div class="field field-type-checkbox"><div class="checkbox-row"><input type="checkbox" id="spanishRiskWarningCheckbox" name="confirmation"><label for="spanishRiskWarningCheckbox"><span class="checkbox_label_inline"><%=__(\'risk.warning.popup.confirmation\')%></span></label><div class="field-tooltip"><div class="content"></div></div></div></div> <%=__(\'risk.warning.popup.signature_title\')%>:<div class="field field-type-input"><label><%=__(\'risk.warning.popup.first_name\')%></label><input type="text" class="form-control input-field" name="firstName" maxlength="50" value="" no-paste="true"><div class="field-conversion"><div class="content"></div></div><div class="field-tooltip bottom-of-field"><div class="content"></div></div></div><div class="field field-type-input"><label><%=__(\'risk.warning.popup.last_name\')%></label><input type="text" class="form-control input-field" name="lastName" maxlength="50" value="" no-paste="true"><div class="field-conversion"><div class="content"></div></div><div class="field-tooltip bottom-of-field"><div class="content"></div></div></div></div>'},2716:function(e,i,t){(function(n){var s;void 0!==(s=function(e,i,n){var s=t(0),a=t(2383),o=s.template(t(2717)),r=t(9),l=t(2208),c=l.LOW_SCORE,d=a.extend({render:function(){a.prototype.render.call(this);var e=c,i=__("low_score.login.check.knowledge.message"),t=__("low_score.login.live.button"),n=__("registration.low-score.cancel.button"),s=__("registration.low_score.check_knowledge.button");this.setContent(o({popupTxt:i,acceptKey:t,backKey:n,checkKnowledgeKey:s,allowBack:r.isRegistrationFinalStepAllowBack(e)}))}});n.exports=d}.call(i,t,i,e))&&(e.exports=s)}).call(i,t(0))},2717:function(e,i){e.exports='<div class="fluid-scroll-content flex flex-column"><div class="description"><div> <%=popupTxt%> </div></div><div class="actions flex flex-row"> <%if (allowBack) {%> <button class="btn btn-link flex-stretch fn-back"><%=backKey%></button> <%}%> <button class="btn btn-primary flex-stretch fn-cancel"><%=checkKnowledgeKey%></button></div><div class="footer"><a class="fn-ok go-to-demo"><%=acceptKey%></a></div></div>'},2718:function(e,i,t){var n;void 0!==(n=function(e,i,n){var s=(t(0),t(13)),a=t(8),o=t(7),r=t(2208),l=r.HIGH_SCORE,c=r.EMPTY,d=r.SUBMITTING,u=r.LOADING,f=r.ERROR,p=r.SUCCESS,h=s.extend({defaults:function(){return{score:l,statusOfSubmittingSignature:c,statusOfLeverages:c,firstName:c,lastName:c,confirmed:null}},getScore:function(){return this.get("score")},submitSignature:function(e,i){var t=this.control("statusOfSubmittingSignature");t(d);var n={signature:e,confirmationChecked:i};return a.submitSignature(n).then(function(e){return t(p)}).catch(function(e){return t(f)})},loadLeverages:function(){var e=this.control("statusOfLeverages");e(u);var i=o.getUserLeverageLevels();return i.load().then(function(t){return e(p,{leverage:i})}).catch(function(i){e(f)})},confirm:function(e){this.set("confirmed",e)}});n.exports=h}.call(i,t,i,e))&&(e.exports=n)}});