webpackJsonp([10],{1357:function(t,e){},1358:function(t,e){t.exports='<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 508.52 508.52" enable-background="new 0 0 508.52 508.52"><path d="M254.26 0c-140.415 0-254.26 113.845-254.26 254.26s113.845 254.26 254.26 254.26 254.26-113.845 254.26-254.26-113.845-254.26-254.26-254.26zm0 412.664c-17.544 0-31.782-14.239-31.782-31.782 0-17.576 14.239-31.782 31.782-31.782s31.782 14.207 31.782 31.782c0 17.543-14.238 31.782-31.782 31.782zm31.782-126.622c0 17.544-14.239 31.782-31.782 31.782s-31.782-14.239-31.782-31.782v-158.912c0-17.544 14.239-31.782 31.782-31.782s31.782 14.239 31.782 31.782v158.912z"/></svg>'},1359:function(t,e,n){(function(t,r,o){var i;(function(s){function u(t){return t&&t.Object===Object?t:null}function c(t){var e,n=t.length,r=Array(n);for(e=0;e<n;e++)r[e]=t[e];return r}function a(t){return function(){try{return t.apply(this,arguments)}catch(t){return Eo.e=t,Eo}}}function h(t){throw t}function l(t,e){var n,r,o;if(at&&e.stack&&"object"==typeof t&&null!==t&&t.stack&&-1===t.stack.indexOf(ft)){for(n=[],r=e;r;r=r.source)r.stack&&n.unshift(r.stack);n.unshift(t.stack),o=n.join("\n"+ft+"\n"),t.stack=p(o)}}function p(t){var e,n,r,o=t.split("\n"),i=[];for(e=0,n=o.length;e<n;e++)r=o[e],f(r)||d(r)||!r||i.push(r);return i.join("\n")}function f(t){var e,n,r=v(t);return!!r&&(e=r[0],n=r[1],e===pt&&n>=lt&&n<=ro)}function d(t){return-1!==t.indexOf("(module.js:")||-1!==t.indexOf("(node.js:")}function b(){var t,e,n;if(at)try{throw Error()}catch(r){if(t=r.stack.split("\n"),e=t[0].indexOf("@")>0?t[1]:t[2],!(n=v(e)))return;return pt=n[0],n[1]}}function v(t){var e,n,r=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(t);return r?[r[1],+r[2]]:(e=/at ([^ ]+):(\d+):(?:\d+)$/.exec(t))?[e[1],+e[2]]:(n=/.*@(.+):(\d+)$/.exec(t),n?[n[1],+n[2]]:s)}function _(t,e,n,r,o,i){var u,c,a,h,l,p,f,d,b=te(t),v=b.length;if(v!==te(e).length&&!r)return!1;for(u=v;u--;)if(c=b[u],!(r?c in e:Jt.call(e,c)))return!1;for(a=r;++u<v;){if(c=b[u],h=t[c],l=e[c],!(p===s?n(h,l,r,o,i):p))return!1;a||(a="constructor"===c)}return!(!a&&(f=t.constructor,d=e.constructor,f!==d&&"constructor"in t&&"constructor"in e&&!("function"==typeof f&&f instanceof f&&"function"==typeof d&&d instanceof d)))}function y(t,e,n){switch(n){case kt:case $t:return+t==+e;case jt:return t.name===e.name&&t.message===e.message;case At:return t!==+t?e!==+e:t===+e;case qt:case Rt:return t===e+""}return!1}function m(t){return!!t&&"object"==typeof t}function w(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=Xt}function g(t){return m(t)&&w(t.length)&&!!Yt[Zt.call(t)]}function C(t,e){for(var n=-1,r=t.length;++n<r;)if(e(t[n],n,t))return!0;return!1}function E(t,e,n,r,o,i){var u,c,a,h=-1,l=t.length,p=e.length;if(l!==p&&!(r&&p>l))return!1;for(;++h<l;){if(u=t[h],c=e[h],a!==s){if(a)continue;return!1}if(r){if(!C(e,function(t){return u===t||n(u,t,r,o,i)}))return!1}else if(u!==c&&!n(u,c,r,o,i))return!1}return!0}function x(t,e,n,r,o,i){var s,u,c,a,h,l,p,f=re(t),d=re(e),b=St,v=St;if(f||(b=Zt.call(t),b===Dt?b=Tt:b!==Tt&&(f=g(t))),d||(v=Zt.call(e))===Dt&&(v=Tt),s=b===Tt&&!ne(t),
u=v===Tt&&!ne(e),c=b===v,c&&!f&&!s)return y(t,e,b);if(!r&&(a=s&&Jt.call(t,"__wrapped__"),h=u&&Jt.call(e,"__wrapped__"),a||h))return n(a?t.value():t,h?e.value():e,r,o,i);if(!c)return!1;for(o||(o=[]),i||(i=[]),l=o.length;l--;)if(o[l]===t)return i[l]===e;return o.push(t),i.push(e),p=(f?E:_)(t,e,n,r,o,i),o.pop(),i.pop(),p}function O(t,e,n,r,o){return t===e||(null==t||null==e||!ee(t)&&!m(e)?t!==t&&e!==e:x(t,e,O,n,r,o))}function D(t,e){var n,r=Array(t);for(n=0;n<t;n++)r[n]=e();return r}function S(t,e){this.id=t,this.value=e}function k(t){this._s=t,this.isDisposed=!1}function $(t){this._s=t}function j(t){this._s=t,this._l=t.length,this._i=0}function N(t){this._a=t}function P(t){this._a=t,this._l=L(t),this._i=0}function A(t){return"number"==typeof t&&po.isFinite(t)}function T(t){var e,n=t[wt];if(!n&&"string"==typeof t)return e=new $(t),e[wt]();if(!n&&t.length!==s)return e=new N(t),e[wt]();if(!n)throw new TypeError("Object is not iterable");return t[wt]()}function q(t){var e=+t;return 0===e?e:isNaN(e)?e:e<0?-1:1}function L(t){var e=+t.length;return isNaN(e)?0:0!==e&&A(e)?(e=q(e)*Math.floor(Math.abs(e)),e<=0?0:e>fn?fn:e):e}function R(t,e){return Ce(t)||(t=De),new bn(e,t)}function F(t,e){this.observer=t,this.parent=e}function I(){return!1}function M(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function I(){return!1}function M(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function I(){return!1}function W(){return[]}function I(){return!1}function W(){return[]}function M(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return n}function z(t){return function(e){return t.subscribe(e)}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function U(t){return{"@@iterator":function(){return{next:function(){return{done:!1,value:t}}}}}}function V(t,e){return function(n){var r,o,i=n;for(r=0;r<e;r++){if(o=i[t[r]],s===o)return s;i=o}return i}}function B(t,e,n,r){var o=new Xr;return r.push(K(o,e,n)),t.apply(e,r),o.asObservable()}function K(t,e,n){return function(){var r,o=arguments.length,i=Array(o);for(r=0;r<o;r++)i[r]=arguments[r];if(Co(n)){if((i=xo(n).apply(e,i))===Eo)return t.onError(i.e);t.onNext(i)}else i.length<=1?t.onNext(i[0]):t.onNext(i);t.onCompleted()}}function H(t,e,n,r){var o=new Xr;return r.push(Q(o,e,n)),t.apply(e,r),o.asObservable()}function Q(t,e,n){return function(){var r,o,i,s=arguments[0];if(s)return t.onError(s);for(r=arguments.length,o=[],i=1;i<r;i++)o[i-1]=arguments[i];if(Co(n)){if((o=xo(n).apply(e,o))===Eo)return t.onError(o.e);t.onNext(o)}else o.length<=1?t.onNext(o[0]):t.onNext(o);t.onCompleted()}}function Y(t){return po.StaticNodeList?t instanceof po.StaticNodeList||t instanceof po.NodeList:"[object NodeList]"===Object.prototype.toString.call(t)}function G(t,e,n){this._e=t,this._n=e,this._fn=n,this._e.addEventListener(this._n,this._fn,!1),this.isDisposed=!1}function J(t,e,n){var r,o,i=new ue,s=Object.prototype.toString.call(t);if(Y(t)||"[object HTMLCollection]"===s)for(r=0,
o=t.length;r<o;r++)i.add(J(t.item(r),e,n));else t&&i.add(new G(t,e,n));return i}function Z(t,e){return new Tr(t,e)}function X(t,e,n){return new Yr(function(r){var o=t,i=ge(e);return n.scheduleRecursiveFuture(0,o,function(t,e){if(i>0){var s=n.now();o=new Date(o.getTime()+i),o.getTime()<=s&&(o=new Date(s+i))}r.onNext(t),e(t+1,new Date(o))})})}function tt(t,e,n){return t===e?new Yr(function(t){return n.schedulePeriodic(0,e,function(e){return t.onNext(e),e+1})}):cn(function(){return X(new Date(n.now()+t),e,n)})}function et(t,e,n){return new Yr(function(r){var o,i=!1,s=new ve,u=null,c=[],a=!1;return o=t.materialize().timestamp(n).subscribe(function(t){var o,h;"E"===t.value.kind?(c=[],c.push(t),u=t.value.error,h=!a):(c.push({value:t.value,timestamp:t.timestamp+e}),h=!i,i=!0),h&&(null!==u?r.onError(u):(o=new be,s.setDisposable(o),o.setDisposable(n.scheduleRecursiveFuture(null,e,function(t,e){var o,s,h,l;if(null===u){a=!0;do{h=null,c.length>0&&c[0].timestamp-n.now()<=0&&(h=c.shift().value),null!==h&&h.accept(r)}while(null!==h);l=!1,s=0,c.length>0?(l=!0,s=Math.max(0,c[0].timestamp-n.now())):i=!1,o=u,a=!1,null!==o?r.onError(o):l&&e(null,s)}}))))}),new _e(o,s)},t)}function nt(t,e,n){return cn(function(){return et(t,e-n.now(),n)})}function rt(t,e,n){var r,o;return Co(e)?o=e:(r=e,o=n),new Yr(function(e){function n(){c.setDisposable(t.subscribe(function(t){var n,r=xo(o)(t);if(r===Eo)return e.onError(r.e);n=new be,s.add(n),n.setDisposable(r.subscribe(function(){e.onNext(t),s.remove(n),i()},function(t){e.onError(t)},function(){e.onNext(t),s.remove(n),i()}))},function(t){e.onError(t)},function(){u=!0,c.dispose(),i()}))}function i(){u&&0===s.length&&e.onCompleted()}var s=new ue,u=!1,c=new ve;return r?c.setDisposable(r.subscribe(n,function(t){e.onError(t)},n)):n(),new _e(c,s)},t)}function ot(t,e){return new Yr(function(n){var r,o=!1,i=new ve,s=0,u=t.subscribe(function(t){var u,c,a=xo(e)(t);if(a===Eo)return n.onError(a.e);go(a)&&(a=jr(a)),o=!0,r=t,s++,u=s,c=new be,i.setDisposable(c),c.setDisposable(a.subscribe(function(){o&&s===u&&n.onNext(r),o=!1,c.dispose()},function(t){n.onError(t)},function(){o&&s===u&&n.onNext(r),o=!1,c.dispose()}))},function(t){i.dispose(),n.onError(t),o=!1,s++},function(){i.dispose(),o&&n.onNext(r),n.onCompleted(),o=!1,s++});return new _e(u,i)},t)}function it(t,e,n,r){return Co(e)&&(r=n,n=e,e=mn()),Qe.isObservable(r)||(r=On(new Ur)),new Yr(function(o){function i(t){function e(){return c=n===u}var n=u,i=new be;h.setDisposable(i),i.setDisposable(t.subscribe(function(){e()&&a.setDisposable(r.subscribe(o)),i.dispose()},function(t){e()&&o.onError(t)},function(){e()&&a.setDisposable(r.subscribe(o))}))}function s(){var t=!c;return t&&u++,t}var u,c,a=new ve,h=new ve,l=new be;return a.setDisposable(l),u=0,c=!1,i(e),l.setDisposable(t.subscribe(function(t){if(s()){o.onNext(t);var e=xo(n)(t);if(e===Eo)return o.onError(e.e);i(go(e)?jr(e):e)}},function(t){s()&&o.onError(t)},function(){s()&&o.onCompleted()})),new _e(a,h)},t)}function st(t,e,n,r){return Ce(n)&&(r=n,n=On(new Ur)),n instanceof Error&&(n=On(n)),Ce(r)||(r=Ae),
Qe.isObservable(n)||(n=On(new Ur)),new Yr(function(o){function i(){var t=s;h.setDisposable(r.scheduleFuture(null,e,function(){(a=s===t)&&(go(n)&&(n=jr(n)),c.setDisposable(n.subscribe(o)))}))}var s=0,u=new be,c=new ve,a=!1,h=new ve;return c.setDisposable(u),i(),u.setDisposable(t.subscribe(function(t){a||(s++,o.onNext(t),i())},function(t){a||(s++,o.onError(t))},function(){a||(s++,o.onCompleted())})),new _e(c,h)},t)}function ut(t,e,n){return new Yr(function(r){function o(t,e){if(a[e]=t,s[e]=!0,u||(u=s.every(vo))){if(i)return r.onError(i);var o=xo(n).apply(null,a);if(o===Eo)return r.onError(o.e);r.onNext(o)}c&&a[1]&&r.onCompleted()}var i,s=[!1,!1],u=!1,c=!1,a=Array(2);return new _e(t.subscribe(function(t){o(t,0)},function(t){a[1]?r.onError(t):i=t},function(){c=!0,a[1]&&r.onCompleted()}),e.subscribe(function(t){o(t,1)},function(t){r.onError(t)},function(){c=!0,o(!0,1)}))},t)}function ct(t){return{"@@transducer/init":function(){return t},"@@transducer/step":function(t,e){return t.onNext(e)},"@@transducer/result":function(t){return t.onCompleted()}}}var at,ht,lt,pt,ft,dt,bt,vt,_t,yt,mt,wt,gt,Ct,Et,xt,Ot,Dt,St,kt,$t,jt,Nt,Pt,At,Tt,qt,Lt,Rt,Ft,It,Mt,Wt,zt,Ut,Vt,Bt,Kt,Ht,Qt,Yt,Gt,Jt,Zt,Xt,te,ee,ne,re,oe,ie,se,ue,ce,ae,he,le,pe,fe,de,be,ve,_e,ye,me,we,ge,Ce,Ee,xe,Oe,De,Se,ke,$e,je,Ne,Pe,Ae,Te,qe,Le,Re,Fe,Ie,Me,We,ze,Ue,Ve,Be,Ke,He,Qe,Ye,Ge,Je,Ze,Xe,tn,en,nn,rn,on,sn,un,cn,an,hn,ln,pn,fn,dn,bn,vn,_n,yn,mn,wn,gn,Cn,En,xn,On,Dn,Sn,kn,$n,jn,Nn,Pn,An,Tn,qn,Ln,Rn,Fn,In,Mn,Wn,zn,Un,Vn,Bn,Kn,Hn,Qn,Yn,Gn,Jn,Zn,Xn,tr,er,nr,rr,or,ir,sr,ur,cr,ar,hr,lr,pr,fr,dr,br,vr,_r,yr,mr,wr,gr,Cr,Er,xr,Or,Dr,Sr,kr,$r,jr,Nr,Pr,Ar,Tr,qr,Lr,Rr,Fr,Ir,Mr,Wr,zr,Ur,Vr,Br,Kr,Hr,Qr,Yr,Gr,Jr,Zr,Xr,to,eo,no,ro,oo={function:!0,object:!0},io=oo[typeof e]&&e&&!e.nodeType?e:null,so=oo[typeof t]&&t&&!t.nodeType?t:null,uo=u(io&&so&&"object"==typeof r&&r),co=u(oo[typeof self]&&self),ao=u(oo[typeof window]&&window),ho=so&&so.exports===io?io:null,lo=u(oo[typeof this]&&this),po=uo||ao!==(lo&&lo.window)&&ao||co||lo||Function("return this")(),fo={internals:{},config:{Promise:po.Promise},helpers:{}},bo=fo.helpers.noop=function(){},vo=fo.helpers.identity=function(t){return t},_o=fo.helpers.defaultNow=Date.now,yo=fo.helpers.defaultComparer=function(t,e){return oe(t,e)},mo=fo.helpers.defaultSubComparer=function(t,e){return t>e?1:t<e?-1:0},wo=(fo.helpers.defaultKeySerializer=function(t){return""+t},fo.helpers.defaultError=function(t){throw t}),go=fo.helpers.isPromise=function(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then},Co=fo.helpers.isFunction=function(){var t=function(t){return"function"==typeof t||!1};return t(/x/)&&(t=function(t){return"function"==typeof t&&"[object Function]"==toString.call(t)}),t}(),Eo={e:{}},xo=fo.internals.tryCatch=function(t){if(!Co(t))throw new TypeError("fn must be a function");return a(t)};fo.config.longStackSupport=!1,at=!1,ht=xo(function(){throw Error()})(),at=!!ht.e&&!!ht.e.stack,lt=b(),ft="From previous event:",dt=fo.EmptyError=function(){this.message="Sequence contains no elements.",Error.call(this)},
dt.prototype=Object.create(Error.prototype),dt.prototype.name="EmptyError",bt=fo.ObjectDisposedError=function(){this.message="Object has been disposed",Error.call(this)},bt.prototype=Object.create(Error.prototype),bt.prototype.name="ObjectDisposedError",vt=fo.ArgumentOutOfRangeError=function(){this.message="Argument out of range",Error.call(this)},vt.prototype=Object.create(Error.prototype),vt.prototype.name="ArgumentOutOfRangeError",_t=fo.NotSupportedError=function(t){this.message=t||"This operation is not supported",Error.call(this)},_t.prototype=Object.create(Error.prototype),_t.prototype.name="NotSupportedError",yt=fo.NotImplementedError=function(t){this.message=t||"This operation is not implemented",Error.call(this)},yt.prototype=Object.create(Error.prototype),yt.prototype.name="NotImplementedError",mt=fo.helpers.notImplemented=function(){throw new yt},fo.helpers.notSupported=function(){throw new _t},wt="function"==typeof Symbol&&Symbol.iterator||"_es6shim_iterator_",po.Set&&"function"==typeof(new po.Set)["@@iterator"]&&(wt="@@iterator"),gt=fo.doneEnumerator={done:!0,value:s},Ct=fo.helpers.isIterable=function(t){return t&&t[wt]!==s},Et=fo.helpers.isArrayLike=function(t){return t&&t.length!==s},fo.helpers.iterator=wt,xt=fo.internals.bindCallback=function(t,e,n){if(s===e)return t;switch(n){case 0:return function(){return t.call(e)};case 1:return function(n){return t.call(e,n)};case 2:return function(n,r){return t.call(e,n,r)};case 3:return function(n,r,o){return t.call(e,n,r,o)}}return function(){return t.apply(e,arguments)}},Ot=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],Ot.length,Dt="[object Arguments]",St="[object Array]",kt="[object Boolean]",$t="[object Date]",jt="[object Error]",Nt="[object Function]",Pt="[object Map]",At="[object Number]",Tt="[object Object]",qt="[object RegExp]",Lt="[object Set]",Rt="[object String]",Ft="[object WeakMap]",It="[object ArrayBuffer]",Mt="[object Float32Array]",Wt="[object Float64Array]",zt="[object Int8Array]",Ut="[object Int16Array]",Vt="[object Int32Array]",Bt="[object Uint8Array]",Kt="[object Uint8ClampedArray]",Ht="[object Uint16Array]",Qt="[object Uint32Array]",Yt={},Yt[Mt]=Yt[Wt]=Yt[zt]=Yt[Ut]=Yt[Vt]=Yt[Bt]=Yt[Kt]=Yt[Ht]=Yt[Qt]=!0,Yt[Dt]=Yt[St]=Yt[It]=Yt[kt]=Yt[$t]=Yt[jt]=Yt[Nt]=Yt[Pt]=Yt[At]=Yt[Tt]=Yt[qt]=Yt[Lt]=Yt[Rt]=Yt[Ft]=!1,Gt=Object.prototype,Jt=Gt.hasOwnProperty,Zt=Gt.toString,Xt=Math.pow(2,53)-1,te=Object.keys||function(){var t=Object.prototype.hasOwnProperty,e=!{toString:null}.propertyIsEnumerable("toString"),n=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],r=n.length;return function(o){if("object"!=typeof o&&("function"!=typeof o||null===o))throw new TypeError("Object.keys called on non-object");var i,s,u=[];for(i in o)t.call(o,i)&&u.push(i);if(e)for(s=0;s<r;s++)t.call(o,n[s])&&u.push(n[s]);return u}}(),ee=fo.internals.isObject=function(t){var e=typeof t;return!!t&&("object"===e||"function"===e)},ne=function(){try{Object({toString:0
}+"")}catch(t){return function(){return!1}}return function(t){return"function"!=typeof t.toString&&"string"==typeof(t+"")}}(),re=Array.isArray||function(t){return m(t)&&w(t.length)&&Zt.call(t)===St},oe=fo.internals.isEqual=function(t,e){return O(t,e)},{}.hasOwnProperty,Array.prototype.slice,ie=fo.internals.inherits=function(t,e){function n(){this.constructor=t}n.prototype=e.prototype,t.prototype=new n},se=fo.internals.addProperties=function(t){var e,n,r,o,i,s,u;for(e=[],n=1,r=arguments.length;n<r;n++)e.push(arguments[n]);for(o=0,i=e.length;o<i;o++){s=e[o];for(u in s)t[u]=s[u]}},fo.internals.addRef=function(t,e){return new Yr(function(n){return new _e(e.getDisposable(),t.subscribe(n))})},ue=fo.CompositeDisposable=function(){var t,e,n=[];if(Array.isArray(arguments[0]))n=arguments[0];else for(e=arguments.length,n=Array(e),t=0;t<e;t++)n[t]=arguments[t];this.disposables=n,this.isDisposed=!1,this.length=n.length},ce=ue.prototype,ce.add=function(t){this.isDisposed?t.dispose():(this.disposables.push(t),this.length++)},ce.remove=function(t){var e,n=!1;return this.isDisposed||-1!==(e=this.disposables.indexOf(t))&&(n=!0,this.disposables.splice(e,1),this.length--,t.dispose()),n},ce.dispose=function(){var t,e,n;if(!this.isDisposed){for(this.isDisposed=!0,t=this.disposables.length,e=Array(t),n=0;n<t;n++)e[n]=this.disposables[n];for(this.disposables=[],this.length=0,n=0;n<t;n++)e[n].dispose()}},ae=fo.Disposable=function(t){this.isDisposed=!1,this.action=t||bo},ae.prototype.dispose=function(){this.isDisposed||(this.action(),this.isDisposed=!0)},he=ae.create=function(t){return new ae(t)},le=ae.empty={dispose:bo},pe=ae.isDisposable=function(t){return t&&Co(t.dispose)},fe=ae.checkDisposed=function(t){if(t.isDisposed)throw new bt},de=ae._fixup=function(t){return pe(t)?t:le},be=fo.SingleAssignmentDisposable=function(){this.isDisposed=!1,this.current=null},be.prototype.getDisposable=function(){return this.current},be.prototype.setDisposable=function(t){if(this.current)throw Error("Disposable has already been assigned");var e=this.isDisposed;!e&&(this.current=t),e&&t&&t.dispose()},be.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null,t&&t.dispose()}},ve=fo.SerialDisposable=function(){this.isDisposed=!1,this.current=null},ve.prototype.getDisposable=function(){return this.current},ve.prototype.setDisposable=function(t){var e,n=this.isDisposed;n||(e=this.current,this.current=t),e&&e.dispose(),n&&t&&t.dispose()},ve.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0;var t=this.current;this.current=null}t&&t.dispose()},_e=fo.BinaryDisposable=function(t,e){this._first=t,this._second=e,this.isDisposed=!1},_e.prototype.dispose=function(){var t,e;this.isDisposed||(this.isDisposed=!0,t=this._first,this._first=null,t&&t.dispose(),e=this._second,this._second=null,e&&e.dispose())},ye=fo.NAryDisposable=function(t){this._disposables=t,this.isDisposed=!1},ye.prototype.dispose=function(){if(!this.isDisposed){this.isDisposed=!0
;for(var t=0,e=this._disposables.length;t<e;t++)this._disposables[t].dispose();this._disposables.length=0}},fo.RefCountDisposable=function(){function t(t){this.disposable=t,this.disposable.count++,this.isInnerDisposed=!1}function e(t){this.underlyingDisposable=t,this.isDisposed=!1,this.isPrimaryDisposed=!1,this.count=0}return t.prototype.dispose=function(){this.disposable.isDisposed||this.isInnerDisposed||(this.isInnerDisposed=!0,0===--this.disposable.count&&this.disposable.isPrimaryDisposed&&(this.disposable.isDisposed=!0,this.disposable.underlyingDisposable.dispose()))},e.prototype.dispose=function(){this.isDisposed||this.isPrimaryDisposed||(this.isPrimaryDisposed=!0,0===this.count&&(this.isDisposed=!0,this.underlyingDisposable.dispose()))},e.prototype.getDisposable=function(){return this.isDisposed?le:new t(this)},e}(),me=fo.internals.ScheduledItem=function(t,e,n,r,o){this.scheduler=t,this.state=e,this.action=n,this.dueTime=r,this.comparer=o||mo,this.disposable=new be},me.prototype.invoke=function(){this.disposable.setDisposable(this.invokeCore())},me.prototype.compareTo=function(t){return this.comparer(this.dueTime,t.dueTime)},me.prototype.isCancelled=function(){return this.disposable.isDisposed},me.prototype.invokeCore=function(){return de(this.action(this.scheduler,this.state))},we=fo.Scheduler=function(){function t(){}t.isScheduler=function(e){return e instanceof t};var e=t.prototype;return e.schedule=function(t,e){throw new yt},e.scheduleFuture=function(e,n,r){var o=n;return o instanceof Date&&(o-=this.now()),o=t.normalize(o),0===o?this.schedule(e,r):this._scheduleFuture(e,o,r)},e._scheduleFuture=function(t,e,n){throw new yt},t.now=_o,t.prototype.now=_o,t.normalize=function(t){return t<0&&(t=0),t},t}(),ge=we.normalize,Ce=we.isScheduler,function(t){function e(t,e){function n(e){function r(t,e){return s?i.remove(c):u=!0,o(e,n),le}var s=!1,u=!1,c=t.schedule(e,r);u||(i.add(c),s=!0)}var r=e[0],o=e[1],i=new ue;return o(r,n),i}function n(t,e){function n(e,r){function s(t,e){return u?i.remove(a):c=!0,o(e,n),le}var u=!1,c=!1,a=t.scheduleFuture(e,r,s);c||(i.add(a),u=!0)}var r=e[0],o=e[1],i=new ue;return o(r,n),i}t.scheduleRecursive=function(t,n){return this.schedule([t,n],e)},t.scheduleRecursiveFuture=function(t,e,r){return this.scheduleFuture([t,r],e,n)}}(we.prototype),function(t){t.schedulePeriodic=function(t,e,n){if(s===po.setInterval)throw new _t;e=ge(e);var r=t,o=po.setInterval(function(){r=n(r)},e);return he(function(){po.clearInterval(o)})}}(we.prototype),Ee=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.schedule=function(t,e){return de(e(this,t))},e}(we),xe=we.immediate=new Ee,Oe=function(t){function e(){for(;r.length>0;){var t=r.dequeue();!t.isCancelled()&&t.invoke()}}function n(){t.call(this)}var r;return ie(n,t),n.prototype.schedule=function(t,n){var o,i=new me(this,t,n,this.now());return r?r.enqueue(i):(r=new Te(4),r.enqueue(i),o=xo(e)(),r=null,o===Eo&&h(o.e)),i.disposable},n.prototype.scheduleRequired=function(){return!r},n}(we),De=we.currentThread=new Oe,
fo.internals.SchedulePeriodicRecursive=function(){function t(t){return function(e,n){n(0,t._period);var r=xo(t._action)(t._state);r===Eo&&(t._cancel.dispose(),h(r.e)),t._state=r}}function e(t,e,n,r){this._scheduler=t,this._state=e,this._period=n,this._action=r}return e.prototype.start=function(){var e=new be;return this._cancel=e,e.setDisposable(this._scheduler.scheduleRecursiveFuture(0,this._period,t(this))),e},e}(),$e=function(){var t,e=bo;if(po.setTimeout)t=po.setTimeout,e=po.clearTimeout;else{if(!po.WScript)throw new _t;t=function(t,e){po.WScript.Sleep(e),t()}}return{setTimeout:t,clearTimeout:e}}(),je=$e.setTimeout,Ne=$e.clearTimeout,function(){function t(e){var n,r;p?je(function(){t(e)},0):(n=l[e])&&(p=!0,r=xo(n)(),ke(e),p=!1,r===Eo&&h(r.e))}function e(){if(!po.postMessage||po.importScripts)return!1;var t=!1,e=po.onmessage;return po.onmessage=function(){t=!0},po.postMessage("","*"),po.onmessage=e,t}var n,r,i,u,c,a=1,l={},p=!1;ke=function(t){delete l[t]},n=RegExp("^"+(toString+"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&").replace(/toString| for [^\]]+/g,".*?")+"$"),r="function"==typeof(r=uo&&ho&&uo.setImmediate)&&!n.test(r)&&r,Co(r)?Se=function(e){var n=a++;return l[n]=e,r(function(){t(n)}),n}:s!==o&&"[object process]"==={}.toString.call(o)?Se=function(e){var n=a++;return l[n]=e,o.nextTick(function(){t(n)}),n}:e()?(i="ms.rx.schedule"+Math.random(),u=function(e){"string"==typeof e.data&&e.data.substring(0,i.length)===i&&t(e.data.substring(i.length))},po.addEventListener("message",u,!1),Se=function(t){var e=a++;return l[e]=t,po.postMessage(i+e,"*"),e}):po.MessageChannel?(c=new po.MessageChannel,c.port1.onmessage=function(e){t(e.data)},Se=function(t){var e=a++;return l[e]=t,c.port2.postMessage(e),e}):Se="document"in po&&"onreadystatechange"in po.document.createElement("script")?function(e){var n=po.document.createElement("script"),r=a++;return l[r]=e,n.onreadystatechange=function(){t(r),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},po.document.documentElement.appendChild(n),r}:function(e){var n=a++;return l[n]=e,je(function(){t(n)},0),n}}(),Pe=function(t){function e(){t.call(this)}function n(t,e,n,r){return function(){t.setDisposable(ae._fixup(e(n,r)))}}function r(t){this._id=t,this.isDisposed=!1}function o(t){this._id=t,this.isDisposed=!1}return ie(e,t),r.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,ke(this._id))},o.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,Ne(this._id))},e.prototype.schedule=function(t,e){var o=new be,i=Se(n(o,e,this,t));return new _e(o,new r(i))},e.prototype._scheduleFuture=function(t,e,r){if(0===e)return this.schedule(t,r);var i=new be,s=je(n(i,r,this,t),e);return new _e(i,new o(s))},e}(we),Ae=we.default=we.async=new Pe,S.prototype.compareTo=function(t){var e=this.value.compareTo(t.value);return 0===e&&(e=this.id-t.id),e},Te=fo.internals.PriorityQueue=function(t){this.items=Array(t),this.length=0},qe=Te.prototype,qe.isHigherPriority=function(t,e){return this.items[t].compareTo(this.items[e])<0},qe.percolate=function(t){var e,n
;t>=this.length||t<0||(e=t-1>>1)<0||e===t||this.isHigherPriority(t,e)&&(n=this.items[t],this.items[t]=this.items[e],this.items[e]=n,this.percolate(e))},qe.heapify=function(t){var e,n,r,o;+t||(t=0),t>=this.length||t<0||(e=2*t+1,n=2*t+2,r=t,e<this.length&&this.isHigherPriority(e,r)&&(r=e),n<this.length&&this.isHigherPriority(n,r)&&(r=n),r!==t&&(o=this.items[t],this.items[t]=this.items[r],this.items[r]=o,this.heapify(r)))},qe.peek=function(){return this.items[0].value},qe.removeAt=function(t){this.items[t]=this.items[--this.length],this.items[this.length]=s,this.heapify()},qe.dequeue=function(){var t=this.peek();return this.removeAt(0),t},qe.enqueue=function(t){var e=this.length++;this.items[e]=new S(Te.count++,t),this.percolate(e)},qe.remove=function(t){for(var e=0;e<this.length;e++)if(this.items[e].value===t)return this.removeAt(e),!0;return!1},Te.count=0,Le=fo.Notification=function(){function t(){}return t.prototype._accept=function(t,e,n){throw new yt},t.prototype._acceptObserver=function(t,e,n){throw new yt},t.prototype.accept=function(t,e,n){return t&&"object"==typeof t?this._acceptObserver(t):this._accept(t,e,n)},t.prototype.toObservable=function(t){var e=this;return Ce(t)||(t=xe),new Yr(function(n){return t.schedule(e,function(t,e){e._acceptObserver(n),"N"===e.kind&&n.onCompleted()})})},t}(),Re=function(t){function e(t){this.value=t,this.kind="N"}return ie(e,t),e.prototype._accept=function(t){return t(this.value)},e.prototype._acceptObserver=function(t){return t.onNext(this.value)},e.prototype.toString=function(){return"OnNext("+this.value+")"},e}(Le),Fe=function(t){function e(t){this.error=t,this.kind="E"}return ie(e,t),e.prototype._accept=function(t,e){return e(this.error)},e.prototype._acceptObserver=function(t){return t.onError(this.error)},e.prototype.toString=function(){return"OnError("+this.error+")"},e}(Le),Ie=function(t){function e(){this.kind="C"}return ie(e,t),e.prototype._accept=function(t,e,n){return n()},e.prototype._acceptObserver=function(t){return t.onCompleted()},e.prototype.toString=function(){return"OnCompleted()"},e}(Le),Me=Le.createOnNext=function(t){return new Re(t)},We=Le.createOnError=function(t){return new Fe(t)},ze=Le.createOnCompleted=function(){return new Ie},Ue=fo.Observer=function(){},Ve=Ue.create=function(t,e,n){return t||(t=bo),e||(e=wo),n||(n=bo),new Ke(t,e,n)},Be=fo.internals.AbstractObserver=function(t){function e(){this.isStopped=!1}return ie(e,t),e.prototype.next=mt,e.prototype.error=mt,e.prototype.completed=mt,e.prototype.onNext=function(t){!this.isStopped&&this.next(t)},e.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.error(t))},e.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.completed())},e.prototype.dispose=function(){this.isStopped=!0},e.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.error(t),!0)},e}(Ue),Ke=fo.AnonymousObserver=function(t){function e(e,n,r){t.call(this),this._onNext=e,this._onError=n,this._onCompleted=r}return ie(e,t),e.prototype.next=function(t){this._onNext(t)},
e.prototype.error=function(t){this._onError(t)},e.prototype.completed=function(){this._onCompleted()},e}(Be),Qe=fo.Observable=function(){function t(t,e){return function(n){var r=n.onError;return n.onError=function(e){l(e,t),r.call(n,e)},e.call(t,n)}}function e(){var e,n;fo.config.longStackSupport&&at&&(e=this._subscribe,n=xo(h)(Error()).e,this.stack=n.stack.substring(n.stack.indexOf("\n")+1),this._subscribe=t(this,e))}return He=e.prototype,e.isObservable=function(t){return t&&Co(t.subscribe)},He.subscribe=He.forEach=function(t,e,n){return this._subscribe("object"==typeof t?t:Ve(t,e,n))},He.subscribeOnNext=function(t,e){return this._subscribe(Ve(s!==e?function(n){t.call(e,n)}:t))},He.subscribeOnError=function(t,e){return this._subscribe(Ve(null,s!==e?function(n){t.call(e,n)}:t))},He.subscribeOnCompleted=function(t,e){return this._subscribe(Ve(null,null,s!==e?function(){t.call(e)}:t))},e}(),Ye=fo.internals.ScheduledObserver=function(t){function e(e,n){t.call(this),this.scheduler=e,this.observer=n,this.isAcquired=!1,this.hasFaulted=!1,this.queue=[],this.disposable=new ve}function n(t,e){return function(){t.onNext(e)}}function r(t,e){return function(){t.onError(e)}}function o(t){return function(){t.onCompleted()}}function i(t,e){var n,r;return t.queue.length>0?(n=t.queue.shift(),(r=xo(n)())===Eo?(t.queue=[],t.hasFaulted=!0,h(r.e)):void e(t)):void(t.isAcquired=!1)}return ie(e,t),e.prototype.next=function(t){this.queue.push(n(this.observer,t))},e.prototype.error=function(t){this.queue.push(r(this.observer,t))},e.prototype.completed=function(){this.queue.push(o(this.observer))},e.prototype.ensureActive=function(){var t=!1;!this.hasFaulted&&this.queue.length>0&&(t=!this.isAcquired,this.isAcquired=!0),t&&this.disposable.setDisposable(this.scheduler.scheduleRecursive(this,i))},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.disposable.dispose()},e}(Be),Ge=fo.ObservableBase=function(t){function e(t){return t&&Co(t.dispose)?t:Co(t)?he(t):le}function n(t,n){var r=n[0],o=n[1],i=xo(o.subscribeCore).call(o,r);i!==Eo||r.fail(Eo.e)||h(Eo.e),r.setDisposable(e(i))}function r(){t.call(this)}return ie(r,t),r.prototype._subscribe=function(t){var e=new Gr(t),r=[e,this];return De.scheduleRequired()?De.schedule(r,n):n(null,r),e},r.prototype.subscribeCore=mt,r}(Qe),Je=fo.FlatMapObservable=function(t){function e(e,n,r,o){this.resultSelector=Co(r)?r:null,this.selector=xt(Co(n)?n:function(){return n},o,3),this.source=e,t.call(this)}function n(t,e,n,r){this.i=0,this.selector=e,this.resultSelector=n,this.source=r,this.o=t,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this.selector,this.resultSelector,this))},ie(n,Be),n.prototype._wrapResult=function(t,e,n){return this.resultSelector?t.map(function(t,r){return this.resultSelector(e,t,n,r)},this):t},n.prototype.next=function(t){var e=this.i++,n=xo(this.selector)(t,e,this.source);if(n===Eo)return this.o.onError(n.e);go(n)&&(n=jr(n)),(Et(n)||Ct(n))&&(n=Qe.from(n)),this.o.onNext(this._wrapResult(n,t,e))},
n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onCompleted()},e}(Ge),Ze=fo.internals.Enumerable=function(){},k.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.isDisposed=!0)},Xe=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){var n,o,i;if(!t.isDisposed){if((n=xo(t.e.next).call(t.e))===Eo)return t.o.onError(n.e);if(n.done)return t.o.onCompleted();o=n.value,go(o)&&(o=jr(o)),i=new be,t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r={isDisposed:!1,o:t,subscription:e,e:this.sources[wt]()},o=De.scheduleRecursive(r,n);return new ye([e,o,new k(r)])},ie(r,Be),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.o.onError(t)},r.prototype.completed=function(){this._recurse(this._state)},e}(Ge),Ze.prototype.concat=function(){return new Xe(this)},tn=function(t){function e(e){this.sources=e,t.call(this)}function n(t,e){var n,o,i;if(!t.isDisposed){if((n=xo(t.e.next).call(t.e))===Eo)return t.o.onError(n.e);if(n.done)return null!==t.lastError?t.o.onError(t.lastError):t.o.onCompleted();o=n.value,go(o)&&(o=jr(o)),i=new be,t.subscription.setDisposable(i),i.setDisposable(o.subscribe(new r(t,e)))}}function r(t,e){this._state=t,this._recurse=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r={isDisposed:!1,e:this.sources[wt](),subscription:e,lastError:null,o:t},o=De.scheduleRecursive(r,n);return new ye([e,o,new k(r)])},ie(r,Be),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.lastError=t,this._recurse(this._state)},r.prototype.completed=function(){this._state.o.onCompleted()},e}(Ge),Ze.prototype.catchError=function(){return new tn(this)},en=function(t){function e(t,e){this.v=t,this.c=null==e?-1:e}function n(t){this.v=t.v,this.l=t.c}return ie(e,t),e.prototype[wt]=function(){return new n(this)},n.prototype.next=function(){return 0===this.l?gt:(this.l>0&&this.l--,{done:!1,value:this.v})},e}(Ze),nn=Ze.repeat=function(t,e){return new en(t,e)},rn=function(t){function e(t,e,n){this.s=t,this.fn=e?xt(e,n,3):null}function n(t){this.i=-1,this.s=t.s,this.l=this.s.length,this.fn=t.fn}return ie(e,t),e.prototype[wt]=function(){return new n(this)},n.prototype.next=function(){return++this.i<this.l?{done:!1,value:this.fn?this.fn(this.s[this.i],this.i,this.s):this.s[this.i]}:gt},e}(Ze),on=Ze.of=function(t,e,n){return new rn(t,e,n)},sn=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.a=[],Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},ie(n,Be),n.prototype.next=function(t){this.a.push(t)},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.o.onNext(this.a),this.o.onCompleted()},e}(Ge),He.toArray=function(){return new sn(this)},Qe.create=function(t,e){return new Yr(t,e)},
un=function(t){function e(e){this._f=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=xo(this._f)();return e===Eo?On(e.e).subscribe(t):(go(e)&&(e=jr(e)),e.subscribe(t))},e}(Ge),cn=Qe.defer=function(t){return new un(t)},an=function(t){function e(e){this.scheduler=e,t.call(this)}function n(t,e){this.observer=t,this.scheduler=e}function r(t,e){return e.onCompleted(),le}return ie(e,t),e.prototype.subscribeCore=function(t){return new n(t,this.scheduler).run()},n.prototype.run=function(){var t=this.observer;return this.scheduler===xe?r(null,t):this.scheduler.schedule(t,r)},e}(Ge),hn=new an(xe),ln=Qe.empty=function(t){return Ce(t)||(t=xe),t===xe?hn:new an(t)},pn=function(t){function e(e,n,r){this._iterable=e,this._fn=n,this._scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){var i,s=xo(e.next).call(e);return s===Eo?t.onError(s.e):s.done?t.onCompleted():(i=s.value,Co(n)&&(i=xo(n)(i,r))===Eo?t.onError(i.e):(t.onNext(i),void o(r+1)))}}return ie(e,t),e.prototype.subscribeCore=function(t){var e=Object(this._iterable),r=T(e);return this._scheduler.scheduleRecursive(0,n(t,r,this._fn))},e}(Ge),fn=Math.pow(2,53)-1,$.prototype[wt]=function(){return new j(this._s)},j.prototype[wt]=function(){return this},j.prototype.next=function(){return this._i<this._l?{done:!1,value:this._s.charAt(this._i++)}:gt},N.prototype[wt]=function(){return new P(this._a)},P.prototype[wt]=function(){return this},P.prototype.next=function(){return this._i<this._l?{done:!1,value:this._a[this._i++]}:gt},dn=Qe.from=function(t,e,n,r){if(null==t)throw Error("iterable cannot be null.");if(e&&!Co(e))throw Error("mapFn when provided must be a function");if(e)var o=xt(e,n,2);return Ce(r)||(r=De),new pn(t,o,r)},bn=function(t){function e(e,n){this._args=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e.length;return function(r,o){r<n?(t.onNext(e[r]),o(r+1)):t.onCompleted()}}return ie(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._args))},e}(Ge),vn=Qe.fromArray=function(t,e){return Ce(e)||(e=De),new bn(t,e)},_n=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return le},e}(Ge),yn=new _n,mn=Qe.never=function(){return yn},Qe.of=function(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return new bn(n,De)},Qe.ofWithScheduler=function(t){var e,n=arguments.length,r=Array(n-1);for(e=1;e<n;e++)r[e-1]=arguments[e];return new bn(r,t)},wn=function(t){function e(e,n){this._o=e,this._keys=Object.keys(e),this._scheduler=n,t.call(this)}function n(t,e,n){return function(r,o){if(r<n.length){var i=n[r];t.onNext([i,e[i]]),o(r+1)}else t.onCompleted()}}return ie(e,t),e.prototype.subscribeCore=function(t){return this._scheduler.scheduleRecursive(0,n(t,this._o,this._keys))},e}(Ge),Qe.pairs=function(t,e){return e||(e=De),new wn(t,e)},gn=function(t){function e(e,n,r){this.start=e,this.rangeCount=n,this.scheduler=r,t.call(this)}function n(t,e,n){return function(r,o){r<e?(n.onNext(t+r),o(r+1)):n.onCompleted()}}return ie(e,t),
e.prototype.subscribeCore=function(t){return this.scheduler.scheduleRecursive(0,n(this.start,this.rangeCount,t))},e}(Ge),Qe.range=function(t,e,n){return Ce(n)||(n=De),new gn(t,e,n)},Cn=function(t){function e(e,n,r){this.value=e,this.repeatCount=null==n?-1:n,this.scheduler=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return new F(t,this).run()},e}(Ge),F.prototype.run=function(){function t(t,r){if((-1===t||t>0)&&(e.onNext(n),t>0&&t--),0===t)return e.onCompleted();r(t)}var e=this.observer,n=this.parent.value;return this.parent.scheduler.scheduleRecursive(this.parent.repeatCount,t)},Qe.repeat=function(t,e,n){return Ce(n)||(n=De),new Cn(t,e,n)},En=function(t){function e(e,n){this._value=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];return r.onNext(n),r.onCompleted(),le}return ie(e,t),e.prototype.subscribeCore=function(t){var e=[this._value,t];return this._scheduler===xe?n(null,e):this._scheduler.schedule(e,n)},e}(Ge),Qe.return=Qe.just=function(t,e){return Ce(e)||(e=xe),new En(t,e)},xn=function(t){function e(e,n){this._error=e,this._scheduler=n,t.call(this)}function n(t,e){var n=e[0];return e[1].onError(n),le}return ie(e,t),e.prototype.subscribeCore=function(t){var e=[this._error,t];return this._scheduler===xe?n(null,e):this._scheduler.schedule(e,n)},e}(Ge),On=Qe.throw=function(t,e){return Ce(e)||(e=xe),new xn(t,e)},Dn=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new be,n=new ve;return n.setDisposable(e),e.setDisposable(this.source.subscribe(new Sn(t,n,this._fn))),n},e}(Ge),Sn=function(t){function e(e,n,r){this._o=e,this._s=n,this._fn=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext(t)},e.prototype.completed=function(){return this._o.onCompleted()},e.prototype.error=function(t){var e,n=xo(this._fn)(t);if(n===Eo)return this._o.onError(n.e);go(n)&&(n=jr(n)),e=new be,this._s.setDisposable(e),e.setDisposable(n.subscribe(this._o))},e}(Be),He.catch=function(t){return Co(t)?new Dn(this,t):kn([this,t])},kn=Qe.catch=function(){var t,e,n;if(Array.isArray(arguments[0]))t=arguments[0];else for(e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return on(t).catchError()},He.combineLatest=function(){var t,e=arguments.length,n=Array(e);for(t=0;t<e;t++)n[t]=arguments[t];return Array.isArray(n[0])?n[0].unshift(this):n.unshift(this),Nn.apply(this,n)},$n=function(t){function e(e,n){this._params=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o=this._params.length,i=Array(o),s={hasValue:D(o,I),hasValueAll:!1,isDone:D(o,I),values:Array(o)};for(e=0;e<o;e++)n=this._params[e],r=new be,i[e]=r,go(n)&&(n=jr(n)),r.setDisposable(n.subscribe(new jn(t,e,this._cb,s)));return new ye(i)},e}(Ge),jn=function(t){function e(e,n,r,o){this._o=e,this._i=n,this._cb=r,this._state=o,t.call(this)}function n(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){if(this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,
this._state.hasValueAll||(this._state.hasValueAll=this._state.hasValue.every(vo))){var e=xo(this._cb).apply(null,this._state.values);if(e===Eo)return this._o.onError(e.e);this._o.onNext(e)}else this._state.isDone.filter(n(this._i)).every(vo)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._state.isDone[this._i]=!0,this._state.isDone.every(vo)&&this._o.onCompleted()},e}(Be),Nn=Qe.combineLatest=function(){var t,e,n=arguments.length,r=Array(n);for(t=0;t<n;t++)r[t]=arguments[t];return e=Co(r[n-1])?r.pop():M,Array.isArray(r[0])&&(r=r[0]),new $n(r,e)},He.concat=function(){for(var t=[],e=0,n=arguments.length;e<n;e++)t.push(arguments[e]);return t.unshift(this),Tn.apply(null,t)},Pn=function(t){function e(e,n){this._s=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._s.o.onNext(t)},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.i++,this._fn(this._s)},e}(Be),An=function(t){function e(e){this._sources=e,t.call(this)}function n(t,e){var n,r;if(!t.disposable.isDisposed){if(t.i===t.sources.length)return t.o.onCompleted();n=t.sources[t.i],go(n)&&(n=jr(n)),r=new be,t.subscription.setDisposable(r),r.setDisposable(n.subscribe(new Pn(t,e)))}}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r=he(bo),o={o:t,i:0,subscription:e,disposable:r,sources:this._sources},i=xe.scheduleRecursive(o,n);return new ye([e,r,i])},e}(Ge),Tn=Qe.concat=function(){var t,e,n;if(Array.isArray(arguments[0]))t=arguments[0];else for(t=Array(arguments.length),e=0,n=arguments.length;e<n;e++)t[e]=arguments[e];return new An(t)},He.concatAll=function(){return this.merge(1)},qn=function(t){function e(e,n){this.source=e,this.maxConcurrent=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue;return e.add(this.source.subscribe(new Ln(t,this.maxConcurrent,e))),e},e}(Ge),Ln=function(t){function e(e,n,r){this.o=e,this.max=n,this.g=r,this.done=!1,this.q=[],this.activeCount=0,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return ie(e,t),e.prototype.handleSubscribe=function(t){var e=new be;this.g.add(e),go(t)&&(t=jr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.next=function(t){this.activeCount<this.max?(this.activeCount++,this.handleSubscribe(t)):this.q.push(t)},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,0===this.activeCount&&this.o.onCompleted()},ie(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.q.length>0?this.parent.handleSubscribe(this.parent.q.shift()):(this.parent.activeCount--,this.parent.done&&0===this.parent.activeCount&&this.parent.o.onCompleted())},e}(Be),He.merge=function(t){return"number"!=typeof t?Rn(this,t):new qn(this,t)},Rn=Qe.merge=function(){var t,e,n=[],r=arguments.length;if(arguments[0])if(Ce(arguments[0]))for(t=arguments[0],
e=1;e<r;e++)n.push(arguments[e]);else for(t=xe,e=0;e<r;e++)n.push(arguments[e]);else for(t=xe,e=1;e<r;e++)n.push(arguments[e]);return Array.isArray(n[0])&&(n=n[0]),R(t,n).mergeAll()},Fn=fo.CompositeError=function(t){this.innerErrors=t,this.message="This contains multiple errors. Check the innerErrors",Error.call(this)},Fn.prototype=Object.create(Error.prototype),Fn.prototype.name="CompositeError",In=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue,n=new be,r={isStopped:!1,errors:[],o:t};return e.add(n),n.setDisposable(this.source.subscribe(new Mn(e,r))),e},e}(Ge),Mn=function(t){function e(e,n){this._group=e,this._state=n,t.call(this)}function n(t,e){0===e.length?t.onCompleted():1===e.length?t.onError(e[0]):t.onError(new Fn(e))}function r(e,n,r){this._inner=e,this._group=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e=new be;this._group.add(e),go(t)&&(t=jr(t)),e.setDisposable(t.subscribe(new r(e,this._group,this._state)))},e.prototype.error=function(t){this._state.errors.push(t),this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},e.prototype.completed=function(){this._state.isStopped=!0,1===this._group.length&&n(this._state.o,this._state.errors)},ie(r,t),r.prototype.next=function(t){this._state.o.onNext(t)},r.prototype.error=function(t){this._state.errors.push(t),this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},r.prototype.completed=function(){this._group.remove(this._inner),this._state.isStopped&&1===this._group.length&&n(this._state.o,this._state.errors)},e}(Be),Qe.mergeDelayError=function(){var t,e,n,r;if(Array.isArray(arguments[0]))t=arguments[0];else for(e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return r=R(null,t),new In(r)},Wn=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ue,n=new be;return e.add(n),n.setDisposable(this.source.subscribe(new zn(t,e))),e},e}(Ge),zn=function(t){function e(e,n){this.o=e,this.g=n,this.done=!1,t.call(this)}function n(e,n){this.parent=e,this.sad=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e=new be;this.g.add(e),go(t)&&(t=jr(t)),e.setDisposable(t.subscribe(new n(this,e)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.done=!0,1===this.g.length&&this.o.onCompleted()},ie(n,t),n.prototype.next=function(t){this.parent.o.onNext(t)},n.prototype.error=function(t){this.parent.o.onError(t)},n.prototype.completed=function(){this.parent.g.remove(this.sad),this.parent.done&&1===this.parent.g.length&&this.parent.o.onCompleted()},e}(Be),He.mergeAll=function(){return new Wn(this)},Un=function(t){function e(e,n){this._s=e,this._o=go(n)?jr(n):n,this._open=!1,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n=new be;return n.setDisposable(this._s.subscribe(new Vn(t,this))),go(this._o)&&(this._o=jr(this._o)),e=new be,
e.setDisposable(this._o.subscribe(new Bn(t,this,e))),new _e(n,e)},e}(Ge),Vn=function(t){function e(e,n){this._o=e,this._p=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._p._open&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._p._open&&this._o.onCompleted()},e}(Be),Bn=function(t){function e(e,n,r){this._o=e,this._p=n,this._r=r,t.call(this)}return ie(e,t),e.prototype.next=function(){this._p._open=!0,this._r.dispose()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=function(){this._r.dispose()},e}(Be),He.skipUntil=function(t){return new Un(this,t)},Kn=function(t){function e(e){this.source=e,t.call(this)}function n(t,e){this.o=t,this.inner=e,this.stopped=!1,this.latest=0,this.hasLatest=!1,Be.call(this)}function r(t,e){this.parent=t,this.id=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve,r=this.source.subscribe(new n(t,e));return new _e(r,e)},ie(n,Be),n.prototype.next=function(t){var e=new be,n=++this.latest;this.hasLatest=!0,this.inner.setDisposable(e),go(t)&&(t=jr(t)),e.setDisposable(t.subscribe(new r(this,n)))},n.prototype.error=function(t){this.o.onError(t)},n.prototype.completed=function(){this.stopped=!0,!this.hasLatest&&this.o.onCompleted()},ie(r,Be),r.prototype.next=function(t){this.parent.latest===this.id&&this.parent.o.onNext(t)},r.prototype.error=function(t){this.parent.latest===this.id&&this.parent.o.onError(t)},r.prototype.completed=function(){this.parent.latest===this.id&&(this.parent.hasLatest=!1,this.parent.stopped&&this.parent.o.onCompleted())},e}(Ge),He.switch=He.switchLatest=function(){return new Kn(this)},Hn=function(t){function e(e,n){this.source=e,this.other=go(n)?jr(n):n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return new _e(this.source.subscribe(t),this.other.subscribe(new Qn(t)))},e}(Ge),Qn=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(){this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.onCompleted=bo,e}(Be),He.takeUntil=function(t){return new Hn(this,t)},Yn=function(t){function e(e,n,r){this._s=e,this._ss=n,this._cb=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o,i=this._ss.length,s={hasValue:D(i,I),hasValueAll:!1,values:Array(i)},u=this._ss.length,c=Array(u+1);for(e=0;e<u;e++)n=this._ss[e],r=new be,go(n)&&(n=jr(n)),r.setDisposable(n.subscribe(new Gn(t,e,s))),c[e]=r;return o=new be,o.setDisposable(this._s.subscribe(new Jn(t,this._cb,s))),c[u]=o,new ye(c)},e}(Ge),Gn=function(t){function e(e,n,r){this._o=e,this._i=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._state.values[this._i]=t,this._state.hasValue[this._i]=!0,this._state.hasValueAll=this._state.hasValue.every(vo)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=bo,e}(Be),Jn=function(t){function e(e,n,r){this._o=e,this._cb=n,this._state=r,t.call(this)}return ie(e,t),e.prototype.next=function(t){
var e,n=[t].concat(this._state.values);if(this._state.hasValueAll){if((e=xo(this._cb).apply(null,n))===Eo)return this._o.onError(e.e);this._o.onNext(e)}},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),He.withLatestFrom=function(){var t,e,n,r;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Co(e[t-1])?e.pop():M,Array.isArray(e[0])&&(e=e[0]),new Yn(this,e,r)},Zn=function(t){function e(e,n){this._s=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n,r,o=this._s.length,i=Array(o),s=D(o,I),u=D(o,W);for(e=0;e<o;e++)n=this._s[e],r=new be,i[e]=r,go(n)&&(n=jr(n)),r.setDisposable(n.subscribe(new Xn(t,e,this,u,s)));return new ye(i)},e}(Ge),Xn=function(t){function e(e,n,r,o,i){this._o=e,this._i=n,this._p=r,this._q=o,this._d=i,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){var e,i;if(this._q[this._i].push(t),this._q.every(n)){if(e=this._q.map(r),(i=xo(this._p._cb).apply(null,e))===Eo)return this._o.onError(i.e);this._o.onNext(i)}else this._d.filter(o(this._i)).every(vo)&&this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._d[this._i]=!0,this._d.every(vo)&&this._o.onCompleted()},e}(Be),He.zip=function(){var t,e,n,r,o;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Co(e[t-1])?e.pop():M,Array.isArray(e[0])&&(e=e[0]),o=this,e.unshift(o),new Zn(e,r)},Qe.zip=function(){var t,e,n=arguments.length,r=Array(n);for(t=0;t<n;t++)r[t]=arguments[t];return Array.isArray(r[0])&&(r=Co(r[1])?r[0].concat(r[1]):r[0]),e=r.shift(),e.zip.apply(e,r)},tr=function(t){function e(e,n){this.sources=e,this._cb=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e,n=this.sources,r=n.length,o=Array(r),i={q:D(r,W),done:D(r,I),cb:this._cb,o:t};for(e=0;e<r;e++)!function(t){var e=n[t],r=new be;(Et(e)||Ct(e))&&(e=dn(e)),o[t]=r,r.setDisposable(e.subscribe(new er(i,t)))}(e);return new ye(o)},e}(Ge),er=function(t){function e(e,n){this._s=e,this._i=n,t.call(this)}function n(t){return t.length>0}function r(t){return t.shift()}function o(t){return function(e,n){return n!==t}}return ie(e,t),e.prototype.next=function(t){if(this._s.q[this._i].push(t),this._s.q.every(n)){var e=this._s.q.map(r),i=xo(this._s.cb).apply(null,e);if(i===Eo)return this._s.o.onError(i.e);this._s.o.onNext(i)}else this._s.done.filter(o(this._i)).every(vo)&&this._s.o.onCompleted()},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.done[this._i]=!0,this._s.done.every(vo)&&this._s.o.onCompleted()},e}(Be),He.zipIterable=function(){var t,e,n,r,o;if(0===arguments.length)throw Error("invalid arguments");for(t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return r=Co(e[t-1])?e.pop():M,o=this,
e.unshift(o),new tr(e,r)},He.asObservable=function(){return new Yr(z(this),this)},nr=function(t){function e(e){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new rr(t))},e}(Ge),rr=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){t.accept(this._o)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),He.dematerialize=function(){return new nr(this)},or=function(t){function e(e,n,r){this.source=e,this.keyFn=n,this.comparer=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new ir(t,this.keyFn,this.comparer))},e}(Ge),ir=function(t){function e(e,n,r){this.o=e,this.keyFn=n,this.comparer=r,this.hasCurrentKey=!1,this.currentKey=null,t.call(this)}return ie(e,t),e.prototype.next=function(t){var e,n=t;return Co(this.keyFn)&&(n=xo(this.keyFn)(t))===Eo?this.o.onError(n.e):this.hasCurrentKey&&(e=xo(this.comparer)(this.currentKey,n))===Eo?this.o.onError(e.e):void(this.hasCurrentKey&&e||(this.hasCurrentKey=!0,this.currentKey=n,this.o.onNext(t)))},e.prototype.error=function(t){this.o.onError(t)},e.prototype.completed=function(){this.o.onCompleted()},e}(Be),He.distinctUntilChanged=function(t,e){return e||(e=yo),new or(this,t,e)},sr=function(t){function e(e,n,r,o){this.source=e,this._oN=n,this._oE=r,this._oC=o,t.call(this)}function n(t,e){this.o=t,this.t=!e._oN||Co(e._oN)?Ve(e._oN||bo,e._oE||bo,e._oC||bo):e._oN,this.isStopped=!1,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this))},ie(n,Be),n.prototype.next=function(t){var e=xo(this.t.onNext).call(this.t,t);e===Eo&&this.o.onError(e.e),this.o.onNext(t)},n.prototype.error=function(t){var e=xo(this.t.onError).call(this.t,t);if(e===Eo)return this.o.onError(e.e);this.o.onError(t)},n.prototype.completed=function(){var t=xo(this.t.onCompleted).call(this.t);if(t===Eo)return this.o.onError(t.e);this.o.onCompleted()},e}(Ge),He.do=He.tap=He.doAction=function(t,e,n){return new sr(this,t,e,n)},He.doOnNext=He.tapOnNext=function(t,e){return this.tap(s!==e?function(n){t.call(e,n)}:t)},He.doOnError=He.tapOnError=function(t,e){return this.tap(bo,s!==e?function(n){t.call(e,n)}:t)},He.doOnCompleted=He.tapOnCompleted=function(t,e){return this.tap(bo,null,s!==e?function(){t.call(e)}:t)},ur=function(t){function e(e,n,r){this.source=e,this._fn=xt(n,r,0),t.call(this)}function n(t,e){this.isDisposed=!1,this._s=t,this._fn=e}return ie(e,t),e.prototype.subscribeCore=function(t){var e=xo(this.source.subscribe).call(this.source,t);return e===Eo&&(this._fn(),h(e.e)),new n(e,this._fn)},n.prototype.dispose=function(){if(!this.isDisposed){var t=xo(this._s.dispose).call(this._s);this._fn(),t===Eo&&h(t.e)}},e}(Ge),He.finally=function(t,e){return new ur(this,t,e)},cr=function(t){function e(e){this.source=e,t.call(this)}function n(t){this.o=t,this.isStopped=!1}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t))},
n.prototype.onNext=bo,n.prototype.onError=function(t){this.isStopped||(this.isStopped=!0,this.o.onError(t))},n.prototype.onCompleted=function(){this.isStopped||(this.isStopped=!0,this.o.onCompleted())},n.prototype.dispose=function(){this.isStopped=!0},n.prototype.fail=function(t){return!this.isStopped&&(this.isStopped=!0,this.observer.onError(t),!0)},e}(Ge),He.ignoreElements=function(){return new cr(this)},ar=function(t){function e(e,n){this.source=e,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new hr(t))},e}(Ge),hr=function(t){function e(e){this._o=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext(Me(t))},e.prototype.error=function(t){this._o.onNext(We(t)),this._o.onCompleted()},e.prototype.completed=function(){this._o.onNext(ze()),this._o.onCompleted()},e}(Be),He.materialize=function(){return new ar(this)},He.repeat=function(t){return nn(this,t).concat()},He.retry=function(t){return nn(this,t).catchError()},lr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return ie(n,t),n.prototype.subscribeCore=function(t){var n,r=new Zr,o=new Zr,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},a=new ve,h=De.scheduleRecursive(null,function(e,i){var s,h,l,p;if(!c.isDisposed){if(s=u.next(),s.done)return void(n?t.onError(n):t.onCompleted());h=s.value,go(h)&&(h=jr(h)),l=new be,p=new be,a.setDisposable(new _e(p,l)),l.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){p.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(e),l.dispose()},function(){t.onCompleted()}))}});return new ye([s,a,h,e(c)])},n}(Ge),He.retryWhen=function(t){return new lr(U(this),t)},pr=function(t){function e(t){return{isDisposed:!1,dispose:function(){this.isDisposed||(this.isDisposed=!0,t.isDisposed=!0)}}}function n(e,n){this.source=e,this._notifier=n,t.call(this)}return ie(n,t),n.prototype.subscribeCore=function(t){var n,r=new Zr,o=new Zr,i=this._notifier(r),s=i.subscribe(o),u=this.source["@@iterator"](),c={isDisposed:!1},a=new ve,h=De.scheduleRecursive(null,function(e,i){var s,h,l,p;if(!c.isDisposed){if(s=u.next(),s.done)return void(n?t.onError(n):t.onCompleted());h=s.value,go(h)&&(h=jr(h)),l=new be,p=new be,a.setDisposable(new _e(p,l)),l.setDisposable(h.subscribe(function(e){t.onNext(e)},function(e){t.onError(e)},function(){p.setDisposable(o.subscribe(i,function(e){t.onError(e)},function(){t.onCompleted()})),r.onNext(null),l.dispose()}))}});return new ye([s,a,h,e(c)])},n}(Ge),He.repeatWhen=function(t){return new pr(U(this),t)},fr=function(t){function e(e,n,r,o){this.source=e,this.accumulator=n,this.hasSeed=r,this.seed=o,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new dr(t,this))},e}(Ge),dr=function(t){function e(e,n){this._o=e,this._p=n,this._fn=n.accumulator,this._hs=n.hasSeed,this._s=n.seed,this._ha=!1,this._a=null,
this._hv=!1,this._i=0,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(!this._hv&&(this._hv=!0),this._ha?this._a=xo(this._fn)(this._a,t,this._i,this._p):(this._a=this._hs?xo(this._fn)(this._s,t,this._i,this._p):t,this._ha=!0),this._a===Eo)return this._o.onError(this._a.e);this._o.onNext(this._a),this._i++},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){!this._hv&&this._hs&&this._o.onNext(this._s),this._o.onCompleted()},e}(Be),He.scan=function(){var t,e=!1,n=arguments[0];return 2===arguments.length&&(e=!0,t=arguments[1]),new fr(this,n,e,t)},br=function(t){function e(e,n){this.source=e,this._c=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new vr(t,this._c))},e}(Ge),vr=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return ie(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._o.onNext(this._q.shift())},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),He.skipLast=function(t){if(t<0)throw new vt;return new br(this,t)},He.startWith=function(){var t,e,n,r,o=0;for(arguments.length&&Ce(arguments[0])?(t=arguments[0],o=1):t=xe,e=[],n=o,r=arguments.length;n<r;n++)e.push(arguments[n]);return on([vn(e,t),this]).concat()},_r=function(t){function e(e,n){this._o=e,this._c=n,this._q=[],t.call(this)}return ie(e,t),e.prototype.next=function(t){this._q.push(t),this._q.length>this._c&&this._q.shift()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){for(;this._q.length>0;)this._o.onNext(this._q.shift());this._o.onCompleted()},e}(Be),He.takeLast=function(t){if(t<0)throw new vt;var e=this;return new Yr(function(n){return e.subscribe(new _r(n,t))},e)},He.flatMapConcat=He.concatMap=function(t,e,n){return new Je(this,t,e,n).merge(1)},yr=function(t){function e(e,n,r){this.source=e,this.selector=xt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return t.call(this,e.selector(n,r,o),r,o)}}function r(t,e,n){this.o=t,this.selector=e,this.source=n,this.i=0,Be.call(this)}return ie(e,t),e.prototype.internalMap=function(t,r){return new e(this.source,n(t,this),r)},e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.selector,this))},ie(r,Be),r.prototype.next=function(t){var e=xo(this.selector)(t,this.i++,this.source);if(e===Eo)return this.o.onError(e.e);this.o.onNext(e)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Ge),He.map=He.select=function(t,e){var n="function"==typeof t?t:function(){return t};return this instanceof yr?this.internalMap(n,e):new yr(this,n,e)},He.pluck=function(){var t,e=arguments.length,n=Array(e);if(0===e)throw Error("List of properties cannot be empty.");for(t=0;t<e;t++)n[t]=arguments[t];return this.map(V(n,e))},He.flatMap=He.selectMany=function(t,e,n){return new Je(this,t,e,n).mergeAll()},fo.Observable.prototype.flatMapLatest=function(t,e,n){return new Je(this,t,e,n).switchLatest()},
mr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._r=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},ie(n,Be),n.prototype.next=function(t){this._r<=0?this._o.onNext(t):this._r--},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Ge),He.skip=function(t){if(t<0)throw new vt;return new mr(this,t)},wr=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new gr(t,this))},e}(Ge),gr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!1,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(!this._r){var e=xo(this._p._fn)(t,this._i++,this._p);if(e===Eo)return this._o.onError(e.e);this._r=!e}this._r&&this._o.onNext(t)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),He.skipWhile=function(t,e){var n=xt(t,e,3);return new wr(this,n)},Cr=function(t){function e(e,n){this.source=e,this._count=n,t.call(this)}function n(t,e){this._o=t,this._c=e,this._r=e,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new n(t,this._count))},ie(n,Be),n.prototype.next=function(t){this._r-- >0&&(this._o.onNext(t),this._r<=0&&this._o.onCompleted())},n.prototype.error=function(t){this._o.onError(t)},n.prototype.completed=function(){this._o.onCompleted()},e}(Ge),He.take=function(t,e){if(t<0)throw new vt;return 0===t?ln(e):new Cr(this,t)},Er=function(t){function e(e,n){this.source=e,this._fn=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new xr(t,this))},e}(Ge),xr=function(t){function e(e,n){this._o=e,this._p=n,this._i=0,this._r=!0,t.call(this)}return ie(e,t),e.prototype.next=function(t){if(this._r&&(this._r=xo(this._p._fn)(t,this._i++,this._p),this._r===Eo))return this._o.onError(this._r.e);this._r?this._o.onNext(t):this._o.onCompleted()},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),He.takeWhile=function(t,e){var n=xt(t,e,3);return new Er(this,n)},Or=function(t){function e(e,n,r){this.source=e,this.predicate=xt(n,r,3),t.call(this)}function n(t,e){return function(n,r,o){return e.predicate(n,r,o)&&t.call(this,n,r,o)}}function r(t,e,n){this.o=t,this.predicate=e,this.source=n,this.i=0,Be.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new r(t,this.predicate,this))},e.prototype.internalFilter=function(t,r){return new e(this.source,n(t,this),r)},ie(r,Be),r.prototype.next=function(t){var e=xo(this.predicate)(t,this.i++,this.source);if(e===Eo)return this.o.onError(e.e);e&&this.o.onNext(t)},r.prototype.error=function(t){this.o.onError(t)},r.prototype.completed=function(){this.o.onCompleted()},e}(Ge),He.filter=He.where=function(t,e){return this instanceof Or?this.internalFilter(t,e):new Or(this,t,e)},
Qe.fromCallback=function(t,e,n){return function(){var r,o,i;for(s===e&&(e=this),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return B(t,e,n,o)}},Qe.fromNodeCallback=function(t,e,n){return function(){var r,o,i;for(s===e&&(e=this),r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];return H(t,e,n,o)}},G.prototype.dispose=function(){this.isDisposed||(this._e.removeEventListener(this._n,this._fn,!1),this.isDisposed=!0)},fo.config.useNativeEvents=!1,Dr=function(t){function e(e,n,r){this._el=e,this._n=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];if(Co(e)&&(n=xo(e).apply(null,arguments))===Eo)return t.onError(n.e);t.onNext(n)}}return ie(e,t),e.prototype.subscribeCore=function(t){return J(this._el,this._n,n(t,this._fn))},e}(Ge),Qe.fromEvent=function(t,e,n){return t.addListener?kr(function(n){t.addListener(e,n)},function(n){t.removeListener(e,n)},n):fo.config.useNativeEvents||"function"!=typeof t.on||"function"!=typeof t.off?new Dr(t,e,n).publish().refCount():kr(function(n){t.on(e,n)},function(n){t.off(e,n)},n)},Sr=function(t){function e(e,n,r){this._add=e,this._del=n,this._fn=r,t.call(this)}function n(t,e){return function(){var n=arguments[0];if(Co(e)&&(n=xo(e).apply(null,arguments))===Eo)return t.onError(n.e);t.onNext(n)}}function r(t,e,n){this._del=t,this._fn=e,this._ret=n,this.isDisposed=!1}return ie(e,t),e.prototype.subscribeCore=function(t){var e=n(t,this._fn),o=this._add(e);return new r(this._del,e,o)},r.prototype.dispose=function(){this.isDisposed||(Co(this._del)&&this._del(this._fn,this._ret),this.isDisposed=!0)},e}(Ge),kr=Qe.fromEventPattern=function(t,e,n){return new Sr(t,e,n).publish().refCount()},$r=function(t){function e(e,n){this._p=e,this._s=n,t.call(this)}function n(t,e){var n=e[0],r=e[1];n.onNext(r),n.onCompleted()}function r(t,e){var n=e[0],r=e[1];n.onError(r)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new be,o=this;return this._p.then(function(r){e.setDisposable(o._s.schedule([t,r],n))},function(n){e.setDisposable(o._s.schedule([t,n],r))}),e},e}(Ge),jr=Qe.fromPromise=function(t,e){return e||(e=Ae),new $r(t,e)},He.toPromise=function(t){if(t||(t=fo.config.Promise),!t)throw new _t("Promise type not provided nor in Rx.config.Promise");var e=this;return new t(function(t,n){var r;e.subscribe(function(t){r=t},n,function(){t(r)})})},Qe.startAsync=function(t){var e=xo(t)();return e===Eo?On(e.e):jr(e)},Nr=function(t){function e(e,n,r){this.source=e,this._fn1=n,this._fn2=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=this.source.multicast(this._fn1());return new _e(this._fn2(e).subscribe(t),e.connect())},e}(Ge),He.multicast=function(t,e){return Co(t)?new Nr(this,t,e):new Ar(this,t)},He.publish=function(t){return t&&Co(t)?this.multicast(function(){return new Zr},t):this.multicast(new Zr)},He.share=function(){return this.publish().refCount()},He.publishLast=function(t){return t&&Co(t)?this.multicast(function(){return new Xr},t):this.multicast(new Xr)},He.publishValue=function(t,e){
return 2===arguments.length?this.multicast(function(){return new eo(e)},t):this.multicast(new eo(t))},He.shareValue=function(t){return this.publishValue(t).refCount()},He.replay=function(t,e,n,r){return t&&Co(t)?this.multicast(function(){return new no(e,n,r)},t):this.multicast(new no(e,n,r))},He.shareReplay=function(t,e,n){return this.replay(null,t,e,n).refCount()},Pr=function(t){function e(e){this.source=e,this._count=0,this._connectableSubscription=null,t.call(this)}function n(t,e){this._p=t,this._s=e,this.isDisposed=!1}return ie(e,t),e.prototype.subscribeCore=function(t){var e=this.source.subscribe(t);return 1==++this._count&&(this._connectableSubscription=this.source.connect()),new n(this,e)},n.prototype.dispose=function(){this.isDisposed||(this.isDisposed=!0,this._s.dispose(),0==--this._p._count&&this._p._connectableSubscription.dispose())},e}(Ge),Ar=fo.ConnectableObservable=function(t){function e(e,n){this.source=e,this._connection=null,this._source=e.asObservable(),this._subject=n,t.call(this)}function n(t,e){this._p=t,this._s=e}return ie(e,t),n.prototype.dispose=function(){this._s&&(this._s.dispose(),this._s=null,this._p._connection=null)},e.prototype.connect=function(){if(!this._connection){var t=this._source.subscribe(this._subject);this._connection=new n(this,t)}return this._connection},e.prototype._subscribe=function(t){return this._subject.subscribe(t)},e.prototype.refCount=function(){return new Pr(this)},e}(Qe),Tr=function(t){function e(e,n){this._dt=e,this._s=n,t.call(this)}function n(t,e){e.onNext(0),e.onCompleted()}return ie(e,t),e.prototype.subscribeCore=function(t){return this._s.scheduleFuture(t,this._dt,n)},e}(Ge),qr=Qe.interval=function(t,e){return tt(t,t,Ce(e)?e:Ae)},Qe.timer=function(t,e,n){var r;return Ce(n)||(n=Ae),null!=e&&"number"==typeof e?r=e:Ce(e)&&(n=e),(t instanceof Date||"number"==typeof t)&&r===s?Z(t,n):t instanceof Date&&r!==s?X(t,e,n):tt(t,r,n)},He.delay=function(){var t,e,n=arguments[0];if("number"==typeof n||n instanceof Date)return t=n,e=arguments[1],Ce(e)||(e=Ae),t instanceof Date?nt(this,t,e):et(this,t,e);if(Qe.isObservable(n)||Co(n))return rt(this,n,arguments[1]);throw Error("Invalid arguments")},Lr=function(t){function e(e,n,r){Ce(r)||(r=Ae),this.source=e,this._dt=n,this._s=r,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e=new ve;return new _e(this.source.subscribe(new Rr(t,this._dt,this._s,e)),e)},e}(Ge),Rr=function(t){function e(e,n,r,o){this._o=e,this._d=n,this._scheduler=r,this._c=o,this._v=null,this._hv=!1,this._id=0,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._hv=!0,this._v=t;var e=++this._id,n=new be;this._c.setDisposable(n),n.setDisposable(this._scheduler.scheduleFuture(this,this._d,function(n,r){r._hv&&r._id===e&&r._o.onNext(t),r._hv=!1}))},e.prototype.error=function(t){this._c.dispose(),this._o.onError(t),this._hv=!1,this._id++},e.prototype.completed=function(){this._c.dispose(),this._hv&&this._o.onNext(this._v),this._o.onCompleted(),this._hv=!1,this._id++},e}(Be),He.debounce=function(){
if(Co(arguments[0]))return ot(this,arguments[0]);if("number"==typeof arguments[0])return new Lr(this,arguments[0],arguments[1]);throw Error("Invalid arguments")},Fr=function(t){function e(e,n){this.source=e,this._s=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){return this.source.subscribe(new Ir(t,this._s))},e}(Ge),Ir=function(t){function e(e,n){this._o=e,this._s=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._o.onNext({value:t,timestamp:this._s.now()})},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._o.onCompleted()},e}(Be),He.timestamp=function(t){return Ce(t)||(t=Ae),new Fr(this,t)},Mr=function(t){function e(e,n){this.source=e,this._sampler=n,t.call(this)}return ie(e,t),e.prototype.subscribeCore=function(t){var e={o:t,atEnd:!1,value:null,hasValue:!1,sourceSubscription:new be};return e.sourceSubscription.setDisposable(this.source.subscribe(new zr(e))),new _e(e.sourceSubscription,this._sampler.subscribe(new Wr(e)))},e}(Ge),Wr=function(t){function e(e){this._s=e,t.call(this)}return ie(e,t),e.prototype._handleMessage=function(){this._s.hasValue&&(this._s.hasValue=!1,this._s.o.onNext(this._s.value)),this._s.atEnd&&this._s.o.onCompleted()},e.prototype.next=function(){this._handleMessage()},e.prototype.error=function(t){this._s.onError(t)},e.prototype.completed=function(){this._handleMessage()},e}(Be),zr=function(t){function e(e){this._s=e,t.call(this)}return ie(e,t),e.prototype.next=function(t){this._s.hasValue=!0,this._s.value=t},e.prototype.error=function(t){this._s.o.onError(t)},e.prototype.completed=function(){this._s.atEnd=!0,this._s.sourceSubscription.dispose()},e}(Be),He.sample=function(t,e){return Ce(e)||(e=Ae),"number"==typeof t?new Mr(this,qr(t,e)):new Mr(this,t)},Ur=fo.TimeoutError=function(t){this.message=t||"Timeout has occurred",this.name="TimeoutError",Error.call(this)},Ur.prototype=Object.create(Error.prototype),He.timeout=function(){var t=arguments[0];if(t instanceof Date||"number"==typeof t)return st(this,t,arguments[1],arguments[2]);if(Qe.isObservable(t)||Co(t))return it(this,t,arguments[1],arguments[2]);throw Error("Invalid arguments")},He.throttle=function(t,e){var n,r;if(Ce(e)||(e=Ae),(n=+t||0)<=0)throw new RangeError("windowDuration cannot be less or equal zero.");return r=this,new Yr(function(t){var o=0;return r.subscribe(function(r){var i=e.now();(0===o||i-o>=n)&&(o=i,t.onNext(r))},function(e){t.onError(e)},function(){t.onCompleted()})},r)},Vr=function(t){function e(e,n){this.source=e,this.controller=new Zr,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return ie(e,t),e.prototype._subscribe=function(t){var e=this.source.publish(),n=e.subscribe(t),r=le,o=this.pauser.distinctUntilChanged().subscribe(function(t){t?r=e.connect():(r.dispose(),r=le)});return new ye([n,r,o])},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(Qe),He.pausable=function(t){return new Vr(this,t)},Br=function(t){function e(e,n){
this.source=e,this.controller=new Zr,n&&n.subscribe?this.pauser=this.controller.merge(n):this.pauser=this.controller,t.call(this)}return ie(e,t),e.prototype._subscribe=function(t){function e(){for(;r.length>0;)t.onNext(r.shift())}var n,r=[];return ut(this.source,this.pauser.startWith(!1).distinctUntilChanged(),function(t,e){return{data:t,shouldFire:e}}).subscribe(function(o){n!==s&&o.shouldFire!==n?(n=o.shouldFire,o.shouldFire&&e()):(n=o.shouldFire,o.shouldFire?t.onNext(o.data):r.push(o.data))},function(n){e(),t.onError(n)},function(){e(),t.onCompleted()})},e.prototype.pause=function(){this.controller.onNext(!1)},e.prototype.resume=function(){this.controller.onNext(!0)},e}(Qe),He.pausableBuffered=function(t){return new Br(this,t)},Kr=function(t){function e(e,n,r){t.call(this),this.subject=new Hr(n,r),this.source=e.multicast(this.subject).refCount()}return ie(e,t),e.prototype._subscribe=function(t){return this.source.subscribe(t)},e.prototype.request=function(t){return this.subject.request(null==t?-1:t)},e}(Qe),Hr=function(t){function e(e,n){null==e&&(e=!0),t.call(this),this.subject=new Zr,this.enableQueue=e,this.queue=e?[]:null,this.requestedCount=0,this.requestedDisposable=null,this.error=null,this.hasFailed=!1,this.hasCompleted=!1,this.scheduler=n||De}return ie(e,t),se(e.prototype,Ue,{_subscribe:function(t){return this.subject.subscribe(t)},onCompleted:function(){this.hasCompleted=!0,this.enableQueue&&0!==this.queue.length?this.queue.push(Le.createOnCompleted()):(this.subject.onCompleted(),this.disposeCurrentRequest())},onError:function(t){this.hasFailed=!0,this.error=t,this.enableQueue&&0!==this.queue.length?this.queue.push(Le.createOnError(t)):(this.subject.onError(t),this.disposeCurrentRequest())},onNext:function(t){this.requestedCount<=0?this.enableQueue&&this.queue.push(Le.createOnNext(t)):(0==this.requestedCount--&&this.disposeCurrentRequest(),this.subject.onNext(t))},_processRequest:function(t){if(this.enableQueue)for(;this.queue.length>0&&(t>0||"N"!==this.queue[0].kind);){var e=this.queue.shift();e.accept(this.subject),"N"===e.kind?t--:(this.disposeCurrentRequest(),this.queue=[])}return t},request:function(t){this.disposeCurrentRequest();var e=this;return this.requestedDisposable=this.scheduler.schedule(t,function(t,n){var r=e._processRequest(n);if(!e.hasCompleted&&!e.hasFailed&&r>0)return e.requestedCount=r,he(function(){e.requestedCount=0})}),this.requestedDisposable},disposeCurrentRequest:function(){this.requestedDisposable&&(this.requestedDisposable.dispose(),this.requestedDisposable=null)}}),e}(Qe),He.controlled=function(t,e){return t&&Ce(t)&&(e=t,t=!0),null==t&&(t=!0),new Kr(this,t,e)},He.pipe=function(t){function e(){n.resume()}var n=this.pausableBuffered();return t.addListener("drain",e),n.subscribe(function(e){!t.write(e+"")&&n.pause()},function(e){t.emit("error",e)},function(){!t._isStdio&&t.end(),t.removeListener("drain",e)}),n.resume(),t},Qr=function(t){function e(e,n){this._o=e,this._xform=n,t.call(this)}return ie(e,t),e.prototype.next=function(t){
var e=xo(this._xform["@@transducer/step"]).call(this._xform,this._o,t);e===Eo&&this._o.onError(e.e)},e.prototype.error=function(t){this._o.onError(t)},e.prototype.completed=function(){this._xform["@@transducer/result"](this._o)},e}(Be),He.transduce=function(t){var e=this;return new Yr(function(n){var r=t(ct(n));return e.subscribe(new Qr(n,r))},e)},Yr=fo.AnonymousObservable=function(t){function e(t){return t&&Co(t.dispose)?t:Co(t)?he(t):le}function n(t,n){var r=n[0],o=n[1],i=xo(o.__subscribe).call(o,r);i!==Eo||r.fail(Eo.e)||h(Eo.e),r.setDisposable(e(i))}function r(e,n){this.source=n,this.__subscribe=e,t.call(this)}return ie(r,t),r.prototype._subscribe=function(t){var e=new Gr(t),r=[e,this];return De.scheduleRequired()?De.schedule(r,n):n(null,r),e},r}(Qe),Gr=function(t){function e(e){t.call(this),this.observer=e,this.m=new be}ie(e,t);var n=e.prototype;return n.next=function(t){var e=xo(this.observer.onNext).call(this.observer,t);e===Eo&&(this.dispose(),h(e.e))},n.error=function(t){var e=xo(this.observer.onError).call(this.observer,t);this.dispose(),e===Eo&&h(e.e)},n.completed=function(){var t=xo(this.observer.onCompleted).call(this.observer);this.dispose(),t===Eo&&h(t.e)},n.setDisposable=function(t){this.m.setDisposable(t)},n.getDisposable=function(){return this.m.getDisposable()},n.dispose=function(){t.prototype.dispose.call(this),this.m.dispose()},e}(Be),Jr=function(t,e){this._s=t,this._o=e},Jr.prototype.dispose=function(){if(!this._s.isDisposed&&null!==this._o){var t=this._s.observers.indexOf(this._o);this._s.observers.splice(t,1),this._o=null}},Zr=fo.Subject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.observers=[],this.hasError=!1}return ie(e,t),se(e.prototype,Ue.prototype,{_subscribe:function(t){return fe(this),this.isStopped?this.hasError?(t.onError(this.error),le):(t.onCompleted(),le):(this.observers.push(t),new Jr(this,t))},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=c(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.error=t,this.hasError=!0;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped)for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onNext(t)},dispose:function(){this.isDisposed=!0,this.observers=null}}),e.create=function(t,e){return new to(t,e)},e}(Qe),Xr=fo.AsyncSubject=function(t){function e(){t.call(this),this.isDisposed=!1,this.isStopped=!1,this.hasValue=!1,this.observers=[],this.hasError=!1}return ie(e,t),se(e.prototype,Ue.prototype,{_subscribe:function(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):this.hasValue?(t.onNext(this.value),t.onCompleted()):t.onCompleted(),le):(this.observers.push(t),new Jr(this,t))},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){var t,e,n,r;if(fe(this),!this.isStopped){
if(this.isStopped=!0,n=c(this.observers),e=n.length,this.hasValue)for(t=0;t<e;t++)r=n[t],r.onNext(this.value),r.onCompleted();else for(t=0;t<e;t++)n[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){fe(this),this.isStopped||(this.value=t,this.hasValue=!0)},dispose:function(){this.isDisposed=!0,this.observers=null,this.error=null,this.value=null}}),e}(Qe),to=fo.AnonymousSubject=function(t){function e(e,n){this.observer=e,this.observable=n,t.call(this)}return ie(e,t),se(e.prototype,Ue.prototype,{_subscribe:function(t){return this.observable.subscribe(t)},onCompleted:function(){this.observer.onCompleted()},onError:function(t){this.observer.onError(t)},onNext:function(t){this.observer.onNext(t)}}),e}(Qe),eo=fo.BehaviorSubject=function(t){function e(e){t.call(this),this.value=e,this.observers=[],this.isDisposed=!1,this.isStopped=!1,this.hasError=!1}return ie(e,t),se(e.prototype,Ue.prototype,{_subscribe:function(t){return fe(this),this.isStopped?(this.hasError?t.onError(this.error):t.onCompleted(),le):(this.observers.push(t),t.onNext(this.value),new Jr(this,t))},getValue:function(){return fe(this),this.hasError&&h(this.error),this.value},hasObservers:function(){return fe(this),this.observers.length>0},onCompleted:function(){if(fe(this),!this.isStopped){this.isStopped=!0;for(var t=0,e=c(this.observers),n=e.length;t<n;t++)e[t].onCompleted();this.observers.length=0}},onError:function(t){if(fe(this),!this.isStopped){this.isStopped=!0,this.hasError=!0,this.error=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onError(t);this.observers.length=0}},onNext:function(t){if(fe(this),!this.isStopped){this.value=t;for(var e=0,n=c(this.observers),r=n.length;e<r;e++)n[e].onNext(t)}},dispose:function(){this.isDisposed=!0,this.observers=null,this.value=null,this.error=null}}),e}(Qe),no=fo.ReplaySubject=function(t){function e(t,e){return he(function(){e.dispose(),!t.isDisposed&&t.observers.splice(t.observers.indexOf(e),1)})}function n(e,n,o){this.bufferSize=null==e?r:e,this.windowSize=null==n?r:n,this.scheduler=o||De,this.q=[],this.observers=[],this.isStopped=!1,this.isDisposed=!1,this.hasError=!1,this.error=null,t.call(this)}var r=Math.pow(2,53)-1;return ie(n,t),se(n.prototype,Ue.prototype,{_subscribe:function(t){var n,r,o,i;for(fe(this),n=new Ye(this.scheduler,t),r=e(this,n),this._trim(this.scheduler.now()),this.observers.push(n),o=0,i=this.q.length;o<i;o++)n.onNext(this.q[o].value);return this.hasError?n.onError(this.error):this.isStopped&&n.onCompleted(),n.ensureActive(),r},hasObservers:function(){return fe(this),this.observers.length>0},_trim:function(t){for(;this.q.length>this.bufferSize;)this.q.shift();for(;this.q.length>0&&t-this.q[0].interval>this.windowSize;)this.q.shift()},onNext:function(t){var e,n,r,o,i;if(fe(this),!this.isStopped)for(e=this.scheduler.now(),this.q.push({interval:e,value:t}),this._trim(e),n=0,
r=c(this.observers),o=r.length;n<o;n++)i=r[n],i.onNext(t),i.ensureActive()},onError:function(t){var e,n,r,o,i;if(fe(this),!this.isStopped){for(this.isStopped=!0,this.error=t,this.hasError=!0,e=this.scheduler.now(),this._trim(e),n=0,r=c(this.observers),o=r.length;n<o;n++)i=r[n],i.onError(t),i.ensureActive();this.observers.length=0}},onCompleted:function(){var t,e,n,r,o;if(fe(this),!this.isStopped){for(this.isStopped=!0,t=this.scheduler.now(),this._trim(t),e=0,n=c(this.observers),r=n.length;e<r;e++)o=n[e],o.onCompleted(),o.ensureActive();this.observers.length=0}},dispose:function(){this.isDisposed=!0,this.observers=null}}),n}(Qe),fo.Pauser=function(t){function e(){t.call(this)}return ie(e,t),e.prototype.pause=function(){this.onNext(!1)},e.prototype.resume=function(){this.onNext(!0)},e}(Zr),po.Rx=fo,(i=function(){return fo}.call(e,n,e,t))!==s&&(t.exports=i),ro=b()}).call(this)}).call(e,n(46)(t),n(83),n(1385))},1360:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e,n,r){function o(){var t=$(this),o=t.val(),i=e(o);t.removeClass("_tv-dialog-text-input-error"),"function"==typeof n&&n(o),o!==i&&(t.val(i),r&&t.trigger("change"))}function i(t){if(t.ctrlKey)return!1;if(t.metaKey)return!1;if(!t.charCode)return!1;var e=t.keyCode||t.which;return 9!==e&&(13!==e&&(16!==e&&(17!==e&&(18!==e&&(19!==e&&(20!==e&&(27!==e&&!(33<=e&&e<=40))))))))}if(!(t instanceof $))return void console.warn("'$inputs' should be instance of jQuery");"function"!=typeof e&&(e=function(t){return t}),t.each(function(t,e){var n=$(e);n.on("keypress",function(t){if(i(t)){var e=function(){o.call(this),$(this).off("keyup",e)}.bind(this);$(this).on("keyup",e)}}),n.change(o)})},t.exports=e.default},1381:function(t,e,n){"use strict";function r(t){var e=document.createElement("div");return e.innerHTML=t,e.children[0]}var o;Object.defineProperty(e,"__esModule",{value:!0}),e.combine=e.ticket=e.controlGroup=e.control=e.timePicker=e.datePicker=e.comboBox=e.textLabel=e.textInput=e.numberInput=e.buttonsGroup=e.checkbox=e.errorLabel=void 0,e.createHTML=r,n(1382),n(1383),n(1357),n(1384),o=n(268),e.errorLabel=function(t){var e=t.element,r=void 0===e?"":e,o=t.containerClass,i=void 0===o?"":o;return'\n<div class="tv-control-error tv-control-error--fix_size tv-control-error--size_small '+(Modernizr.touch?"":"tv-control-error--for-number-input")+" "+i+'">\n\t'+r+'\n\t<span class="tv-control-error__icon">'+$("<div>").append($(n(1358)).attr("focusable","false")).html()+'</span>\n\t<span class="tv-control-error__messages"></span>\n</div>'},e.checkbox=function(t){var e=t.labelText,r=t.checkboxClass,o=t.checked;return'\n<label>\n\t<span class="tv-control-checkbox">\n\t\t<input class="tv-control-checkbox__input '+r+'" type="checkbox" '+(void 0!==o&&o?"checked":"")+'>\n\t\t<span class="tv-control-checkbox__box">'+n(148)+'</span>\n\t\t<span class="tv-control-checkbox__ripple js-ripple"></span>\n\t</span>\n\n\t<span class="tv-control-checkbox__label">'+e+"</span>\n</label>"},e.buttonsGroup=function(t){
var e=t.containerClass,n=void 0===e?"":e,r=t.options;return'<div class="tv-buttons-group '+n+'">\n\t'+(void 0===r?[]:r).map(function(t){var e=t.optionText;return'<div class="tv-buttons-group__option '+t.optionClass+'"><span class="tv-buttons-group__option--content apply-overflow-tooltip">'+e+"</span></div>"}).join("")+"\n</div>"},e.numberInput=function(t){var e=t.containerClass,n=void 0===e?"":e,r=t.inputClass,i=void 0===r?"":r,s=t.upClass,u=void 0===s?"":s,c=t.downClass,a=void 0===c?"":c;return'\n<div class="tv-control-number-input tv-control-number-input--size_small '+(Modernizr.touch?"tv-control-number-input--mobile":"")+" "+n+'">\n\t<input type="text" class="tv-control-number-input__input tv-control-number-input__input--size_small '+i+'"/>\n\t<div class="tv-control-number-input__controls">\n\t\t<div tabindex="-2" class="tv-control-number-input__wrapper '+u+'">\n\t\t\t<div class="tv-control-number-input__up">'+o+'</div>\n\t\t</div>\n\t\t<div class="tv-control-number-input__splinter"></div>\n\t\t<div tabindex="-2" class="tv-control-number-input__wrapper '+a+'">\n\t\t\t<div class="tv-control-number-input__down">'+o+"</div>\n\t\t</div>\n\t</div>\n</div>"},e.textInput=function(t){var e=t.id,n=t.type,r=void 0===n?"text":n,o=t.containerClass,i=void 0===o?"":o,s=t.inputClass,u=void 0===s?"":s,c=t.placeHolder,a=void 0===c?"":c,h=t.value;return'\n<div class="'+i+'">\n\t<input id="'+e+'" type="'+r+'" class="tv-control-input '+u+'" placeholder="'+a+'" value="'+(void 0===h?"":h).replace(/"/g,"&quote;")+'">\n</div>'},e.textLabel=function(t){var e=t.outputClass,n=void 0===e?"":e,r=t.outputText;return'\n<div class="tv-text-label js-text-label">\n\t<div class="tv-text-label__label">=</div>\n\t<div class="tv-text-label__value '+n+'">'+(void 0===r?"":r)+"</div>\n</div>"},e.comboBox=function(t){var e=t.outputClass;return'\n<select class="'+(void 0===e?"":e)+' tv-control-select tv-control-select--size_small"></select>\n'},e.datePicker=function(t){var e=t.outputClass;return'\n<div class="'+(void 0===e?"":e)+'">\n\t<input type="text" placeholder="yyyy-mm-dd" class="tv-control-input tv-control-input--size_small">\n</div>\n'},e.timePicker=function(t){var e=t.outputClass;return'\n<div class="'+(void 0===e?"":e)+'">\n\t<input type="text" placeholder="hh:mm" name="expired-time" class="tv-control-input tv-control-input--size_small">\n</div>\n'},e.control=function(t){var e=t.containerClass;return'\n<div class="tv-ticket__field '+(void 0===e?"":e)+'">\n\t<div class="tv-ticket__label">'+t.label+'</div>\n\t<div class="tv-ticket__inputs">\n\t\t<div class="tv-ticket__input js-first-control">\n\t\t\t'+t.selector+'\n\t\t</div>\n\n\t\t<div class="tv-ticket__input js-second-control">\n\t\t\t'+t.input+'\n\t\t</div>\n\n\t\t<div class="tv-ticket__input js-third-control">\n\t\t\t'+t.output+"\n\t\t</div>\n\t</div>\n</div>"},e.controlGroup=function(t){var e=t.containerClass,n=void 0===e?"":e,r=t.containerWrapperClass,o=void 0===r?"":r,i=t.label,s=void 0===i?"":i,u=t.controls
;return'\n<div class="tv-ticket__field '+n+'">\n\t<div class="tv-ticket__label js-control-group-label">'+s+'</div>\n\t<div class="'+o+'">'+(void 0===u?[]:u).join("")+"</div>\n</div>"},e.ticket=function(t){var e=t.body,n=void 0===e?"":e,r=t.riskRewardClass,o=void 0===r?"":r,i=t.riskClass,s=void 0===i?"":i,u=t.doneText,c=void 0===u?"":u,a=t.doneClass,h=void 0===a?"":a,l=t.profitClass;return'\n<div class="tv-ticket">\n\t'+n+'\n\t<div class="tv-ticket__submit">\n\t\t<div class="tv-ticket__risk">\n\t\t\t<div class="'+s+'"></div>\n\t\t\t<div class="'+o+'"></div>\n\t\t\t<div class="'+(void 0===l?"":l)+'"></div>\n\t\t</div>\n\t\t<span class="tv-button tv-button--primary '+h+'">'+c+"</span>\n\t</div>\n</div>"},e.combine=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.join("")}},1382:function(t,e){},1383:function(t,e){},1384:function(t,e){},1385:function(t,e){function n(){throw Error("setTimeout has not been defined")}function r(){throw Error("clearTimeout has not been defined")}function o(t){if(h===setTimeout)return setTimeout(t,0);if((h===n||!h)&&setTimeout)return h=setTimeout,setTimeout(t,0);try{return h(t,0)}catch(e){try{return h.call(null,t,0)}catch(e){return h.call(this,t,0)}}}function i(t){if(l===clearTimeout)return clearTimeout(t);if((l===r||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(t);try{return l(t)}catch(e){try{return l.call(null,t)}catch(e){return l.call(this,t)}}}function s(){f&&d&&(f=!1,d.length?p=d.concat(p):b=-1,p.length&&u())}function u(){var t,e;if(!f){for(t=o(s),f=!0,e=p.length;e;){for(d=p,p=[];++b<e;)d&&d[b].run();b=-1,e=p.length}d=null,f=!1,i(t)}}function c(t,e){this.fun=t,this.array=e}function a(){}var h,l,p,f,d,b,v=t.exports={};!function(){try{h="function"==typeof setTimeout?setTimeout:n}catch(t){h=n}try{l="function"==typeof clearTimeout?clearTimeout:r}catch(t){l=r}}(),p=[],f=!1,b=-1,v.nextTick=function(t){var e,n=Array(arguments.length-1);if(arguments.length>1)for(e=1;e<arguments.length;e++)n[e-1]=arguments[e];p.push(new c(t,n)),1!==p.length||f||o(u)},c.prototype.run=function(){this.fun.apply(null,this.array)},v.title="browser",v.browser=!0,v.env={},v.argv=[],v.version="",v.versions={},v.on=a,v.addListener=a,v.once=a,v.off=a,v.removeListener=a,v.removeAllListeners=a,v.emit=a,v.prependListener=a,v.prependOnceListener=a,v.listeners=function(t){return[]},v.binding=function(t){throw Error("process.binding is not supported")},v.cwd=function(){return"/"},v.chdir=function(t){throw Error("process.chdir is not supported")},v.umask=function(){return 0}},1386:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function i(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e)
;t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t){return Array.isArray(t)?t:Array.from(t)}function c(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function a(t){var e,n,r,o,i,s,u,c,a,h,l,p,f,d,b,v,y,m,w,g,C,E,x,O,S,k,j,N=t.input,A=t.state$,q=t.error$,R=void 0===q?T.Observable.of({hasError:!1}):q,F=t.onOff$,I=void 0===F?T.Observable.of(!0):F,M=t.upClass,W=void 0===M?".js-input-up":M,z=t.downClass,U=void 0===z?".js-input-down":z,V=t.inputClass,B=void 0===V?".js-input":V,H=t.parseError,Q=void 0===H?$.t("can not parse value"):H,Y=t.leftMessageAlign,G=t.formatOnInput,J=void 0!==G&&G,Z=1e-10,X=function(t,e){return t.flatMapLatest(function(){return T.Observable.interval(50).delay(250).startWith(1).takeUntil(T.Observable.fromEvent(document,"mouseup"))}).map(function(){return e})},tt=N.querySelector(W),et=N.querySelector(U),nt=N.querySelector(B),rt=new L.ControlError(N,{addFocusEvents:!1,addErrorOnElement:!1,leftMessageAlign:Y});try{nt.setSelectionRange(nt.value.length,nt.value.length)}catch(t){}return e=T.Observable.fromEvent(tt,"mousedown").pausable(I).publish(),n=T.Observable.fromEvent(et,"mousedown").pausable(I).publish(),r=X(e,1),o=X(n,-1),i=T.Observable.merge(T.Observable.fromEvent(nt,"focus",function(t){return!0}),T.Observable.fromEvent(tt,"focus",function(t){return!0}),T.Observable.fromEvent(et,"focus",function(t){return!0})),s=T.Observable.merge(T.Observable.fromEvent(nt,"blur",function(t){return!1}),T.Observable.fromEvent(tt,"blur",function(t){return!1}),T.Observable.fromEvent(et,"blur",function(t){return!1})),u=i.merge(s).debounce(10).distinctUntilChanged(),c=T.Observable.fromEvent(nt,"input",function(t){return t.target.value}),a=c.withLatestFrom(A,function(t,e){var n=e.formatter.parse(t);return n.res?{hasError:!1,input:n.price}:{hasError:!0,input:t,text:n.error||Q}}).publish(),h=a.map(function(t){return t.input}).publish(),l=function(t,e){return function(n){var r=n;return void 0!==t&&(r=Math.max(r,t)),void 0!==e&&(r=Math.min(r,e)),r}},p=A.map(function(t){return t.value}),f=T.Observable.merge(p,h).withLatestFrom(A,function(t,e){return["string"==typeof t?0:t,e.step,l(e.min,e.max)]}),d=function(t){var e=P(t,3),n=e[0],i=e[1],s=e[2];return o.merge(r).scan(function(t,e){var n=e*i,r=Math.pow(10,-Math.floor(Math.log10(i))),o=t*r%(i*r)/r;return s(o>Z?t+n+(1===e?0:1)*i-o:t+n)},n)},b=f.flatMap(d),v=b.merge(p).distinctUntilChanged().publish(),y=T.Observable.merge(v,a.filter(function(t){return!t.hasError}).map(function(t){return t.input})).distinctUntilChanged().publish(),m=(J?y:v).withLatestFrom(A,function(t,e){return e.formatter.format(t)}),w=a.merge(y.map(function(t){return{hasError:!1}})).distinctUntilChanged(function(t){return t.text}),g=_(w,I,{hasError:!1}),C=g.value$,E=g.disposable,x=_(R,I,{hasError:!1}),O=x.value$,S=x.disposable,k=C.publish(),j=D([k,O],K),{value$:y,error$:k,subscribe:function(){
var t=u.subscribe(function(t){t?(N.classList.add("i-active"),N.parentNode.classList.add("i-focus")):(N.classList.remove("i-active"),N.parentNode.classList.remove("i-focus"))}),e=m.subscribe(function(t){var e=nt.value,n=e.slice(0,nt.selectionStart).length+t.length-e.length;nt.value=t,nt.setSelectionRange(n,n)}),n=I.subscribe(function(t){t?(nt.removeAttribute("disabled"),N.classList.remove("i-disabled")):(nt.setAttribute("disabled","disabled"),N.classList.add("i-disabled"))}),r=j.subscribe(function(t){t.hasError?(N.classList.add("i-error"),rt.add({id:1,message:t.text}).render()):(N.classList.remove("i-error"),rt.clear().render())});return new T.CompositeDisposable(t,e,n,r)},connect:function(){return new T.CompositeDisposable(k.connect(),y.connect(),v.connect(),h.connect(),a.connect(),e.connect(),n.connect(),S,E)}}}function h(t,e,n){return(t<=0||e<=0)&&!n?{text:$.t("Value should be more than 0"),hasError:!0}:{text:"",hasError:!1}}function l(t){var e,n,r,o,i,s,l,p,f,d,b,v,_,y,m,w,g,C,E,x,S,k,j,A=t.container,q=t.price$,L=t.custom$,R=t.initState$,F=t.pipsToPrice,I=t.priceToPips,M=t.pipsProps,W=t.priceProps,z=t.orderType$,U=t.onOff$,V=void 0===U?T.Observable.of(!0):U,H=t.anyPriceValid$,Q=void 0===H?T.Observable.of(!1):H,Y=t.switchClass,G=void 0===Y?".js-order-switch":Y,J=t.inputClass,Z=void 0===J?".js-order-input":J,X=t.outputClass,tt=void 0===X?".js-order-output":X,et=t.observableArrForErrorChecker,nt=void 0===et?[]:et,rt=t.errorChecker,ot=void 0===rt?h:rt,it={FIRST:1,SECOND:2},st=A.querySelector(G),ut=A.querySelector(Z),ct=A.querySelector(tt),at=st.querySelector("div"),ht=st.querySelectorAll("div")[1],lt=new T.Subject,pt=R.delay(1).concat(lt).distinctUntilChanged(function(t){return t.type}).publish(),ft=it.FIRST;return R.subscribe(function(t){ft=t.type}),e=T.Observable.fromEvent(at,"click",function(){return B.PRICE}).pausable(V),n=T.Observable.fromEvent(ht,"click",function(){return B.PIPS}).pausable(V),r=e.merge(n).distinctUntilChanged().startWith(ft),o=pt.map(function(t){return t.type}).publish(),i=new T.Subject,s=a({input:ut,state$:pt,error$:i,onOff$:V}),l=s.value$,p=s.error$,f=s.connect,d=s.subscribe,b=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e},v=L?[o,l,q,L]:[o,l,q],_=T.Observable.combineLatest.apply(T.Observable,c(v.concat(b))).publish(),y=T.Observable.combineLatest(o,l,b).publish(),m=function(t,e,n){return t.filter(function(t){return P(t,1)[0]===e}).map(function(t){var e=u(t),r=e.slice(1);return n.apply(void 0,c(r))})},w=m(_,B.PIPS,F).map(function(t){return O(W.formatter,t)}).merge(m(_,B.PRICE,I).map(function(t){return O(M.formatter,t)})).publish(),g=$.t("Pips"),C=w.withLatestFrom(o,function(t,e){var n=e===B.PRICE?g:"";return(e===B.PRICE?M.formatter:W.formatter).format(t)+" "+n}),E=r.withLatestFrom(w,function(t,e){return N({},t===B.PRICE?W:M,{type:t,value:e})}).publish(),x=m(_,B.PIPS,F).merge(m(y,B.PRICE,function(t){return t})).publish(),S=m(_,B.PRICE,I).merge(m(y,B.PIPS,function(t){return t})).publish(),
k=T.Observable.combineLatest.apply(T.Observable,[x,S].concat(c(nt),[Q,q,z||T.Observable.of(null),ot])).distinctUntilChanged(function(t){return t.text}),j=D([i,p],K),{price$:x,pips$:S,error$:j,mode$:r,subscribe:function(){var t=pt.subscribe(function(t){t.type===B.PRICE?(at.classList.add("i-active"),ht.classList.remove("i-active")):(at.classList.remove("i-active"),ht.classList.add("i-active"))}),e=C.subscribe(function(t){ct.textContent=t}),n=V.subscribe(function(t){t?(st.classList.remove("i-disabled"),ct.parentNode.classList.remove("i-disabled")):(st.classList.add("i-disabled"),ct.parentNode.classList.add("i-disabled"))}),r=d();return new T.CompositeDisposable(e,t,r,n)},connect:function(){return new T.CompositeDisposable(k.subscribe(i),w.connect(),S.connect(),x.connect(),y.connect(),_.connect(),o.connect(),f(),pt.connect(),E.subscribe(lt),E.connect())}}}function p(t,e){var n=$(t);return T.Observable.fromEventPattern(function(t){return n.on("change",t)},function(t){return n.off("change",t)},function(){return n.val()}).startWith(e).publish()}function f(){return 60*-(new Date).getTimezoneOffset()*1e3}function d(t,e){var n,r,o=$(t);return(0,I.default)(o,{triggerChange:!0}),(0,U.lazyJqueryUI)(o).datepicker({dateFormat:"yy-mm-dd",minDate:new Date,showOtherMonths:!0}),e=e||Date.now()+864e5,n=new Date(e+f()).toJSON(),r=n.substr(0,10),o.val(r),T.Observable.fromEventPattern(function(t){return o.on("change input",t)},function(t){return o.off("change input",t)},function(){return o.val()}).startWith(r)}function b(t,e,n){var r,o,i=$(t);return(0,W.default)(i,{triggerChange:!0}),i.clockpicker({autoclose:!0,donetext:"OK",placement:"top",afterShow:function(){var t=+e.css("z-index")+1;isFinite(t)&&i.data("clockpicker").popover.css("z-index",t)}}),n=n||Date.now(),r=new Date(n+f()).toJSON(),o=r.substr(11,5),i.val(o),T.Observable.fromEventPattern(function(t){return i.on("change input",t)},function(t){return i.off("change input",t)},function(){return i.val()}).startWith(o)}function v(t,e,n,r,o,i,s,u,c,a){function h(t,e,n){e.classList.toggle("i-disabled",!n),$(t).prop("disabled",!n)}var l,v,_,y,m,w,g,C,E,x,O,D=t.querySelector("select.js-duration-type"),S=t.querySelector(".js-duration-date"),k=t.querySelector(".js-duration-time"),j=S.querySelector("input"),N=k.querySelector("input");return!o||(0,z.isArray)(o)&&0===o.length?($(t).addClass("js-hidden"),l=T.Observable.of({}).publish(),{duration$:l,durationDateError$:l,durationTimeError$:l,subscribe:function(){return l.subscribe(function(){})},connect:function(){return l.connect()}}):($(t).removeClass("js-hidden"),v=p(D,n||o[0].value),_=d(j,r),y=b(N,$(e),r),m=new L.ControlError(j,{addFocusEvents:!1,addErrorOnElement:!1}),w=new L.ControlError(N,{addFocusEvents:!1,addErrorOnElement:!1}),g={text:"",hasError:!1},C=T.Observable.combineLatest(v,_,i,function(t,e,n){var r,i,s,u;return!o.filter(function(e){return e.value===t})[0].hasDatePicker||!c&&n===R.ORDERTYPE.MARKET?g:e?(r=$.t("Incorrect date format. Should be yyyy-mm-dd."),e.match(/^\d{4}-[01]\d-[0-3]\d$/)?(i=e+"T00:00:00Z",s=new Date(i),
s.valueOf()?(u=864e5*parseInt(Date.now()/864e5),s<u?{text:$.t("Expiration date is in the past."),hasError:!0}:g):{text:r,hasError:!0}):{text:r,hasError:!0}):{text:$.t("Enter valid date"),hasError:!0}}).startWith(g).distinctUntilChanged(function(t){return t.text}).publish(),E=T.Observable.combineLatest(v,_,C,y,i,function(t,e,n,r,i){var s,u,a;return!o.filter(function(e){return e.value===t})[0].hasTimePicker||!c&&i===R.ORDERTYPE.MARKET?g:r?(s=$.t("Incorrect time format. Should be hh:mm."),r.match(/^([01]?[0-9]|2[0-3]):[0-5][0-9]$/)?n.hasError?g:(u=e+"T"+r+":00Z",a=new Date(u),a.valueOf()?(a-=f(),a<Date.now()?{text:$.t("Expiration time is in the past."),hasError:!0}:g):{text:s,hasError:!0}):{text:s,hasError:!0}):{text:$.t("Enter valid time"),hasError:!0}}).startWith(g).distinctUntilChanged(function(t){return t.text}).publish(),x=T.Observable.combineLatest(v,_,y,i,function(t,e,n,r){return r!==R.ORDERTYPE.MARKET||c?{type:t,dateStr:e,timeStr:n}:{}}).distinctUntilChanged().publish(),O=T.Observable.combineLatest(v,i,function(t,e){var n=o.filter(function(e){return e.value===t})[0],r=(c||e!==R.ORDERTYPE.MARKET)&&!u||u&&a;return{duration:r,datePicker:n.hasDatePicker&&r,timePicker:n.hasTimePicker&&r}}),{duration$:x,durationDateError$:C,durationTimeError$:E,subscribe:function(){var t=C.subscribe(function(t){m.clear().render(),t.hasError&&m.add({id:1,message:t.text}).render()}),e=E.subscribe(function(t){w.clear().render(),t.hasError&&w.add({id:1,message:t.text}).render()}),n=O.subscribe(function(t){h(j,S,t.datePicker),h(N,k,t.timePicker),t.duration?s.tvControlSelect("enable"):setTimeout(function(){s.tvControlSelect("disable")},0)});return new T.CompositeDisposable(t,e,n)},connect:function(){return new T.CompositeDisposable(x.connect(),E.connect(),C.connect(),v.connect())}})}function _(t,e,n){var r=t.replay(null,1),o=r.connect();return{value$:e.flatMapLatest(function(t){return t?r:T.Observable.of(n)}),disposable:o}}function y(t){var e,n=t.container,r=t.startState;return n.checked=!!r,e=T.Observable.merge(T.Observable.of(!!r).delay(1),T.Observable.create(function(t){var e=function(e){return setTimeout(function(){return t.onNext(e.target.checked)})};return n.addEventListener("change",e),function(){return n.removeEventListener("checked",e)}})).distinctUntilChanged().publish(),{value$:e,connect:function(){return e.connect()}}}function m(t,e){var n=t.price$,r=t.pips$,o=t.error$,i=t.mode$,s=e.value$,u=_(n,s),c=u.value$,a=u.disposable,h=_(r,s),l=h.value$,p=h.disposable,f=_(o,s,{text:"",hasError:!1}),d=f.value$,b=f.disposable;return{price$:c,pips$:l,error$:d,mode$:i,connect:function(){return new T.CompositeDisposable(e.connect(),t.connect())},subscribe:function(){return new T.CompositeDisposable(t.subscribe(),b,p,a)}}}function w(t){var e=t.buttonLoader,n=t.result$,r=t.fire$,o=void 0===r?T.Observable.empty():r,i=t.enable$,s=void 0===i?T.Observable.of(!0):i,u=t.handler,c=e.contentNojQuery(),a=new T.Subject,h=a.merge(s),l=T.Observable.merge(T.Observable.fromEvent(c,"click",function(){return"fire"
}),o).pausable(h),p=l.withLatestFrom(n,function(t,e){return e}),f=p.flatMapLatest(function(t){var e,n=u(t);return H(n)?(e=function(t,e){return a.onNext(!0),N({},t,{details:e})},a.onNext(!1),n.then().then(e.bind(null,{status:"ok"}),e.bind(null,{status:"error"}))):T.Observable.of({status:"ok",details:n})}).publish();return{result$:f,subscribe:function(){var t=s.subscribe(function(t){t?e.enable():e.disable()}),n=a.subscribe(function(t){t?e.stop():e.start()});return new T.CompositeDisposable(t,n)},connect:function(){return new T.CompositeDisposable(f.connect())}}}function g(t){var e=t.container,n=t.qty$,r=t.pips$,o=t.equity$,i=t.pipValue,s=t.currencySign,u=void 0===s?"$":s,c=t.text,a=void 0===c?$.t("Risk"):c,h=T.Observable.combineLatest(n,r,o,function(t,e,n){var r,o;return n?(r=e?e*t*i:void 0,o=r?100*r/n:void 0,{rm:r,rp:o}):null}).distinctUntilChanged();return{subscribe:function(){return h.subscribe(function(t){if(!t)return void(e.textContent="");var n=t.rm,r=t.rp;e.textContent=void 0===n||void 0===r?"":a+" "+r.toFixed(2)+"% ("+u+(0,A.splitThousands)(n.toFixed(2),",")+")"})}}}function C(t){var e=t.container,n=t.slPips$,r=t.tpPips$,o=T.Observable.combineLatest(n,r,function(t,e){return e/t}).distinctUntilChanged();return{subscribe:function(){return o.subscribe(function(t){Number.isFinite(t)?e.textContent=$.t("Risk/reward ratio:")+" "+t.toFixed(2):e.textContent=""})}}}function E(t){return Math.abs(Math.floor(Math.log10(t)))}function x(t,e,n,r){var o,i;return t&&r<t?{res:!1,error:Y.min}:e&&r>e?{res:!1,error:Y.max}:(o=1,n<0&&(o=Math.pow(10,E(n))),i=V(r*o/(n*o)),n&&i!==Math.floor(i)?{res:!1,error:Y.step}:{res:!0})}function O(t,e){var n=t.parse(t.format(e));return n.res?n.price:(n=Number.parseFloat(e),Number.isNaN(n)?void 0:n)}function D(t,e){return T.Observable.combineLatest.apply(T.Observable,c(t.concat(e))).distinctUntilChanged().publish().refCount()}var S,k,j,N,P,A,T,q,L,R,F,I,M,W,z,U,V,B,K,H,Q,Y;Object.defineProperty(e,"__esModule",{value:!0}),e.QtyFormatter=e.NumericFormatter=e.mergeErrors=e.INPUT_TYPE=void 0,S=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),k=function t(e,n,r){var o,i,s;return null===e&&(e=Function.prototype),void 0===(o=Object.getOwnPropertyDescriptor(e,n))?(i=Object.getPrototypeOf(e),null===i?void 0:t(i,n,r)):"value"in o?o.value:void 0!==(s=o.get)?s.call(r):void 0},j="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},N=Object.assign||function(t){var e,n,r;for(e=1;e<arguments.length;e++){n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},P=function(){function t(t,e){var n,r,o=[],i=!0,s=!1,u=void 0;try{for(n=t[Symbol.iterator]();!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,u=t}finally{try{
!i&&n.return&&n.return()}finally{if(s)throw u}}return o}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),e.createCustomNumberInput=a,e.createPriceController=l,e.localOffset=f,e.createDurationController=v,e.makeObservableOffable=_,e.createCheckBox=y,e.combineControllerAndCheckbox=m,e.createDoneButton=w,e.createRiskHelper=g,e.createRiskRewardHelper=C,e.checkQty=x,e.parseWithFormatter=O,e.combineErrors=D,A=n(183),T=n(1359),q=n(17),L=n(1387),R=n(96),F=n(1389),I=r(F),M=n(1390),W=r(M),z=n(15),U=n(122),V=n(124).fixComputationError,B=e.INPUT_TYPE={PRICE:1,PIPS:2},K=e.mergeErrors=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.reduce(function(t,e){return{hasError:t.hasError||e.hasError,text:t.text||e.text}},{})},H=function(t){return"object"===(void 0===t?"undefined":j(t))&&"function"==typeof t.then},Q=e.NumericFormatter=function(t){function e(t){var n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Only numbers allowed.";return o(this,e),n=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,Math.pow(10,t))),n._errorLabel=r,n}return s(e,t),S(e,[{key:"parse",value:function(t){var n=k(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parse",this).call(this,t);return n.res?n:N({},n,{error:this._errorLabel})}}]),e}(q.PriceFormatter),Y={min:$.t("Specified amount is less that the instrument minimum."),max:$.t("Specified amount is more than the instrument maximum."),step:$.t("Specified amount is not a multiple of the instrument minimum.")},e.QtyFormatter=function(t){function e(t){var n,r,s=t.min,u=void 0===s?null:s,c=t.max,a=void 0===c?null:c,h=t.step,l=void 0===h?1:h;return o(this,e),n=l>=1?0:E(l),r=i(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,n,$.t("Amount format is invalid."))),r._values={min:u,max:a,step:l},r}return s(e,t),S(e,[{key:"parse",value:function(t){var n,r=k(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"parse",this).call(this,t.replace(/\s/g,""));return r.res&&(n=x(this._values.min,this._values.max,this._values.step,r.price),!1===n.res)?n:r}},{key:"format",value:function(t){return(0,A.splitThousands)(k(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t)," ")}}]),e}(Q)},1387:function(t,e,n){"use strict";function r(t){var e,n;if(t&&t.__esModule)return t;if(e={},null!=t)for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n]);return e.default=t,e}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i,s,u,c,a;Object.defineProperty(e,"__esModule",{value:!0}),e.ControlError=void 0,i=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),n(1388),s=n(185),u=n(26),c=r(u),a=e.ControlError=function(){function t(e){function r(t,e){
return t.some(function(t){return e.test(t)})}var i,s,u,c,a=this,h=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},l=h.addFocusEvents,p=void 0===l||l,f=h.addErrorOnElement,d=void 0===f||f,b=h.leftMessageAlign,v=void 0!==b&&b,_=h.maxWidth,y=void 0===_?void 0:_;o(this,t),i=$(e),s=i.hasClass("tv-control-checkbox__input"),u=i.hasClass("tv-control-number-input"),c=r(i.attr("class").split(/\s+/),/^.+--size_small$/),this.options={smallMode:c,addErrorOnElement:d,maxWidth:y},s&&(i=i.closest(".tv-control-checkbox")),this.errors={},this.$control=i,i.data("tv-control-material")?this.$toWrap=i.data("tv-control-material").$el:i.data("tv-control-error-wrap")?this.$toWrap=i.data("tv-control-error-wrap"):this.$toWrap=i,this.$toWrap.parent().hasClass("tv-control-error")||this.$toWrap.wrap('<div class="tv-control-error '+(u?"tv-control-error--for-number-input":"")+'"></div>'),this.$el=this.$toWrap.parent(),s&&this.$el.addClass("tv-control-error--msg_left"),c&&this.$el.addClass("tv-control-error--size_small"),s||(this.$icon=this.$el.find(".tv-control-error__icon"),this.$icon.length||(this.$icon=$('<span class="tv-control-error__icon">'+$("<div>").append($(n(1358)).attr("focusable","false")).html()+"</span>").appendTo(this.$el)),i.data("tv-control-material")&&this.$icon.addClass("tv-control-error__icon--material-input")),this.$widthControlWrapper=this.$el.find(".tv-control-error__width-control-wrapper"),this.$widthControlWrapper.length||(this.$widthControlWrapper=$('<div class="tv-control-error__width-control-wrapper">').appendTo(this.$el)),this.$widthControlWrapper.css("width",this.options.maxWidth),v&&this.$widthControlWrapper.addClass("tv-control-error__width-control-wrapper--from-left"),this.$messages=this.$el.find(".tv-control-error__messages"),this.$messages.length||(this.$messages=$('<span class="tv-control-error__messages"></span>').appendTo(this.$widthControlWrapper)),i.on("focus",function(){a.$el.addClass("i-focus"),i.removeClass("i-error"),p&&i.on("keyup.tv-control-error",function(t){9!==t.keyCode&&16!==t.keyCode&&(a.clear().render(),a.$el.removeClass("i-focus"),i.off("keyup.tv-control-error"))})}),i.on("blur",function(){a.$el.removeClass("i-focus"),a.hasErrors()&&i.addClass("i-error")})}return i(t,[{key:"add",value:function(t){var e=t.id,n=t.message;return this.errors[e]=n,this}},{key:"remove",value:function(t){var e=t.id;return delete this.errors[e],this}},{key:"clear",value:function(){return this.errors={},this}},{key:"hasErrors",value:function(){return!!Object.keys(this.errors).length}},{key:"render",value:function(){var t,e,n=this;if(this.emptyTimeout&&clearTimeout(this.emptyTimeout),t=Object.keys(this.errors),t.length)for(this.$messages.empty(),this.$el.addClass("i-error"),this.options.addErrorOnElement&&this.$control.addClass("i-error"),e=0;e<t.length;e++)this.errors[t[e]]&&$('<span class="tv-control-error__message">'+this.errors[t[e]]+"</span>").appendTo(this.$messages);else this.$el.removeClass("i-error"),this.$control.removeClass("i-error"),this.emptyTimeout=setTimeout(function(){n.$messages.empty()},c.dur)
;return this}}]),t}(),$.fn.tvControlError=(0,s.createTvBlockWithInstance)("tv-control-error",function(t,e){return new a(t,e)})},1388:function(t,e){},1389:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o,i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function n(t){return 4!==t.length&&7!==t.length||(t+="-"),t=t.substr(0,10)}var e=e||{};(0,i.default)(t,n,e.inputOnTypingCallback,e.triggerChange)},o=n(1360),i=r(o),t.exports=e.default},1390:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}var o,i;Object.defineProperty(e,"__esModule",{value:!0}),e.default=function(t,e){function n(t){return 2===t.length&&(t+=":"),t=t.substr(0,5)}var e=e||{};(0,i.default)(t,n,e.inputOnTypingCallback,e.triggerChange)},o=n(1360),i=r(o),t.exports=e.default},450:function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{default:t}}function o(t,e){var n,r={};for(n in t)e.indexOf(n)>=0||Object.prototype.hasOwnProperty.call(t,n)&&(r[n]=t[n]);return r}function i(t){return function(){var e=t.apply(this,arguments);return new Promise(function(t,n){function r(o,i){var s,u;try{s=e[o](i),u=s.value}catch(t){return void n(t)}if(!s.done)return Promise.resolve(u).then(function(t){r("next",t)},function(t){r("throw",t)});t(u)}return r("next")})}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function c(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var a,h,l,p,f,d,b,v,_,y,m,w,g,C,E,x,O,D;Object.defineProperty(e,"__esModule",{value:!0}),e.PositionTicket=void 0,a=n(428),h=r(a),l=Object.assign||function(t){var e,n,r;for(e=1;e<arguments.length;e++){n=arguments[e];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},p=function(){function t(t,e){var n,r,o=[],i=!0,s=!1,u=void 0;try{for(n=t[Symbol.iterator]();!(i=(r=n.next()).done)&&(o.push(r.value),!e||o.length!==e);i=!0);}catch(t){s=!0,u=t}finally{try{!i&&n.return&&n.return()}finally{if(s)throw u}}return o}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=function(){function t(t,e){var n,r;for(n=0;n<e.length;n++)r=e[n],r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),d=function t(e,n,r){var o,i,s;return null===e&&(e=Function.prototype),void 0===(o=Object.getOwnPropertyDescriptor(e,n))?(i=Object.getPrototypeOf(e),
null===i?void 0:t(i,n,r)):"value"in o?o.value:void 0!==(s=o.get)?s.call(r):void 0},b=n(72),v=n(432),_=n(431),y=n(96),m=n(1381),w=n(1359),g=n(1386),C=void 0,E=function(){return(0,m.textLabel)({outputClass:"js-position-output"})},x=function(){return(0,m.errorLabel)({element:(0,m.numberInput)({containerClass:"js-position-input",inputClass:"js-input",upClass:"js-input-up",downClass:"js-input-down"}),containerClass:""})},O=function(){return(0,m.buttonsGroup)({containerClass:"tv-buttons-group--primary_ghost tv-buttons-group--size-small js-position-switch",options:[{optionText:$.t("Price"),optionClass:""},{optionText:$.t("Pips"),optionClass:""}]})},D=(0,m.ticket)({body:(0,m.combine)((0,m.control)({containerClass:"js-position-sl",label:(0,m.checkbox)({labelText:$.t("Stop Loss"),checkboxClass:"js-sl-checker"}),selector:O(),input:x(),output:E()}),(0,m.control)({containerClass:"js-position-tp",label:(0,m.checkbox)({labelText:$.t("Take Profit"),checkboxClass:"js-tp-checker"}),selector:O(),input:x(),output:E()})),riskRewardClass:"risk-revard-js",riskClass:"risk-js",profitClass:"profit-js",doneText:$.t("Modify"),doneClass:"js-done"}),e.PositionTicket=function(t){function e(){return s(this,e),u(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return c(e,t),f(e,[{key:"open",value:function(){function t(t,e,r,o){return n.apply(this,arguments)}var n=i(h.default.mark(function t(n,r,i,s){var u,c,a,f,v,m,C,E,x,O,D,S,k,j,N,P,A,T,q,L,R,F,I,M,W,z,U,V,B,K,H,Q,Y,G,J,Z,X,tt,et,nt,rt,ot,it,st,ut,ct,at,ht,lt,pt,ft,dt,bt,vt,_t,yt,mt,wt,gt,Ct,Et,xt,Ot,Dt,St,kt=this;return h.default.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(!this.opened){t.next=4;break}return this.focus(),this.toTop(),t.abrupt("return",Promise.reject());case 4:return u=(0,b.tradingService)(),c=u.realtimeProvider(),a=u.activeBroker(),f=w.Observable.fromEventPattern(function(t){return a.positionUpdate.subscribe(null,t)},function(t){return a.positionUpdate.unsubscribe(null,t)}).filter(function(t){return t.id===n.id}).map(function(t){return!!t.qty}),t.next=10,Promise.all([a.symbolInfo(n.symbol),a.accountInfo(),u.formatter(n.symbol)]);case 10:return v=t.sent,m=p(v,3),C=m[0],E=m[1],x=m[2],this.setTitle("<strong>"+n.symbol+",</strong> "+(n.side===y.SIDE.SELL?$.t("Short"):$.t("Long"))),O=w.Observable.fromEventPattern(function(t){return c.subscribeRealtime(n.symbol,t)},function(t){return c.unsubscribeRealtime(n.symbol,t)},function(t,e){return e}).publish(),D=w.Observable.fromEventPattern(function(t){return a.subscribeEquity(t)},function(t){return a.unsubscribeEquity(t)},function(t,e){return e}).publish(),S=w.Observable.fromEventPattern(function(t){return u.onConnectionStatusChange.subscribe(null,t)},function(t){return u.onConnectionStatusChange.unsubscribe(null,t)},function(t){return t.status||t}),k=this.el,j=w.Observable.of(n.side||y.SIDE.SELL),N=w.Observable.combineLatest(j,O,function(t,e){return t===y.SIDE.SELL?+e.bid||+e.trade:+e.ask||+e.trade}).publish(),P=w.Observable.combineLatest(j,O,function(t,e){
return t!==y.SIDE.SELL?+e.bid||+e.trade:+e.ask||+e.trade}).publish(),A=k.querySelector(".js-done"),T=new _.ButtonLoader(A),q=C.pipSize,L={step:1,formatter:new g.NumericFormatter(C.pipSize!==C.minTick?1:0)},R={step:C.minTick,min:C.minTick,formatter:x},F=function(t,e,n){return n*(t-e)/q},I=function(t,e,n){return n*t*q+e},M=w.Observable.of(n.avgPrice),W=function(t){return y.SIDE.BUY===t?1:-1},z=k.querySelector(".js-sl-checker"),U=k.querySelector(".js-tp-checker"),V=(0,g.createCheckBox)({container:z,startState:!!r.stopLoss}),B=(0,g.createCheckBox)({container:U,startState:!!r.takeProfit}),K=k.querySelector(".js-position-sl"),H=k.querySelector(".js-position-tp"),Q=k.querySelector(".js-position-sl .js-input"),Y=k.querySelector(".js-position-tp .js-input"),this.firstFocusControl=null,i===y.TICKETFOCUS.TAKEPROFIT?this.firstFocusControl=r.takeProfit&&Y:i===y.TICKETFOCUS.STOPLOSS&&(this.firstFocusControl=r.stopLoss&&Q),G=r.stopLoss?l({},R,{type:g.INPUT_TYPE.PRICE,value:(0,g.parseWithFormatter)(R.formatter,r.stopLoss)}):l({},L,{type:g.INPUT_TYPE.PIPS,value:25}),J=r.takeProfit?l({},R,{type:g.INPUT_TYPE.PRICE,value:(0,g.parseWithFormatter)(R.formatter,r.takeProfit)}):l({},L,{type:g.INPUT_TYPE.PIPS,value:75}),Z={pipsProps:L,priceProps:R,priceToPips:F,pipsToPrice:I,switchClass:".js-position-switch",inputClass:".js-position-input",outputClass:".js-position-output",observableArrForErrorChecker:[P,j]},X=function(t,e,n){return function(r,o,i,s){var u=(n?1:-1)*W(s);return Math.sign(r-i)===u?{hasError:!0,text:s===y.SIDE.SELL?e:t}:{hasError:!1}}},tt=n.side===y.SIDE.SELL?$.t("ask"):$.t("bid"),et=(0,g.createPriceController)(l({},Z,{errorChecker:X($.t("Stop loss must be below current __value__.",{value:tt}),$.t("Stop loss must be above current __value__.",{value:tt}),!0),container:K,price$:M,custom$:j.map(function(t){return-1*W(t)}),initState$:w.Observable.of(G),onOff$:V.value$})),nt=(0,g.createPriceController)(l({},Z,{errorChecker:X($.t("Take profit must be above current __value__.",{value:tt}),$.t("Take profit must be below current __value__.",{value:tt}),!1),container:H,price$:M,custom$:j.map(function(t){return W(t)}),initState$:w.Observable.of(J),onOff$:B.value$})),rt=(0,g.combineControllerAndCheckbox)(et,V),ot=rt.price$,it=rt.pips$,st=rt.error$,ut=rt.mode$,ct=o(rt,["price$","pips$","error$","mode$"]),at=(0,g.combineControllerAndCheckbox)(nt,B),ht=at.price$,lt=at.pips$,pt=at.error$,ft=at.mode$,dt=o(at,["price$","pips$","error$","mode$"]),bt=(0,g.combineErrors)([st,pt],function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return e.every(function(t){return!t.hasError})}),vt=w.Observable.combineLatest(ot,ht,V.value$,ut,B.value$,ft,function(t,e,n,r,o,i){return{stopLoss:t,takeProfit:e,slCheckbox:n,slMode:r,tpCheckbox:o,tpMode:i}}),_t=(0,g.createDoneButton)({buttonLoader:T,result$:vt,fire$:w.Observable.fromEvent(document,"keyup",function(t){return t.keyCode}).filter(function(t){return 13===t&&kt.isFocused()}),enable$:bt,handler:function(t){
var e=t.stopLoss,n=t.takeProfit,r=t.slCheckbox,o=t.slMode,i=t.tpCheckbox,c=t.tpMode,a=["Price","Pips"],h=[" Disabled"," Active"],l={SL:{active:h[+r],mode:a[o-1]},TP:{active:h[+i],mode:a[c-1]}};return Object.keys(l).forEach(function(t){u.trackEvent("Position Ticket",t+l[t].active,l[t].mode)}),s({stopLoss:e,takeProfit:n})}}),yt=_t.result$,mt=o(_t,["result$"]),wt=w.Observable.of(n.qty),gt=k.querySelector(".risk-revard-js"),Ct=k.querySelector(".risk-js"),Et=k.querySelector(".profit-js"),xt=(0,g.createRiskHelper)({container:Ct,qty$:wt,pips$:it,equity$:D,pipValue:C.pipValue,currencySign:E.currencySign}),Ot=(0,g.createRiskHelper)({container:Et,qty$:wt,pips$:lt,equity$:D,pipValue:C.pipValue,currencySign:E.currencySign,text:$.t("Reward")}),Dt=(0,g.createRiskRewardHelper)({container:gt,slPips$:it,tpPips$:lt}),St=[j.subscribe(function(t){var e=t===y.SIDE.SELL;A.classList.toggle("tv-button--danger",e),A.classList.toggle("tv-button--primary",!e)}),S.subscribe(function(t){t!==y.CONNECTSTATUSES.CONNECTED&&kt.close()}),yt.subscribe(function(t){if("error"===t.status)return t.details&&u.showErrorNotification($.t("Brackets cannot be modified"),t.details+"");kt._resolve(!0),kt.close()}),f.subscribe(function(t){t||kt.close()}),Dt.subscribe(),xt.subscribe(),Ot.subscribe(),dt.subscribe(),ct.subscribe(),mt.subscribe(),mt.connect(),ct.connect(),dt.connect(),N.connect(),P.connect(),O.connect(),D.connect()],this.once("beforeClose",function(){kt._reject(),St.forEach(function(t){return t.dispose()})}),d(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"open",this).call(this),t.abrupt("return",new Promise(function(t,e){kt._resolve=t,kt._reject=e}));case 65:case"end":return t.stop()}},t,this)}));return t}()}],[{key:"get",value:function(){return C||(C=new e({title:"ticket",width:450,destroyOnClose:!1,closeOnOutsideClick:!1,content:D,contentWrapTemplate:"<div>"})),C}}]),e}(v.TVPopup)}});